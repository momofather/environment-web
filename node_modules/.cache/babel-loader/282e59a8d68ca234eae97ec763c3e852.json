{"ast":null,"code":"import _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\system\\\\Organization\\\\List.js\";\nimport React, { Component } from \"react\";\nimport Table from \"@/components/table\";\nimport Button from \"@/components/button\";\nimport Edit from \"./Components/Edit\";\n\nvar List = /*#__PURE__*/function (_Component) {\n  _inherits(List, _Component);\n\n  function List(props) {\n    var _this;\n\n    _classCallCheck(this, List);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(List).call(this, props));\n\n    _this.editOpen = function (id, parentId) {\n      _this.setState({\n        editVisible: true,\n        id: id,\n        parentId: parentId\n      });\n    };\n\n    _this.deleteOpen = function (res) {\n      if (res.children) {\n        React.message.warning('该组织下有子组织，不能直接删除');\n        return;\n      }\n\n      React.message.confirm('确定删除该组织？', function () {\n        React.axios.post('api/sys/dept/delete', [res.deptId], function () {\n          React.message.success('删除成功');\n\n          _this.getList();\n        });\n      });\n    };\n\n    _this.onOk = function () {\n      _this.getList();\n\n      _this.setState({\n        editVisible: false\n      });\n    };\n\n    _this.getList = function () {\n      React.axios.get('api/sys/dept/list', null, function (res) {\n        _this.setState({\n          data: res.data\n        });\n      });\n    };\n\n    _this.state = {\n      editVisible: false,\n      detailVisible: false,\n      detailUserId: \"\",\n      id: null,\n      parentId: null,\n      data: []\n    };\n    return _this;\n  }\n\n  _createClass(List, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getList();\n    }\n    /*\r\n    * 打开用户编辑\r\n    * */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var editVisible = this.state.editVisible;\n      var tableColumns = [{\n        title: \"名字\",\n        key: \"name\",\n        dataIndex: \"name\"\n      }, {\n        title: \"排序\",\n        key: \"orderNum\",\n        dataIndex: \"orderNum\"\n      }, {\n        title: \"操作\",\n        width: \"240px\",\n        align: 'center',\n        render: function render(text, record) {\n          return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n            type: \"link\",\n            size: \"small\",\n            authcode: \"system:organization:addChild\",\n            onClick: _this2.editOpen.bind(_this2, null, record.deptId),\n            icon: \"add\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 21\n            }\n          }, \"\\u6DFB\\u52A0\\u5B50\\u90E8\\u95E8\"), /*#__PURE__*/React.createElement(Button, {\n            type: \"link\",\n            size: \"small\",\n            authcode: \"system:organization:edit\",\n            onClick: _this2.editOpen.bind(_this2, record.deptId, record.parentId),\n            icon: \"edit\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 21\n            }\n          }, \"\\u4FEE\\u6539\"), /*#__PURE__*/React.createElement(Button, {\n            type: \"link\",\n            size: \"small\",\n            authcode: \"system:organization:delete\",\n            danger: true,\n            onClick: _this2.deleteOpen.bind(_this2, record),\n            icon: \"delete\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 21\n            }\n          }, \"\\u5220\\u9664\"));\n        }\n      }];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        type: \"primary\",\n        onClick: this.editOpen.bind(this, null, null),\n        authcode: \"system:organization:add\",\n        icon: \"add\",\n        className: \"query-tools\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 17\n        }\n      }, \"\\u6DFB\\u52A0\"), /*#__PURE__*/React.createElement(Table, {\n        pager: false,\n        number: false,\n        rowKey: \"deptId\",\n        data: this.state.data,\n        columns: tableColumns,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }\n      }), editVisible && /*#__PURE__*/React.createElement(Edit, {\n        id: this.state.id,\n        parentId: this.state.parentId,\n        onOk: this.onOk,\n        onCancel: function onCancel() {\n          _this2.setState({\n            editVisible: false\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 33\n        }\n      }));\n    }\n  }]);\n\n  return List;\n}(Component);\n\n;\nexport default List;","map":{"version":3,"sources":["E:/project/environment-web/src/pages/system/Organization/List.js"],"names":["React","Component","Table","Button","Edit","List","props","editOpen","id","parentId","setState","editVisible","deleteOpen","res","children","message","warning","confirm","axios","post","deptId","success","getList","onOk","get","data","state","detailVisible","detailUserId","tableColumns","title","key","dataIndex","width","align","render","text","record","bind"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAcC,SAAd,QAA8B,OAA9B;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AAEA,OAAOC,IAAP,MAAiB,mBAAjB;;IAEMC,I;;;AACF,gBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,8EAAMA,KAAN;;AADc,UAmBlBC,QAnBkB,GAmBP,UAACC,EAAD,EAAIC,QAAJ,EAAiB;AACxB,YAAKC,QAAL,CAAc;AAACC,QAAAA,WAAW,EAAC,IAAb;AAAkBH,QAAAA,EAAE,EAAFA,EAAlB;AAAqBC,QAAAA,QAAQ,EAARA;AAArB,OAAd;AACH,KArBiB;;AAAA,UA0BlBG,UA1BkB,GA0BL,UAACC,GAAD,EAAS;AAClB,UAAGA,GAAG,CAACC,QAAP,EAAgB;AACZd,QAAAA,KAAK,CAACe,OAAN,CAAcC,OAAd,CAAsB,iBAAtB;AACA;AACH;;AACDhB,MAAAA,KAAK,CAACe,OAAN,CAAcE,OAAd,CAAsB,UAAtB,EAAiC,YAAI;AACjCjB,QAAAA,KAAK,CAACkB,KAAN,CAAYC,IAAZ,CAAiB,qBAAjB,EAAuC,CAACN,GAAG,CAACO,MAAL,CAAvC,EAAoD,YAAI;AACpDpB,UAAAA,KAAK,CAACe,OAAN,CAAcM,OAAd,CAAsB,MAAtB;;AACA,gBAAKC,OAAL;AACH,SAHD;AAIH,OALD;AAMH,KArCiB;;AAAA,UA0ClBC,IA1CkB,GA0CX,YAAM;AACT,YAAKD,OAAL;;AACA,YAAKZ,QAAL,CAAc;AAACC,QAAAA,WAAW,EAAE;AAAd,OAAd;AACH,KA7CiB;;AAAA,UAkDlBW,OAlDkB,GAkDV,YAAI;AACRtB,MAAAA,KAAK,CAACkB,KAAN,CAAYM,GAAZ,CAAgB,mBAAhB,EAAoC,IAApC,EAAyC,UAAAX,GAAG,EAAE;AAC1C,cAAKH,QAAL,CAAc;AAACe,UAAAA,IAAI,EAAEZ,GAAG,CAACY;AAAX,SAAd;AACH,OAFD;AAGH,KAtDiB;;AAEd,UAAKC,KAAL,GAAY;AACRf,MAAAA,WAAW,EAAC,KADJ;AAERgB,MAAAA,aAAa,EAAC,KAFN;AAGRC,MAAAA,YAAY,EAAC,EAHL;AAIRpB,MAAAA,EAAE,EAAE,IAJI;AAKRC,MAAAA,QAAQ,EAAE,IALF;AAMRgB,MAAAA,IAAI,EAAE;AANE,KAAZ;AAFc;AAUjB;;;;wCAEkB;AACf,WAAKH,OAAL;AACH;AAED;AACJ;AACA;;;;6BAsCY;AAAA;;AAAA,UACGX,WADH,GACkB,KAAKe,KADvB,CACGf,WADH;AAGJ,UAAMkB,YAAY,GAAG,CACjB;AACIC,QAAAA,KAAK,EAAC,IADV;AAEIC,QAAAA,GAAG,EAAC,MAFR;AAGIC,QAAAA,SAAS,EAAC;AAHd,OADiB,EAMjB;AACIF,QAAAA,KAAK,EAAC,IADV;AAEIC,QAAAA,GAAG,EAAC,UAFR;AAGIC,QAAAA,SAAS,EAAC;AAHd,OANiB,EAWjB;AACIF,QAAAA,KAAK,EAAC,IADV;AAEIG,QAAAA,KAAK,EAAC,OAFV;AAGIC,QAAAA,KAAK,EAAE,QAHX;AAIIC,QAAAA,MAAM,EAAC,gBAACC,IAAD,EAAMC,MAAN;AAAA,8BAAiB,uDACpB,oBAAC,MAAD;AAAQ,YAAA,IAAI,EAAC,MAAb;AAAoB,YAAA,IAAI,EAAC,OAAzB;AAAiC,YAAA,QAAQ,EAAC,8BAA1C;AAAyE,YAAA,OAAO,EAAE,MAAI,CAAC9B,QAAL,CAAc+B,IAAd,CAAmB,MAAnB,EAAwB,IAAxB,EAA6BD,MAAM,CAACjB,MAApC,CAAlF;AAA+H,YAAA,IAAI,EAAC,KAApI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CADoB,eAEpB,oBAAC,MAAD;AAAQ,YAAA,IAAI,EAAC,MAAb;AAAoB,YAAA,IAAI,EAAC,OAAzB;AAAiC,YAAA,QAAQ,EAAC,0BAA1C;AAAqE,YAAA,OAAO,EAAE,MAAI,CAACb,QAAL,CAAc+B,IAAd,CAAmB,MAAnB,EAAwBD,MAAM,CAACjB,MAA/B,EAAsCiB,MAAM,CAAC5B,QAA7C,CAA9E;AAAsI,YAAA,IAAI,EAAC,MAA3I;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAFoB,eAGpB,oBAAC,MAAD;AAAQ,YAAA,IAAI,EAAC,MAAb;AAAoB,YAAA,IAAI,EAAC,OAAzB;AAAiC,YAAA,QAAQ,EAAC,4BAA1C;AAAuE,YAAA,MAAM,MAA7E;AAA8E,YAAA,OAAO,EAAE,MAAI,CAACG,UAAL,CAAgB0B,IAAhB,CAAqB,MAArB,EAA0BD,MAA1B,CAAvF;AAA0H,YAAA,IAAI,EAAC,QAA/H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAHoB,CAAjB;AAAA;AAJX,OAXiB,CAArB;AAuBA,0BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,oBAAC,MAAD;AAAQ,QAAA,IAAI,EAAC,SAAb;AAAuB,QAAA,OAAO,EAAE,KAAK9B,QAAL,CAAc+B,IAAd,CAAmB,IAAnB,EAAwB,IAAxB,EAA6B,IAA7B,CAAhC;AAAoE,QAAA,QAAQ,EAAC,yBAA7E;AAAuG,QAAA,IAAI,EAAC,KAA5G;AAAkH,QAAA,SAAS,EAAC,aAA5H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,eAEI,oBAAC,KAAD;AAAO,QAAA,KAAK,EAAE,KAAd;AAAqB,QAAA,MAAM,EAAE,KAA7B;AAAoC,QAAA,MAAM,EAAC,QAA3C;AAAoD,QAAA,IAAI,EAAE,KAAKZ,KAAL,CAAWD,IAArE;AAA2E,QAAA,OAAO,EAAEI,YAApF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,EAGKlB,WAAW,iBAAI,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAE,KAAKe,KAAL,CAAWlB,EAArB;AAAyB,QAAA,QAAQ,EAAE,KAAKkB,KAAL,CAAWjB,QAA9C;AAAwD,QAAA,IAAI,EAAE,KAAKc,IAAnE;AAAyE,QAAA,QAAQ,EAAE,oBAAI;AAAC,UAAA,MAAI,CAACb,QAAL,CAAc;AAACC,YAAAA,WAAW,EAAE;AAAd,WAAd;AAAoC,SAA5H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHpB,CADJ;AAOH;;;;EA1FcV,S;;AA2FlB;AACD,eAAeI,IAAf","sourcesContent":["import React,{Component} from \"react\";\r\nimport Table from \"@/components/table\";\r\nimport Button from \"@/components/button\";\r\n\r\nimport Edit from \"./Components/Edit\";\r\n\r\nclass List extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state= {\r\n            editVisible:false,\r\n            detailVisible:false,\r\n            detailUserId:\"\",\r\n            id: null,\r\n            parentId: null,\r\n            data: []\r\n        };\r\n    };\r\n\r\n    componentDidMount(){\r\n        this.getList();\r\n    }\r\n\r\n    /*\r\n    * 打开用户编辑\r\n    * */\r\n    editOpen = (id,parentId) => {\r\n        this.setState({editVisible:true,id,parentId});\r\n    };\r\n\r\n    /*\r\n    * 打开用户删除\r\n    * */\r\n    deleteOpen = (res) => {\r\n        if(res.children){\r\n            React.message.warning('该组织下有子组织，不能直接删除');\r\n            return;\r\n        }\r\n        React.message.confirm('确定删除该组织？',()=>{\r\n            React.axios.post('api/sys/dept/delete',[res.deptId],()=>{\r\n                React.message.success('删除成功');\r\n                this.getList();\r\n            })\r\n        })\r\n    };\r\n\r\n    /**\r\n     * 保存成功\r\n     */\r\n    onOk = () => {\r\n        this.getList();\r\n        this.setState({editVisible: false});\r\n    }\r\n\r\n    /**\r\n     * 获取列表数据\r\n     */\r\n    getList=()=>{\r\n        React.axios.get('api/sys/dept/list',null,res=>{\r\n            this.setState({data: res.data});\r\n        })\r\n    }\r\n\r\n    render(){\r\n        const {editVisible} = this.state;\r\n\r\n        const tableColumns = [\r\n            {\r\n                title:\"名字\",\r\n                key:\"name\",\r\n                dataIndex:\"name\",\r\n            },\r\n            {\r\n                title:\"排序\",\r\n                key:\"orderNum\",\r\n                dataIndex:\"orderNum\",\r\n            },\r\n            {\r\n                title:\"操作\",\r\n                width:\"240px\",\r\n                align: 'center',\r\n                render:(text,record) => <>\r\n                    <Button type=\"link\" size=\"small\" authcode=\"system:organization:addChild\" onClick={this.editOpen.bind(this,null,record.deptId)} icon=\"add\">添加子部门</Button>\r\n                    <Button type=\"link\" size=\"small\" authcode=\"system:organization:edit\" onClick={this.editOpen.bind(this,record.deptId,record.parentId)} icon=\"edit\">修改</Button>\r\n                    <Button type=\"link\" size=\"small\" authcode=\"system:organization:delete\" danger onClick={this.deleteOpen.bind(this,record)} icon=\"delete\">删除</Button>\r\n                </>,\r\n            },\r\n        ];\r\n\r\n        return(\r\n            <div>\r\n                <Button type=\"primary\" onClick={this.editOpen.bind(this,null,null)} authcode=\"system:organization:add\" icon=\"add\" className=\"query-tools\">添加</Button>\r\n                <Table pager={false} number={false} rowKey=\"deptId\" data={this.state.data} columns={tableColumns}/>\r\n                {editVisible && <Edit id={this.state.id} parentId={this.state.parentId} onOk={this.onOk} onCancel={()=>{this.setState({editVisible: false})}}/>}\r\n            </div>\r\n        );\r\n    };\r\n};\r\nexport default List;"]},"metadata":{},"sourceType":"module"}