{"ast":null,"code":"import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/input-number/style\";\nimport _InputNumber from \"antd/es/input-number\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\system\\\\Organization\\\\Components\\\\Edit.js\";\nimport React, { Component } from \"react\";\n\nvar edit = /*#__PURE__*/function (_Component) {\n  _inherits(edit, _Component);\n\n  function edit(props) {\n    var _this;\n\n    _classCallCheck(this, edit);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(edit).call(this, props));\n    _this.formRef = React.createRef();\n\n    _this.submit = function () {\n      _this.formRef.current.validateFields().then(function (values) {\n        values.deptId = _this.props.id;\n        values.parentId = _this.props.parentId;\n\n        if (!values.parentId) {\n          values.parentId = 0;\n        }\n\n        var url = 'api/sys/dept/save';\n\n        if (values.deptId) {\n          url = 'api/sys/dept/update';\n        }\n\n        React.axios.post(url, values, function () {\n          React.message.success('操作成功');\n\n          _this.props.onOk();\n        });\n      }).catch();\n    };\n\n    _this.getInfo = function (id) {\n      var isParent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (id) {\n        React.axios.get(\"api/sys/dept/\".concat(id), null, function (res) {\n          if (isParent) {\n            _this.formRef.current.setFieldsValue({\n              parentName: res.data.name\n            });\n          } else {\n            _this.formRef.current.setFieldsValue({\n              name: res.data.name,\n              orderNum: res.data.orderNum\n            });\n          }\n        });\n      }\n    };\n\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(edit, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.parentId && this.props.parentId !== '0') {\n        this.getInfo(this.props.parentId, true);\n      } else {\n        this.formRef.current.setFieldsValue({\n          parentName: '根组织'\n        });\n      }\n\n      this.getInfo(this.props.id, false);\n    }\n    /*\r\n    * 提交\r\n    * */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(_Modal, {\n        title: this.props.id ? \"修改组织机构\" : \"添加组织机构\",\n        visible: true,\n        onOk: this.submit,\n        onCancel: this.props.onCancel,\n        maskClosable: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(_Form, {\n        ref: this.formRef,\n        labelCol: {\n          span: 4\n        },\n        onFinish: this.submit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u4E0A\\u7EA7\\u7EC4\\u7EC7\",\n        name: \"parentName\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u7EC4\\u7EC7\\u540D\\u79F0\",\n        name: \"name\",\n        rules: [{\n          required: true,\n          message: '请输入组织名称!'\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        placeholder: \"\\u7EC4\\u7EC7\\u540D\\u79F0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u5E8F\\u53F7\",\n        name: \"orderNum\",\n        initialValue: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_InputNumber, {\n        style: {\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 25\n        }\n      }))));\n    }\n  }]);\n\n  return edit;\n}(Component);\n\n;\nexport default edit;","map":{"version":3,"sources":["E:/project/environment-web/src/pages/system/Organization/Components/Edit.js"],"names":["React","Component","edit","props","formRef","createRef","submit","current","validateFields","then","values","deptId","id","parentId","url","axios","post","message","success","onOk","catch","getInfo","isParent","get","res","setFieldsValue","parentName","data","name","orderNum","state","onCancel","span","required","width"],"mappings":"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","sourcesContent":["import React,{Component} from \"react\";\r\nimport {Modal,Form,Input,InputNumber} from \"antd\";\r\n\r\nclass edit extends Component{\r\n    formRef = React.createRef();\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n\r\n        };\r\n    };\r\n    componentDidMount(){\r\n        if (this.props.parentId && this.props.parentId !== '0'){\r\n            this.getInfo(this.props.parentId,true);\r\n        }else{\r\n            this.formRef.current.setFieldsValue({parentName: '根组织'});\r\n        }\r\n        this.getInfo(this.props.id,false);\r\n    }\r\n\r\n    /*\r\n    * 提交\r\n    * */\r\n    submit = () => {\r\n        this.formRef.current.validateFields().then(values => {\r\n            values.deptId = this.props.id;\r\n            values.parentId = this.props.parentId;\r\n            if(!values.parentId){\r\n                values.parentId = 0;\r\n            }\r\n            let url = 'api/sys/dept/save';\r\n            if(values.deptId){\r\n                url = 'api/sys/dept/update';\r\n            }\r\n            React.axios.post(url,values,()=>{\r\n                React.message.success('操作成功');\r\n                this.props.onOk();\r\n            })\r\n        }).catch();\r\n    };\r\n\r\n    /**\r\n     * 根据id查询\r\n     */\r\n    getInfo=(id,isParent=false)=>{\r\n        if(id){\r\n            React.axios.get(`api/sys/dept/${id}`,null,res=>{\r\n                if(isParent){\r\n                    this.formRef.current.setFieldsValue({\r\n                        parentName: res.data.name\r\n                    });\r\n                }else{\r\n                    this.formRef.current.setFieldsValue({\r\n                        name: res.data.name,\r\n                        orderNum: res.data.orderNum,\r\n                    });\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <Modal\r\n                title={this.props.id?\"修改组织机构\":\"添加组织机构\"}\r\n                visible={true}\r\n                onOk={this.submit}\r\n                onCancel={this.props.onCancel}\r\n                maskClosable={false}\r\n            >\r\n                <Form ref={this.formRef} labelCol={{span: 4}} onFinish={this.submit}>\r\n                    <Form.Item label=\"上级组织\" name=\"parentName\">\r\n                        <Input readOnly />\r\n                    </Form.Item>\r\n                    <Form.Item label=\"组织名称\" name=\"name\" rules={[{ required: true, message: '请输入组织名称!'}]}>\r\n                        <Input placeholder=\"组织名称\"/>\r\n                    </Form.Item>\r\n                    <Form.Item label=\"序号\" name=\"orderNum\" initialValue={1}>\r\n                        <InputNumber style={{width: '100%'}} />\r\n                    </Form.Item>\r\n                </Form>\r\n            </Modal>\r\n        );\r\n    };\r\n};\r\nexport default edit;"]},"metadata":{},"sourceType":"module"}