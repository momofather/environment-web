{"ast":null,"code":"import _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\system\\\\role\\\\List.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport Button from '@/components/button';\nimport Table from '@/components/table';\nimport Edit from './Edit';\nimport AuthSet from './AuthSet';\n\nvar List = /*#__PURE__*/function (_Component) {\n  _inherits(List, _Component);\n\n  function List(props) {\n    var _this;\n\n    _classCallCheck(this, List);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(List).call(this, props));\n    _this.tableRef = React.createRef();\n\n    _this.editRole = function (roleId) {\n      _this.setState({\n        roleId: roleId,\n        editDialog: true\n      });\n    };\n\n    _this.delRole = function (roleId) {\n      React.message.confirm('确定删除该角色？', function () {\n        React.axios.post('sys/role/delete', [roleId], function (res) {\n          React.message.success('删除成功');\n\n          _this.tableRef.reload();\n        });\n      });\n    };\n\n    _this.authSet = function (roleId) {\n      _this.setState({\n        roleId: roleId,\n        authSetDialog: true\n      });\n    };\n\n    _this.state = {\n      editDialog: false,\n      authSetDialog: false,\n      roleId: null,\n      data: []\n    };\n    return _this;\n  }\n\n  _createClass(List, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var columns = [{\n        title: '角色名称',\n        dataIndex: 'roleName',\n        key: 'roleName',\n        width: '200px'\n      }, {\n        title: '描述',\n        dataIndex: 'remark',\n        key: 'remark'\n      }, {\n        title: '创建时间',\n        dataIndex: 'createTime',\n        key: 'createTime',\n        align: 'center',\n        width: '150px'\n      }, {\n        title: '操作',\n        width: '230px',\n        align: 'center',\n        render: function render(text, record) {\n          return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n            type: \"link\",\n            size: \"small\",\n            onClick: _this2.editRole.bind(_this2, record.roleId),\n            authcode: \"sys:role:update\",\n            icon: \"edit\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 21\n            }\n          }, \"\\u4FEE\\u6539\"), /*#__PURE__*/React.createElement(Button, {\n            type: \"link\",\n            size: \"small\",\n            onClick: _this2.authSet.bind(_this2, record.roleId),\n            authcode: \"sys:role:authset\",\n            icon: \"oanth\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 21\n            }\n          }, \"\\u6743\\u9650\\u914D\\u7F6E\"), /*#__PURE__*/React.createElement(Button, {\n            type: \"link\",\n            danger: true,\n            size: \"small\",\n            onClick: _this2.delRole.bind(_this2, record.roleId),\n            authcode: \"sys:role:delete\",\n            icon: \"delete\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 21\n            }\n          }, \"\\u5220\\u9664\"));\n        }\n      }];\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n        type: \"primary\",\n        className: \"query-tools\",\n        authcode: \"sys:role:save\",\n        onClick: this.editRole.bind(this, null),\n        icon: \"add\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }\n      }, \"\\u65B0\\u589E\"), /*#__PURE__*/React.createElement(Table, {\n        columns: columns,\n        rowKey: \"roleId\",\n        onRef: function onRef(ref) {\n          return _this2.tableRef = ref;\n        },\n        method: \"get\",\n        url: \"sys/role/list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 17\n        }\n      }), this.state.editDialog && /*#__PURE__*/React.createElement(Edit, {\n        roleId: this.state.roleId,\n        onCancel: function onCancel(flag) {\n          _this2.setState({\n            editDialog: false\n          });\n\n          _this2.tableRef.reload();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 41\n        }\n      }), this.state.authSetDialog && /*#__PURE__*/React.createElement(AuthSet, {\n        roleId: this.state.roleId,\n        onCancel: function onCancel() {\n          _this2.setState({\n            authSetDialog: false\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 44\n        }\n      }));\n    }\n  }]);\n\n  return List;\n}(Component);\n\nexport default withRouter(List);","map":{"version":3,"sources":["E:/project/environment-web/src/pages/system/role/List.js"],"names":["React","Component","withRouter","Button","Table","Edit","AuthSet","List","props","tableRef","createRef","editRole","roleId","setState","editDialog","delRole","message","confirm","axios","post","res","success","reload","authSet","authSetDialog","state","data","columns","title","dataIndex","key","width","align","render","text","record","bind","ref","flag"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,OAAP,MAAoB,WAApB;;IACMC,I;;;AAEF,gBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,8EAAMA,KAAN;AADc,UADlBC,QACkB,GADPT,KAAK,CAACU,SAAN,EACO;;AAAA,UASlBC,QATkB,GAST,UAACC,MAAD,EAAU;AACf,YAAKC,QAAL,CAAc;AACVD,QAAAA,MAAM,EAAEA,MADE;AAEVE,QAAAA,UAAU,EAAC;AAFD,OAAd;AAIH,KAdiB;;AAAA,UAgBlBC,OAhBkB,GAgBV,UAACH,MAAD,EAAU;AACdZ,MAAAA,KAAK,CAACgB,OAAN,CAAcC,OAAd,CAAsB,UAAtB,EAAiC,YAAI;AACjCjB,QAAAA,KAAK,CAACkB,KAAN,CAAYC,IAAZ,CAAiB,iBAAjB,EAAmC,CAACP,MAAD,CAAnC,EAA4C,UAAAQ,GAAG,EAAE;AAC7CpB,UAAAA,KAAK,CAACgB,OAAN,CAAcK,OAAd,CAAsB,MAAtB;;AACA,gBAAKZ,QAAL,CAAca,MAAd;AACH,SAHD;AAIH,OALD;AAMH,KAvBiB;;AAAA,UAyBlBC,OAzBkB,GAyBV,UAACX,MAAD,EAAU;AACd,YAAKC,QAAL,CAAc;AACVD,QAAAA,MAAM,EAAEA,MADE;AAEVY,QAAAA,aAAa,EAAC;AAFJ,OAAd;AAIH,KA9BiB;;AAEd,UAAKC,KAAL,GAAa;AACTX,MAAAA,UAAU,EAAE,KADH;AAETU,MAAAA,aAAa,EAAE,KAFN;AAGTZ,MAAAA,MAAM,EAAE,IAHC;AAITc,MAAAA,IAAI,EAAE;AAJG,KAAb;AAFc;AAQjB;;;;6BAuBO;AAAA;;AACJ,UAAMC,OAAO,GAAG,CACZ;AACIC,QAAAA,KAAK,EAAE,MADX;AAEIC,QAAAA,SAAS,EAAE,UAFf;AAGIC,QAAAA,GAAG,EAAE,UAHT;AAIIC,QAAAA,KAAK,EAAE;AAJX,OADY,EAOZ;AACIH,QAAAA,KAAK,EAAE,IADX;AAEIC,QAAAA,SAAS,EAAE,QAFf;AAGIC,QAAAA,GAAG,EAAE;AAHT,OAPY,EAYZ;AACIF,QAAAA,KAAK,EAAE,MADX;AAEIC,QAAAA,SAAS,EAAE,YAFf;AAGIC,QAAAA,GAAG,EAAE,YAHT;AAIIE,QAAAA,KAAK,EAAE,QAJX;AAKID,QAAAA,KAAK,EAAE;AALX,OAZY,EAmBZ;AACIH,QAAAA,KAAK,EAAE,IADX;AAEIG,QAAAA,KAAK,EAAE,OAFX;AAGIC,QAAAA,KAAK,EAAE,QAHX;AAIIC,QAAAA,MAAM,EAAE,gBAACC,IAAD,EAAOC,MAAP;AAAA,8BAAgB,uDACpB,oBAAC,MAAD;AAAQ,YAAA,IAAI,EAAC,MAAb;AAAoB,YAAA,IAAI,EAAC,OAAzB;AAAiC,YAAA,OAAO,EAAE,MAAI,CAACxB,QAAL,CAAcyB,IAAd,CAAmB,MAAnB,EAAwBD,MAAM,CAACvB,MAA/B,CAA1C;AAAkF,YAAA,QAAQ,EAAC,iBAA3F;AAA6G,YAAA,IAAI,EAAC,MAAlH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADoB,eAEpB,oBAAC,MAAD;AAAQ,YAAA,IAAI,EAAC,MAAb;AAAoB,YAAA,IAAI,EAAC,OAAzB;AAAiC,YAAA,OAAO,EAAE,MAAI,CAACW,OAAL,CAAaa,IAAb,CAAkB,MAAlB,EAAuBD,MAAM,CAACvB,MAA9B,CAA1C;AAAiF,YAAA,QAAQ,EAAC,kBAA1F;AAA6G,YAAA,IAAI,EAAC,OAAlH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAFoB,eAGpB,oBAAC,MAAD;AAAQ,YAAA,IAAI,EAAC,MAAb;AAAoB,YAAA,MAAM,MAA1B;AAA2B,YAAA,IAAI,EAAC,OAAhC;AAAwC,YAAA,OAAO,EAAE,MAAI,CAACG,OAAL,CAAaqB,IAAb,CAAkB,MAAlB,EAAuBD,MAAM,CAACvB,MAA9B,CAAjD;AAAwF,YAAA,QAAQ,EAAC,iBAAjG;AAAmH,YAAA,IAAI,EAAC,QAAxH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAHoB,CAAhB;AAAA;AAJZ,OAnBY,CAAhB;AA8BA,0BACI,uDACI,oBAAC,MAAD;AAAQ,QAAA,IAAI,EAAC,SAAb;AAAuB,QAAA,SAAS,EAAC,aAAjC;AAA+C,QAAA,QAAQ,EAAC,eAAxD;AAAwE,QAAA,OAAO,EAAE,KAAKD,QAAL,CAAcyB,IAAd,CAAmB,IAAnB,EAAwB,IAAxB,CAAjF;AAAgH,QAAA,IAAI,EAAC,KAArH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,eAEI,oBAAC,KAAD;AAAO,QAAA,OAAO,EAAET,OAAhB;AAAyB,QAAA,MAAM,EAAC,QAAhC;AAAyC,QAAA,KAAK,EAAE,eAAAU,GAAG;AAAA,iBAAE,MAAI,CAAC5B,QAAL,GAAgB4B,GAAlB;AAAA,SAAnD;AAA0E,QAAA,MAAM,EAAC,KAAjF;AAAuF,QAAA,GAAG,EAAC,eAA3F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,EAGK,KAAKZ,KAAL,CAAWX,UAAX,iBAAuB,oBAAC,IAAD;AAAM,QAAA,MAAM,EAAE,KAAKW,KAAL,CAAWb,MAAzB;AAAiC,QAAA,QAAQ,EAAE,kBAAC0B,IAAD,EAAQ;AAAC,UAAA,MAAI,CAACzB,QAAL,CAAc;AAACC,YAAAA,UAAU,EAAE;AAAb,WAAd;;AAAmC,UAAA,MAAI,CAACL,QAAL,CAAca,MAAd;AAAuB,SAA9G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAH5B,EAIK,KAAKG,KAAL,CAAWD,aAAX,iBAA0B,oBAAC,OAAD;AAAS,QAAA,MAAM,EAAE,KAAKC,KAAL,CAAWb,MAA5B;AAAoC,QAAA,QAAQ,EAAE,oBAAI;AAAC,UAAA,MAAI,CAACC,QAAL,CAAc;AAACW,YAAAA,aAAa,EAAE;AAAhB,WAAd;AAAsC,SAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJ/B,CADJ;AAQH;;;;EAxEcvB,S;;AA0EnB,eAAeC,UAAU,CAACK,IAAD,CAAzB","sourcesContent":["import React, {Component} from 'react';\r\nimport {withRouter} from \"react-router-dom\";\r\nimport Button from '@/components/button';\r\nimport Table from '@/components/table';\r\nimport Edit from './Edit';\r\nimport AuthSet from './AuthSet';\r\nclass List extends Component{\r\n    tableRef = React.createRef();\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            editDialog: false,\r\n            authSetDialog: false,\r\n            roleId: null,\r\n            data: []\r\n        }\r\n    }\r\n    editRole=(roleId)=>{\r\n        this.setState({\r\n            roleId: roleId,\r\n            editDialog:true\r\n        });\r\n    }\r\n    // 删除菜单\r\n    delRole=(roleId)=>{\r\n        React.message.confirm('确定删除该角色？',()=>{\r\n            React.axios.post('sys/role/delete',[roleId],res=>{\r\n                React.message.success('删除成功');\r\n                this.tableRef.reload();\r\n            })\r\n        });\r\n    }\r\n    // 权限配置\r\n    authSet=(roleId)=>{\r\n        this.setState({\r\n            roleId: roleId,\r\n            authSetDialog:true\r\n        });\r\n    }\r\n    render(){\r\n        const columns = [\r\n            {\r\n                title: '角色名称',\r\n                dataIndex: 'roleName',\r\n                key: 'roleName',\r\n                width: '200px',\r\n            },\r\n            {\r\n                title: '描述',\r\n                dataIndex: 'remark',\r\n                key: 'remark',\r\n            },\r\n            {\r\n                title: '创建时间',\r\n                dataIndex: 'createTime',\r\n                key: 'createTime',\r\n                align: 'center',\r\n                width: '150px'\r\n            },\r\n            {\r\n                title: '操作',\r\n                width: '230px',\r\n                align: 'center',\r\n                render: (text, record)=><>\r\n                    <Button type=\"link\" size=\"small\" onClick={this.editRole.bind(this,record.roleId)} authcode=\"sys:role:update\" icon=\"edit\">修改</Button>\r\n                    <Button type=\"link\" size=\"small\" onClick={this.authSet.bind(this,record.roleId)} authcode=\"sys:role:authset\" icon=\"oanth\">权限配置</Button>\r\n                    <Button type=\"link\" danger size=\"small\" onClick={this.delRole.bind(this,record.roleId)} authcode=\"sys:role:delete\" icon=\"delete\">删除</Button>\r\n                </>\r\n            }\r\n        ];\r\n        return(\r\n            <>\r\n                <Button type=\"primary\" className=\"query-tools\" authcode=\"sys:role:save\" onClick={this.editRole.bind(this,null)} icon=\"add\">新增</Button>\r\n                <Table columns={columns} rowKey=\"roleId\" onRef={ref=>this.tableRef = ref} method=\"get\" url=\"sys/role/list\" />\r\n                {this.state.editDialog&&<Edit roleId={this.state.roleId} onCancel={(flag)=>{this.setState({editDialog: false});this.tableRef.reload()}}/>}\r\n                {this.state.authSetDialog&&<AuthSet roleId={this.state.roleId} onCancel={()=>{this.setState({authSetDialog: false})}}/>}\r\n            </>\r\n        );\r\n    }\r\n}\r\nexport default withRouter(List);"]},"metadata":{},"sourceType":"module"}