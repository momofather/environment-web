{"ast":null,"code":"import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/select/style\";\nimport _Select from \"antd/es/select\";\nimport _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\inventory\\\\warehouseLocation\\\\components\\\\Edit.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React, { Component } from \"react\";\n\nvar Edit = /*#__PURE__*/function (_Component) {\n  _inherits(Edit, _Component);\n\n  function Edit(props) {\n    var _this;\n\n    _classCallCheck(this, Edit);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Edit).call(this, props));\n    _this.formRef = React.createRef();\n\n    _this.submit = function () {\n      var tableReload = _this.props.tableReload;\n\n      _this.formRef.current.validateFields().then(function (values) {\n        values.id = _this.props.id;\n\n        var _iterator = _createForOfIteratorHelper(_this.state.warehouseList),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var item = _step.value;\n\n            if (item.number === values.houseNumber) {\n              values.houseName = item.name;\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        var url = 'api/wms/twarehouselocation/save';\n\n        if (values.id) {\n          url = 'api/wms/twarehouselocation/update';\n        }\n\n        React.axios.post(url, values, function () {\n          _this.close();\n\n          tableReload();\n        });\n      }).catch();\n    };\n\n    _this.close = function () {\n      var close = _this.props.close;\n      close();\n    };\n\n    _this.state = {\n      warehouseList: []\n    };\n    return _this;\n  }\n\n  _createClass(Edit, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var id = this.props.id;\n\n      if (id) {\n        React.axios.get(\"api/wms/twarehouselocation/info/\" + id, \"\", function (res) {\n          _this2.formRef.current.setFieldsValue(res.data);\n        });\n      }\n\n      ;\n      React.axios.get(\"api/wms/twarehouse/list?limit=1000&page=1\", \"\", function (res) {\n        _this2.setState({\n          warehouseList: res.data.data\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var warehouseList = this.state.warehouseList;\n      return /*#__PURE__*/React.createElement(_Modal, {\n        title: this.props.id ? \"修改区域信息\" : \"添加区域\",\n        visible: true,\n        onOk: this.submit,\n        onCancel: this.close,\n        maskClosable: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(_Form, {\n        labelCol: {\n          span: 4\n        },\n        ref: this.formRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u4ED3\\u5E93\",\n        name: \"houseNumber\",\n        initialValue: this.props.wareHourseHumber,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Select, {\n        placeholder: \"\\u4ED3\\u5E93\",\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }\n      }, warehouseList.map(function (item) {\n        return /*#__PURE__*/React.createElement(_Select.Option, {\n          key: item.number,\n          value: item.number,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 37\n          }\n        }, item.name);\n      }))), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u533A\\u57DF\\u540D\\u79F0\",\n        name: \"name\",\n        initialValue: \"\",\n        rules: [{\n          required: true,\n          message: \"区域名称不能为空\"\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        placeholder: \"\\u533A\\u57DF\\u540D\\u79F0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u7F16\\u53F7\",\n        name: \"number\",\n        initialValue: \"\",\n        rules: [{\n          required: true,\n          message: \"编号不能为空\"\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        placeholder: \"\\u7F16\\u53F7\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u5907\\u6CE8\",\n        name: \"remark\",\n        initialValue: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input.TextArea, {\n        placeholder: \"100\\u4E2A\\u5B57\\u4EE5\\u5185\",\n        maxLength: 100,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 25\n        }\n      }))));\n    }\n  }]);\n\n  return Edit;\n}(Component);\n\n;\nexport default Edit;","map":{"version":3,"sources":["E:/project/environment-web/src/pages/inventory/warehouseLocation/components/Edit.js"],"names":["React","Component","Edit","props","formRef","createRef","submit","tableReload","current","validateFields","then","values","id","state","warehouseList","item","number","houseNumber","houseName","name","url","axios","post","close","catch","get","res","setFieldsValue","data","setState","span","wareHourseHumber","map","required","message"],"mappings":"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","sourcesContent":["import React,{Component} from \"react\";\r\nimport {Modal,Form,Input,Select} from \"antd\";\r\n\r\nclass Edit extends Component{\r\n    formRef = React.createRef();\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            warehouseList:[]\r\n        };\r\n    };\r\n\r\n    componentDidMount(){\r\n        const {id} = this.props;\r\n        if(id){\r\n            React.axios.get(\"api/wms/twarehouselocation/info/\"+id,\"\",res => {\r\n                this.formRef.current.setFieldsValue(res.data);\r\n            });\r\n        };\r\n        React.axios.get(\"api/wms/twarehouse/list?limit=1000&page=1\",\"\",res => {\r\n            this.setState({warehouseList:res.data.data});\r\n        });\r\n    };\r\n\r\n    /**\r\n     * @todo 提交表单\r\n     */\r\n    submit = () => {\r\n        const {tableReload} = this.props;\r\n        this.formRef.current.validateFields().then((values) => {\r\n            values.id = this.props.id;\r\n            for(let item of this.state.warehouseList){\r\n                if(item.number === values.houseNumber){\r\n                    values.houseName = item.name;\r\n                }\r\n            }\r\n            let url = 'api/wms/twarehouselocation/save';\r\n            if(values.id){\r\n                url = 'api/wms/twarehouselocation/update';\r\n            }\r\n            React.axios.post(url,values,() => {\r\n                this.close();\r\n                tableReload();\r\n            });\r\n        }).catch();\r\n    };\r\n\r\n    /**\r\n     * @todo 关闭组件\r\n     */\r\n    close = () => {\r\n        const {close} = this.props;\r\n        close();\r\n    };\r\n\r\n    render(){\r\n        const {warehouseList} = this.state;\r\n        return(\r\n            <Modal\r\n                title={this.props.id ? (\"修改区域信息\") : (\"添加区域\")}\r\n                visible={true}\r\n                onOk={this.submit}\r\n                onCancel={this.close}\r\n                maskClosable={false}\r\n            >\r\n                <Form\r\n                    labelCol={{span: 4}}\r\n                    ref={this.formRef}\r\n                >\r\n                    <Form.Item\r\n                        label=\"仓库\"\r\n                        name=\"houseNumber\"\r\n                        initialValue={this.props.wareHourseHumber}\r\n                    >\r\n                        <Select\r\n                            placeholder=\"仓库\"\r\n                            disabled\r\n                        >\r\n                            {warehouseList.map((item) => {\r\n                                return(\r\n                                    <Select.Option\r\n                                        key={item.number}\r\n                                        value={item.number}\r\n                                    >\r\n                                        {item.name}\r\n                                    </Select.Option>\r\n                                );\r\n                            })}\r\n                        </Select>\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        label=\"区域名称\"\r\n                        name=\"name\"\r\n                        initialValue=\"\"\r\n                        rules={[\r\n                            {required:true,message:\"区域名称不能为空\"}\r\n                        ]}\r\n                    >\r\n                        <Input placeholder=\"区域名称\"/>\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        label=\"编号\"\r\n                        name=\"number\"\r\n                        initialValue=\"\"\r\n                        rules={[\r\n                            {required:true,message:\"编号不能为空\"}\r\n                        ]}\r\n                    >\r\n                        <Input placeholder=\"编号\"/>\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        label=\"备注\"\r\n                        name=\"remark\"\r\n                        initialValue=\"\"\r\n                    >\r\n                        <Input.TextArea placeholder=\"100个字以内\" maxLength={100}/>\r\n                    </Form.Item>\r\n                </Form>\r\n            </Modal>\r\n        );\r\n    };\r\n};\r\nexport default Edit;"]},"metadata":{},"sourceType":"module"}