{"ast":null,"code":"import \"antd/es/space/style\";\nimport _Space from \"antd/es/space\";\nimport \"antd/es/select/style\";\nimport _Select from \"antd/es/select\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\inventory\\\\goods\\\\List.js\";\nimport React, { Component } from \"react\";\nimport Button from \"@/components/button\";\nimport Table from \"@/components/table\";\nimport Detail from \"./components/Detail\";\nimport Edit from \"./components/Edit\";\n\nvar List = /*#__PURE__*/function (_Component) {\n  _inherits(List, _Component);\n\n  function List(props) {\n    var _this;\n\n    _classCallCheck(this, List);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(List).call(this, props));\n    _this.tableRef = null;\n\n    _this.getUnitList = function () {\n      React.axios.post('api/wmsType/tmaterialtype/queryMaterialTypeList?number=unit', null, function (res) {\n        var obj = {};\n        res.data.forEach(function (item) {\n          obj[item.id] = item.name;\n        });\n\n        _this.setState({\n          units: obj\n        });\n      });\n    };\n\n    _this.getGoodsTypeList = function () {\n      React.axios.post(\"api/wmsType/tmaterialtype/queryMaterialTypeList?number=\" + React.enums.goodTypeCode, null, function (res) {\n        _this.setState({\n          goodsTypeList: res.data\n        });\n      });\n    };\n\n    _this.tableReload = function () {\n      var params = _this.state.params;\n\n      _this.tableRef.reload(params);\n    };\n\n    _this.submit = function (values) {\n      _this.setState({\n        params: values\n      });\n\n      _this.tableReload();\n    };\n\n    _this.formRef = React.createRef();\n\n    _this.reset = function () {\n      _this.formRef.current.resetFields();\n\n      new Promise(function (resolve) {\n        _this.setState({\n          params: {\n            name: \"\"\n          }\n        });\n\n        resolve();\n      }).then(function () {\n        _this.tableReload();\n      });\n    };\n\n    _this.openDetail = function (detailId) {\n      _this.setState({\n        detailVisible: true,\n        detailId: detailId\n      });\n    };\n\n    _this.closeDetail = function () {\n      _this.setState({\n        detailVisible: false,\n        detailUserId: \"\"\n      });\n    };\n\n    _this.openEdit = function (editId) {\n      _this.setState({\n        editId: editId,\n        editVisible: true\n      });\n    };\n\n    _this.closeEdit = function () {\n      _this.setState({\n        editVisible: false\n      });\n    };\n\n    _this.delete = function (id) {\n      React.message.confirm(\"您确定想要删除此条数据？\", function () {\n        React.axios.post(\"api/wms/twarehousegoods/delete\", [id], function (res) {\n          _this.tableReload();\n        });\n      });\n    };\n\n    _this.state = {\n      goodsTypeList: [],\n      editId: \"\",\n      editVisible: false,\n      detailId: \"\",\n      detailVisible: false,\n      params: {\n        name: \"\"\n      },\n      units: {}\n    };\n    return _this;\n  }\n\n  _createClass(List, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getGoodsTypeList();\n      this.getUnitList();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          goodsTypeList = _this$state.goodsTypeList,\n          editId = _this$state.editId,\n          editVisible = _this$state.editVisible,\n          detailId = _this$state.detailId,\n          detailVisible = _this$state.detailVisible;\n      var tableColumns = [{\n        title: \"物料名称\",\n        key: \"name\",\n        dataIndex: \"name\"\n      }, {\n        title: \"编号\",\n        key: \"number\",\n        dataIndex: \"number\"\n      }, {\n        title: \"物料种类\",\n        key: \"gname\",\n        dataIndex: \"gname\"\n      }, {\n        title: \"品牌\",\n        key: \"brand\",\n        dataIndex: \"brand\"\n      }, {\n        title: \"单价\",\n        key: \"price\",\n        dataIndex: \"price\",\n        render: function render(text, record) {\n          return \"\".concat(record.price, \"\\u5143/\").concat(_this2.state.units[record.unit]);\n        }\n      }, {\n        title: \"备注\",\n        key: \"remark\",\n        dataIndex: \"remark\"\n      }, {\n        title: \"操作\",\n        width: \"200px\",\n        align: 'center',\n        render: function render(text, record) {\n          return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n            type: \"link\",\n            size: \"small\",\n            onClick: _this2.openDetail.bind(_this2, record.id),\n            authcode: \"inventory:goods:info\",\n            icon: \"info\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 29\n            }\n          }, \"\\u8BE6\\u60C5\"), /*#__PURE__*/React.createElement(Button, {\n            type: \"link\",\n            size: \"small\",\n            onClick: _this2.openEdit.bind(_this2, record.id),\n            authcode: \"inventory:goods:update\",\n            icon: \"edit\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 29\n            }\n          }, \"\\u4FEE\\u6539\"), /*#__PURE__*/React.createElement(Button, {\n            type: \"link\",\n            size: \"small\",\n            danger: true,\n            onClick: _this2.delete.bind(_this2, record.id),\n            authcode: \"inventory:goods:delete\",\n            icon: \"delete\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 29\n            }\n          }, \"\\u5220\\u9664\"));\n        }\n      }];\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(_Space, {\n        direction: \"vertical\",\n        style: {\n          width: \"100%\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_Form, {\n        ref: this.formRef,\n        layout: \"inline\",\n        onFinish: this.submit,\n        onReset: this.reset,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        name: \"name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        placeholder: \"\\u7269\\u6599\\u540D\\u79F0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        name: \"number\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        placeholder: \"\\u7269\\u6599\\u7F16\\u53F7\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        name: \"gtype\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Select, {\n        placeholder: \"\\u7269\\u6599\\u79CD\\u7C7B\",\n        style: {\n          width: '174px'\n        },\n        allowClear: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 29\n        }\n      }, goodsTypeList.map(function (res) {\n        return /*#__PURE__*/React.createElement(_Select.Option, {\n          key: res.id,\n          value: res.id,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 57\n          }\n        }, res.name);\n      }))), /*#__PURE__*/React.createElement(_Form.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        icon: \"search\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 29\n        }\n      }, \"\\u641C\\u7D22\")), /*#__PURE__*/React.createElement(_Form.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        htmlType: \"reset\",\n        icon: \"chongzhi\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 29\n        }\n      }, \"\\u91CD\\u7F6E\")), /*#__PURE__*/React.createElement(_Form.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        type: \"primary\",\n        onClick: this.openEdit.bind(this, \"\"),\n        authcode: \"inventory:goods:save\",\n        icon: \"add\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 29\n        }\n      }, \"\\u65B0\\u589E\"))), /*#__PURE__*/React.createElement(Table, {\n        rowKey: \"id\",\n        onRef: function onRef(ref) {\n          return _this2.tableRef = ref;\n        },\n        columns: tableColumns,\n        method: \"get\",\n        url: \"api/wms/twarehousegoods/list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }\n      }), editVisible && /*#__PURE__*/React.createElement(Edit, {\n        id: editId,\n        close: this.closeEdit,\n        tableReload: this.tableReload,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 37\n        }\n      }), detailVisible && /*#__PURE__*/React.createElement(Detail, {\n        id: detailId,\n        close: this.closeDetail,\n        tableReload: this.tableReload,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 39\n        }\n      })));\n    }\n  }]);\n\n  return List;\n}(Component);\n\n;\nexport default List;","map":{"version":3,"sources":["E:/project/environment-web/src/pages/inventory/goods/List.js"],"names":["React","Component","Button","Table","Detail","Edit","List","props","tableRef","getUnitList","axios","post","res","obj","data","forEach","item","id","name","setState","units","getGoodsTypeList","enums","goodTypeCode","goodsTypeList","tableReload","params","state","reload","submit","values","formRef","createRef","reset","current","resetFields","Promise","resolve","then","openDetail","detailId","detailVisible","closeDetail","detailUserId","openEdit","editId","editVisible","closeEdit","delete","message","confirm","tableColumns","title","key","dataIndex","render","text","record","price","unit","width","align","bind","map","ref"],"mappings":"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","sourcesContent":["import React,{Component} from \"react\";\r\nimport {Space, Form, Input, Select} from \"antd\";\r\nimport Button from \"@/components/button\";\r\nimport Table from \"@/components/table\";\r\n\r\nimport Detail from \"./components/Detail\";\r\nimport Edit from \"./components/Edit\";\r\n\r\nclass List extends Component{\r\n    tableRef=null;\r\n    constructor(props){\r\n        super(props);\r\n        this.state= {\r\n            goodsTypeList:[],\r\n            editId:\"\",\r\n            editVisible:false,\r\n            detailId:\"\",\r\n            detailVisible:false,\r\n            params:{name:\"\"},\r\n            units: {}\r\n        };\r\n    };\r\n\r\n    componentDidMount(){\r\n        this.getGoodsTypeList();\r\n        this.getUnitList();\r\n    };\r\n\r\n    // 获取计量单位\r\n    getUnitList=()=>{\r\n        React.axios.post('api/wmsType/tmaterialtype/queryMaterialTypeList?number=unit',null,res=>{\r\n            let obj = {};\r\n            res.data.forEach(item=>{\r\n                obj[item.id] = item.name;\r\n            })\r\n            this.setState({units: obj});\r\n        })\r\n    }\r\n\r\n    /**\r\n     * @todo 获取物料种类列表\r\n     */\r\n    getGoodsTypeList=()=>{\r\n        React.axios.post(\"api/wmsType/tmaterialtype/queryMaterialTypeList?number=\"+React.enums.goodTypeCode,null,res=>{\r\n            this.setState({goodsTypeList: res.data});\r\n        });\r\n    };\r\n\r\n    /**\r\n     * @todo 搜索与刷新\r\n     */\r\n    tableReload = () => {\r\n        const {params} = this.state;\r\n        this.tableRef.reload(params);\r\n    };\r\n\r\n    /**\r\n     * @todo 搜索\r\n     */\r\n    submit = (values) => {\r\n        this.setState({params:values});\r\n        this.tableReload();\r\n    };\r\n\r\n    formRef = React.createRef();\r\n    /**\r\n     * @todo 重置搜索\r\n     */\r\n    reset = () => {\r\n        this.formRef.current.resetFields();\r\n        new Promise((resolve) => {\r\n            this.setState({params:{name:\"\"}});\r\n            resolve();\r\n        }).then(() => {\r\n            this.tableReload();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * @todo 打开详情\r\n     * @param {string} detailUserId\r\n     */\r\n    openDetail = (detailId) => {\r\n        this.setState({detailVisible:true,detailId});\r\n    };\r\n    /**\r\n     * @todo 关闭详情\r\n     */\r\n    closeDetail = () => {\r\n        this.setState({detailVisible:false,detailUserId:\"\"});\r\n    };\r\n\r\n    /**\r\n     * @todo 打开编辑模态框\r\n     */\r\n    openEdit = (editId) => {\r\n        this.setState({editId,editVisible:true});\r\n    };\r\n    /**\r\n     * @todo 关闭编辑模态框\r\n     */\r\n    closeEdit = () => {\r\n        this.setState({editVisible:false});\r\n    };\r\n\r\n    /**\r\n     * @todo 删除用户\r\n     * @param {string} userId\r\n     */\r\n    delete = (id) => {\r\n        React.message.confirm(\r\n            \"您确定想要删除此条数据？\",\r\n            () => {\r\n                React.axios.post(\"api/wms/twarehousegoods/delete\",[id],res => {\r\n                    this.tableReload();\r\n                });\r\n            }\r\n        );\r\n    };\r\n\r\n    render(){\r\n        const {goodsTypeList,editId,editVisible,detailId,detailVisible} = this.state;\r\n\r\n        const tableColumns = [\r\n            {\r\n                title:\"物料名称\",\r\n                key:\"name\",\r\n                dataIndex:\"name\",\r\n            },\r\n            {\r\n                title:\"编号\",\r\n                key:\"number\",\r\n                dataIndex:\"number\",\r\n            },\r\n            {\r\n                title:\"物料种类\",\r\n                key:\"gname\",\r\n                dataIndex:\"gname\",\r\n            },\r\n            {\r\n                title:\"品牌\",\r\n                key:\"brand\",\r\n                dataIndex:\"brand\",\r\n            },\r\n            {\r\n                title:\"单价\",\r\n                key:\"price\",\r\n                dataIndex:\"price\",\r\n                render:(text,record) => {\r\n                    return `${record.price}元/${this.state.units[record.unit]}`;\r\n                },\r\n            },\r\n            {\r\n                title:\"备注\",\r\n                key:\"remark\",\r\n                dataIndex:\"remark\",\r\n            },\r\n            {\r\n                title:\"操作\",\r\n                width:\"200px\",\r\n                align: 'center',\r\n                render:(text,record) => {\r\n                    return(\r\n                        <>\r\n                            <Button type=\"link\" size=\"small\"onClick={this.openDetail.bind(this,record.id)} authcode=\"inventory:goods:info\" icon=\"info\">详情</Button>\r\n                            <Button type=\"link\" size=\"small\" onClick={this.openEdit.bind(this,record.id)} authcode=\"inventory:goods:update\" icon=\"edit\">修改</Button>\r\n                            <Button type=\"link\" size=\"small\" danger onClick={this.delete.bind(this,record.id)} authcode=\"inventory:goods:delete\" icon=\"delete\">删除</Button>\r\n                        </>\r\n                    );\r\n                },\r\n            },\r\n        ];\r\n\r\n        return(\r\n            <>\r\n                <Space\r\n                    direction=\"vertical\"\r\n                    style={{width:\"100%\"}}\r\n                >\r\n                    <Form\r\n                        ref={this.formRef}\r\n                        layout=\"inline\"\r\n                        onFinish={this.submit}\r\n                        onReset={this.reset}\r\n                    >\r\n                        <Form.Item name=\"name\">\r\n                            <Input placeholder=\"物料名称\"/>\r\n                        </Form.Item>\r\n                        <Form.Item name=\"number\">\r\n                            <Input placeholder=\"物料编号\"/>\r\n                        </Form.Item>\r\n                        <Form.Item name=\"gtype\">\r\n                            <Select placeholder=\"物料种类\" style={{width: '174px'}} allowClear>\r\n                                {goodsTypeList.map(res=><Select.Option key={res.id} value={res.id}>{res.name}</Select.Option>)}\r\n                            </Select>\r\n                        </Form.Item>\r\n                        <Form.Item>\r\n                            <Button type=\"primary\" htmlType=\"submit\" icon=\"search\">搜索</Button>\r\n                        </Form.Item>\r\n                        <Form.Item>\r\n                            <Button htmlType=\"reset\" icon=\"chongzhi\">重置</Button>\r\n                        </Form.Item>\r\n                        <Form.Item>\r\n                            <Button type=\"primary\" onClick={this.openEdit.bind(this,\"\")} authcode=\"inventory:goods:save\" icon=\"add\">新增</Button>\r\n                        </Form.Item>\r\n                    </Form>\r\n                    <Table\r\n                        rowKey=\"id\"\r\n                        onRef={ref=>this.tableRef = ref}\r\n                        columns={tableColumns}\r\n                        method=\"get\"\r\n                        url=\"api/wms/twarehousegoods/list\"\r\n                    />\r\n                    {editVisible && <Edit id={editId} close={this.closeEdit} tableReload={this.tableReload}/>}\r\n                    {detailVisible && <Detail id={detailId} close={this.closeDetail} tableReload={this.tableReload}/>}\r\n                </Space>\r\n            </>\r\n        );\r\n    };\r\n};\r\nexport default List;"]},"metadata":{},"sourceType":"module"}