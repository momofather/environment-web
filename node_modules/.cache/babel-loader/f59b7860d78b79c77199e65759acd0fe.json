{"ast":null,"code":"import \"antd/es/date-picker/style\";\nimport _DatePicker from \"antd/es/date-picker\";\nimport _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\bigScreen\\\\Page2.js\";\nimport React from 'react';\nimport ReactEcharts from 'echarts-for-react';\nimport moment from 'moment';\nimport './page2.less';\n\nvar History = /*#__PURE__*/function (_React$Component) {\n  _inherits(History, _React$Component);\n\n  function History(props) {\n    var _this;\n\n    _classCallCheck(this, History);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(History).call(this, props));\n    _this.refInFlow = null;\n    _this.refOutFlow = null;\n    _this.refGuFengJi = null;\n\n    _this.getInData = function (date) {\n      React.axios.get('api/month/plcmonth/queryList', {\n        startTime: moment(date).format('yyyy-MM-DD'),\n        endTime: moment(date).format('yyyy-MM-DD')\n      }, function (res) {\n        var option = _this.state.options;\n        option.series.data = [];\n        option.series.label.formatter = '{b}\\n{d}%';\n\n        if (res.data.length !== 0) {\n          option.series.data = [{\n            value: res.data[0].inFlow,\n            name: '达标'\n          }, {\n            value: _this.state.total - res.data[0].inFlow,\n            name: '未达标'\n          }];\n        }\n\n        if (_this.refInFlow) {\n          _this.refInFlow.getEchartsInstance().setOption(option);\n        }\n      });\n    };\n\n    _this.getOutData = function (date) {\n      React.axios.get('api/month/plcmonth/queryList', {\n        startTime: moment(date).format('yyyy-MM-DD'),\n        endTime: moment(date).format('yyyy-MM-DD')\n      }, function (res) {\n        var option = _this.state.options;\n        option.series.data = [];\n        option.series.label.formatter = '{b}\\n{d}%';\n\n        if (res.data.length !== 0) {\n          option.series.data = [{\n            value: res.data[0].outFlow,\n            name: '达标'\n          }, {\n            value: _this.state.total - res.data[0].outFlow,\n            name: '未达标'\n          }];\n        }\n\n        if (_this.refOutFlow) {\n          _this.refOutFlow.getEchartsInstance().setOption(option);\n        }\n      });\n    };\n\n    _this.getGuFengJiStatus = function () {\n      var array = ['MCP.MCP1.MF1_Runing', 'MCP.MCP1.MF2_Runing', 'MCP.MCP1.MF3_Runing', 'MCP.MCP1.MF4_Runing', 'MCP.MCP1.MF5_Runing', 'MCP.MCP2.MF1_Runing', 'MCP.MCP2.MF2_Runing', 'MCP.MCP2.MF3_Runing'];\n      React.axios.post('api/opcServer/getOpcServer6Data', array, function (res) {\n        console.log(res.data);\n        var option = _this.state.options;\n        option.series.data = [];\n        option.series.label.formatter = '{b}{c}';\n        var runCount = 0;\n\n        for (var k in res.data) {\n          if (res.data[k] === 'true') {\n            runCount++;\n          }\n        }\n\n        option.series.data = [{\n          value: array.length - runCount,\n          name: '未运行'\n        }, {\n          value: runCount,\n          name: '运行中'\n        }];\n\n        if (_this.refGuFengJi) {\n          _this.refGuFengJi.getEchartsInstance().setOption(option);\n        }\n      });\n    };\n\n    _this.state = {\n      total: 120000,\n      options: {\n        tooltip: {\n          trigger: 'item'\n        },\n        series: {\n          type: 'pie',\n          radius: '70%',\n          label: {\n            show: true\n          },\n          data: []\n        }\n      }\n    };\n    return _this;\n  }\n\n  _createClass(History, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getInData(new Date().getTime() - 1000 * 60 * 60 * 24);\n      this.getOutData(new Date().getTime() - 1000 * 60 * 60 * 24);\n      this.getGuFengJiStatus();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"row3-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }\n      }, \"\\u8FDB\\u6C34\\u6D41\\u91CF\\u8D1F\\u8377\\u7387 \", /*#__PURE__*/React.createElement(_DatePicker, {\n        defaultValue: moment(new Date().getTime() - 1000 * 60 * 60 * 24),\n        onChange: this.getInData,\n        size: \"small\",\n        className: \"date-picker\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 52\n        }\n      })), /*#__PURE__*/React.createElement(ReactEcharts, {\n        ref: function ref(e) {\n          _this2.refInFlow = e;\n        },\n        option: this.state.options,\n        style: {\n          height: '300px',\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"row3-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }\n      }, \"\\u9F13\\u98CE\\u673A\\u8FD0\\u884C\\u60C5\\u51B5\"), /*#__PURE__*/React.createElement(ReactEcharts, {\n        ref: function ref(e) {\n          _this2.refGuFengJi = e;\n        },\n        option: this.state.options,\n        style: {\n          height: '300px',\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"row3-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"row3-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }\n      }, \"\\u51FA\\u6C34\\u6D41\\u91CF\\u8D1F\\u8377\\u7387 \", /*#__PURE__*/React.createElement(_DatePicker, {\n        defaultValue: moment(new Date().getTime() - 1000 * 60 * 60 * 24),\n        onChange: this.getOutData,\n        size: \"small\",\n        className: \"date-picker\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 52\n        }\n      })), /*#__PURE__*/React.createElement(ReactEcharts, {\n        ref: function ref(e) {\n          _this2.refOutFlow = e;\n        },\n        option: this.state.options,\n        style: {\n          height: '300px',\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"row3-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"row3-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 17\n        }\n      })));\n    }\n  }]);\n\n  return History;\n}(React.Component);\n\nexport default History;","map":{"version":3,"sources":["E:/project/environment-web/src/pages/bigScreen/Page2.js"],"names":["React","ReactEcharts","moment","History","props","refInFlow","refOutFlow","refGuFengJi","getInData","date","axios","get","startTime","format","endTime","res","option","state","options","series","data","label","formatter","length","value","inFlow","name","total","getEchartsInstance","setOption","getOutData","outFlow","getGuFengJiStatus","array","post","console","log","runCount","k","tooltip","trigger","type","radius","show","Date","getTime","e","height","width","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport ReactEcharts from 'echarts-for-react';\r\nimport { DatePicker } from 'antd';\r\nimport moment from 'moment';\r\nimport './page2.less';\r\nclass History extends React.Component {\r\n    refInFlow = null;\r\n    refOutFlow = null;\r\n    refGuFengJi = null;\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            total: 120000,\r\n            options: {\r\n                tooltip: {\r\n                    trigger: 'item'\r\n                },\r\n                series: {\r\n                    type: 'pie',\r\n                    radius: '70%',\r\n                    label: {\r\n                        show: true,\r\n                    },\r\n                    data: []\r\n                }\r\n            },\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        this.getInData(new Date().getTime() - 1000 * 60 * 60 * 24);\r\n        this.getOutData(new Date().getTime() - 1000 * 60 * 60 * 24);\r\n        this.getGuFengJiStatus();\r\n    }\r\n    getInData = (date)=>{\r\n        React.axios.get('api/month/plcmonth/queryList', { startTime: moment(date).format('yyyy-MM-DD'), endTime: moment(date).format('yyyy-MM-DD')}, res=>{\r\n            let option = this.state.options;\r\n            option.series.data = [];\r\n            option.series.label.formatter = '{b}\\n{d}%';\r\n            if (res.data.length !== 0){\r\n                option.series.data = [\r\n                    { value: res.data[0].inFlow, name: '达标' },\r\n                    { value: this.state.total - res.data[0].inFlow, name: '未达标' }\r\n                ];\r\n            }\r\n            if (this.refInFlow){\r\n                this.refInFlow.getEchartsInstance().setOption(option);\r\n            }\r\n        })\r\n    }\r\n    getOutData = (date) => {\r\n        React.axios.get('api/month/plcmonth/queryList', { startTime: moment(date).format('yyyy-MM-DD'), endTime: moment(date).format('yyyy-MM-DD') }, res => {\r\n            let option = this.state.options;\r\n            option.series.data = [];\r\n            option.series.label.formatter = '{b}\\n{d}%';\r\n            if (res.data.length !== 0) {\r\n                option.series.data = [\r\n                    { value: res.data[0].outFlow, name: '达标' },\r\n                    { value: this.state.total - res.data[0].outFlow, name: '未达标' }\r\n                ];\r\n            }\r\n            if (this.refOutFlow){\r\n                this.refOutFlow.getEchartsInstance().setOption(option);\r\n            }\r\n        })\r\n    }\r\n    getGuFengJiStatus = ()=>{\r\n        let array = [\r\n            'MCP.MCP1.MF1_Runing',\r\n            'MCP.MCP1.MF2_Runing',\r\n            'MCP.MCP1.MF3_Runing',\r\n            'MCP.MCP1.MF4_Runing',\r\n            'MCP.MCP1.MF5_Runing',\r\n            'MCP.MCP2.MF1_Runing',\r\n            'MCP.MCP2.MF2_Runing',\r\n            'MCP.MCP2.MF3_Runing',\r\n        ];\r\n        React.axios.post('api/opcServer/getOpcServer6Data', array, res => {\r\n            console.log(res.data)\r\n            let option = this.state.options;\r\n            option.series.data = [];\r\n            option.series.label.formatter = '{b}{c}';\r\n            let runCount = 0;\r\n            for (let k in res.data){\r\n                if (res.data[k] === 'true'){\r\n                    runCount++;\r\n                }\r\n            }\r\n            option.series.data = [\r\n                { value: array.length - runCount, name: '未运行' },\r\n                { value: runCount, name: '运行中' },\r\n            ];\r\n            \r\n            if (this.refGuFengJi){\r\n                this.refGuFengJi.getEchartsInstance().setOption(option);\r\n            }\r\n        })\r\n    }\r\n    render(){\r\n        return <>\r\n            <ul className=\"row\">\r\n                <li className=\"row3-left\">\r\n                    <div className=\"title\">进水流量负荷率 <DatePicker defaultValue={moment(new Date().getTime() - 1000 * 60 * 60 * 24)} onChange={this.getInData} size=\"small\" className=\"date-picker\"/></div>\r\n                    <ReactEcharts ref={(e) => { this.refInFlow = e; }} option={this.state.options} style={{ height: '300px', width: '100%' }} />\r\n                </li>\r\n                <li className=\"row3-center\">\r\n                    <div className=\"title\">鼓风机运行情况</div>\r\n                    <ReactEcharts ref={(e) => { this.refGuFengJi = e; }} option={this.state.options} style={{ height: '300px', width: '100%' }} />\r\n                </li>\r\n                <li className=\"row3-right\"></li>\r\n            </ul>\r\n            <ul className=\"row\">\r\n                <li className=\"row3-left\">\r\n                    <div className=\"title\">出水流量负荷率 <DatePicker defaultValue={moment(new Date().getTime() - 1000 * 60 * 60 * 24)} onChange={this.getOutData} size=\"small\" className=\"date-picker\" /></div>\r\n                    <ReactEcharts ref={(e) => { this.refOutFlow = e; }} option={this.state.options} style={{ height: '300px', width: '100%' }} />\r\n                </li>\r\n                <li className=\"row3-center\"></li>\r\n                <li className=\"row3-right\"></li>\r\n            </ul>\r\n        </>\r\n    }\r\n}\r\nexport default History;"]},"metadata":{},"sourceType":"module"}