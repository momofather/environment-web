{"ast":null,"code":"import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/select/style\";\nimport _Select from \"antd/es/select\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\inventory\\\\warehouse\\\\components\\\\Edit.js\";\nimport React, { Component } from \"react\";\n\nvar Edit = /*#__PURE__*/function (_Component) {\n  _inherits(Edit, _Component);\n\n  function Edit(props) {\n    var _this;\n\n    _classCallCheck(this, Edit);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Edit).call(this, props));\n    _this.formRef = React.createRef();\n\n    _this.submit = function () {\n      _this.formRef.current.validateFields().then(function (values, errors) {\n        if (!errors) {\n          if (_this.props.id) {\n            values.id = _this.props.id;\n\n            if (_this.state.username) {\n              values.username = _this.state.username;\n            }\n\n            ;\n            React.axios.post(\"/api/wms/twarehouse/update\", values, function (res) {\n              _this.close();\n\n              _this.props.tableReload();\n            });\n          } else {\n            if (_this.state.username) {\n              values.username = _this.state.username;\n            }\n\n            ;\n            React.axios.post(\"/api/wms/twarehouse/save\", values, function (res) {\n              _this.close();\n\n              _this.props.tableReload();\n            });\n          }\n\n          ;\n        }\n\n        ;\n      });\n    };\n\n    _this.close = function () {\n      var close = _this.props.close;\n      close();\n    };\n\n    _this.selectUser = function (e, z) {\n      _this.setState({\n        username: z.children\n      });\n    };\n\n    _this.state = {\n      userList: [],\n      username: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Edit, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var id = this.props.id;\n      React.axios.get(\"sys/user/list/\", \"\", function (res) {\n        _this2.setState({\n          userList: res.data.data\n        });\n      });\n\n      if (id) {\n        React.axios.get(\"api/wms/twarehouse/info/\" + id, \"\", function (res) {\n          _this2.formRef.current.setFieldsValue(res.data);\n        });\n      }\n\n      ;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var id = this.props.id;\n      var userList = this.state.userList;\n      var formLayout = {\n        labelCol: {\n          xs: {\n            span: 24\n          },\n          sm: {\n            span: 24\n          },\n          md: {\n            span: 10\n          },\n          lg: {\n            span: 8\n          },\n          xl: {\n            span: 4\n          }\n        },\n        wrapperCol: {\n          xs: {\n            span: 24\n          },\n          sm: {\n            span: 24\n          },\n          md: {\n            span: 14\n          },\n          lg: {\n            span: 18\n          },\n          xl: {\n            span: 20\n          }\n        }\n      };\n      return /*#__PURE__*/React.createElement(_Modal, {\n        title: id ? \"修改仓库信息\" : \"添加仓库\",\n        visible: true,\n        onOk: this.submit,\n        onCancel: this.close,\n        maskClosable: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(_Form, Object.assign({}, formLayout, {\n        ref: this.formRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u4ED3\\u5E93\\u540D\\u79F0\",\n        name: \"name\",\n        initialValue: \"\",\n        rules: [{\n          required: true,\n          message: \"仓库名称不能为空\"\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        placeholder: \"\\u4ED3\\u5E93\\u540D\\u79F0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u4ED3\\u5E93\\u7F16\\u53F7\",\n        name: \"number\",\n        initialValue: \"\",\n        rules: [{\n          required: true,\n          message: \"编号不能为空\"\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        placeholder: \"\\u4ED3\\u5E93\\u7F16\\u53F7\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u4ED3\\u5E93\\u5730\\u5740\",\n        name: \"address\",\n        initialValue: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        placeholder: \"\\u4ED3\\u5E93\\u5730\\u5740\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u7BA1\\u7406\\u5458\",\n        name: \"userno\",\n        initialValue: [],\n        rules: [{\n          required: true,\n          message: \"管理员不能为空\"\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Select, {\n        placeholder: \"\\u7BA1\\u7406\\u5458\",\n        onChange: this.selectUser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 25\n        }\n      }, userList.map(function (item) {\n        return /*#__PURE__*/React.createElement(_Select.Option, {\n          key: item.userId.toString(),\n          value: item.userId.toString(),\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 33\n          }\n        }, item.name);\n      }))), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u5907\\u6CE8\",\n        name: \"remark\",\n        initialValue: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input.TextArea, {\n        placeholder: \"100\\u4E2A\\u5B57\\u4EE5\\u5185\",\n        maxLength: 100,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 25\n        }\n      }))));\n    }\n  }]);\n\n  return Edit;\n}(Component);\n\n;\nexport default Edit;","map":{"version":3,"sources":["E:/project/environment-web/src/pages/inventory/warehouse/components/Edit.js"],"names":["React","Component","Edit","props","formRef","createRef","submit","current","validateFields","then","values","errors","id","state","username","axios","post","res","close","tableReload","selectUser","e","z","setState","children","userList","get","data","setFieldsValue","formLayout","labelCol","xs","span","sm","md","lg","xl","wrapperCol","required","message","map","item","userId","toString","name"],"mappings":"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","sourcesContent":["import React,{Component} from \"react\";\r\nimport {Modal,Form,Input,Select} from \"antd\";\r\n\r\nclass Edit extends Component{\r\n    formRef = React.createRef();\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            userList:[],\r\n            username:\"\",\r\n        };\r\n    };\r\n\r\n    componentDidMount(){\r\n        const {id} = this.props;\r\n        React.axios.get(\"sys/user/list/\",\"\",res => {\r\n            this.setState({userList:res.data.data});\r\n        });\r\n        if(id){\r\n            React.axios.get(\"api/wms/twarehouse/info/\"+id,\"\",res => {\r\n                this.formRef.current.setFieldsValue(res.data);\r\n            });\r\n        };\r\n    };\r\n\r\n    /**\r\n     * @todo 提交表单\r\n     */\r\n    submit = () => {\r\n        this.formRef.current.validateFields().then((values,errors) => {\r\n            if(!errors){\r\n                if(this.props.id){\r\n                    values.id = this.props.id;\r\n                    if(this.state.username){\r\n                        values.username = this.state.username;\r\n                    };\r\n                    React.axios.post(\"/api/wms/twarehouse/update\",values,res => {\r\n                        this.close();\r\n                        this.props.tableReload();\r\n                    });\r\n                }else{\r\n                    if(this.state.username){\r\n                        values.username = this.state.username;\r\n                    };\r\n                    React.axios.post(\"/api/wms/twarehouse/save\",values,res => {\r\n                        this.close();\r\n                        this.props.tableReload();\r\n                    });\r\n                };\r\n            };\r\n        });\r\n    };\r\n\r\n    /**\r\n     * @todo 关闭组件\r\n     */\r\n    close = () => {\r\n        const {close} = this.props;\r\n        close();\r\n    };\r\n\r\n    /**\r\n     * @todo 选择管理员\r\n     */\r\n    selectUser = (e,z) => {\r\n        this.setState({username:z.children});\r\n    };\r\n\r\n    render(){\r\n        const {id} = this.props;\r\n        const {userList} = this.state;\r\n\r\n        const formLayout={\r\n            labelCol:{\r\n                xs:{span:24},\r\n                sm:{span:24},\r\n                md:{span:10},\r\n                lg:{span:8},\r\n                xl:{span:4},\r\n            },\r\n            wrapperCol:{\r\n                xs:{span:24},\r\n                sm:{span:24},\r\n                md:{span:14},\r\n                lg:{span:18},\r\n                xl:{span:20},\r\n            }\r\n        };\r\n\r\n        return(\r\n            <Modal\r\n                title={id ? (\"修改仓库信息\") : (\"添加仓库\")}\r\n                visible={true}\r\n                onOk={this.submit}\r\n                onCancel={this.close}\r\n                maskClosable={false}\r\n            >\r\n                <Form\r\n                    {...formLayout}\r\n                    ref={this.formRef}\r\n                >\r\n                    <Form.Item\r\n                        label=\"仓库名称\"\r\n                        name=\"name\"\r\n                        initialValue=\"\"\r\n                        rules={[\r\n                            {required:true,message:\"仓库名称不能为空\"}\r\n                        ]}\r\n                    >\r\n                        <Input placeholder=\"仓库名称\"/>\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        label=\"仓库编号\"\r\n                        name=\"number\"\r\n                        initialValue=\"\"\r\n                        rules={[\r\n                            {required:true,message:\"编号不能为空\"}\r\n                        ]}\r\n                    >\r\n                        <Input placeholder=\"仓库编号\"/>\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        label=\"仓库地址\"\r\n                        name=\"address\"\r\n                        initialValue=\"\"\r\n                    >\r\n                        <Input placeholder=\"仓库地址\"/>\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        label=\"管理员\"\r\n                        name=\"userno\"\r\n                        initialValue={[]}\r\n                        rules={[\r\n                            {required:true,message:\"管理员不能为空\"}\r\n                        ]}\r\n                    >\r\n                        <Select\r\n                            placeholder='管理员'\r\n                            onChange={this.selectUser}\r\n                        >\r\n                            {userList.map((item) =>\r\n                                <Select.Option\r\n                                    key={item.userId.toString()}\r\n                                    value={item.userId.toString()}\r\n                                >\r\n                                    {item.name}\r\n                                </Select.Option>\r\n                            )}\r\n                        </Select>\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        label=\"备注\"\r\n                        name=\"remark\"\r\n                        initialValue=\"\"\r\n                    >\r\n                        <Input.TextArea placeholder=\"100个字以内\" maxLength={100}/>\r\n                    </Form.Item>\r\n                </Form>\r\n            </Modal>\r\n        );\r\n    };\r\n};\r\nexport default Edit;"]},"metadata":{},"sourceType":"module"}