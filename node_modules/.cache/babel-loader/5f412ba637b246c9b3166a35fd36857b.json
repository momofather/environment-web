{"ast":null,"code":"import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/tabs/style\";\nimport _Tabs from \"antd/es/tabs\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/date-picker/style\";\nimport _DatePicker from \"antd/es/date-picker\";\nimport _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\runRecord\\\\water\\\\Info.js\";\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport Button from '@/components/button';\nimport ReactEcharts from 'echarts-for-react';\n\nvar Index = /*#__PURE__*/function (_Component) {\n  _inherits(Index, _Component);\n\n  function Index(props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Index).call(this, props));\n    _this.codRef = null;\n    _this.nh3nRef = null;\n    _this.tnRef = null;\n    _this.tpRef = null;\n    _this.phRef = null;\n    _this.flowRef = null;\n\n    _this.onChange = function (activeKey) {\n      var xAxisData = [],\n          inCodData = [],\n          outCodData = [],\n          inNh3N = [],\n          outNh3N = [],\n          inTn = [],\n          outTn = [],\n          inTp = [],\n          outTp = [],\n          inPh = [],\n          outPh = [],\n          inFlow = [],\n          outFlow = [];\n\n      _this.state.data.forEach(function (item) {\n        xAxisData.push(item.gainTime);\n        inCodData.push(item.inCod);\n        outCodData.push(item.outCod);\n        inNh3N.push(item.inNh3N);\n        outNh3N.push(item.outNh3N);\n        inTn.push(item.inTn);\n        outTn.push(item.outTn);\n        inTp.push(item.inTp);\n        outTp.push(item.outTp);\n        inPh.push(item.inPh);\n        outPh.push(item.outPh);\n        inFlow.push(item.inFlow);\n        outFlow.push(item.outFlow);\n      });\n\n      var options = _this.state.options;\n      options.xAxis.data = xAxisData;\n\n      _this.setState({\n        activeKey: activeKey\n      }, function () {\n        if (activeKey === '1') {\n          options.series[0].data = inCodData;\n          options.series[1].data = outCodData;\n\n          _this.codRef.getEchartsInstance().setOption(options);\n        } else if (activeKey === '2') {\n          options.series[0].data = inPh;\n          options.series[1].data = outPh;\n\n          _this.phRef.getEchartsInstance().setOption(options);\n        } else if (activeKey === '3') {\n          options.series[0].data = inNh3N;\n          options.series[1].data = outNh3N;\n\n          _this.nh3nRef.getEchartsInstance().setOption(options);\n        } else if (activeKey === '4') {\n          options.series[0].data = inTn;\n          options.series[1].data = outTn;\n\n          _this.tnRef.getEchartsInstance().setOption(options);\n        } else if (activeKey === '5') {\n          options.series[0].data = inTp;\n          options.series[1].data = outTp;\n\n          _this.tpRef.getEchartsInstance().setOption(options);\n        } else if (activeKey === '6') {\n          options.series[0].data = inFlow;\n          options.series[1].data = outFlow;\n\n          _this.flowRef.getEchartsInstance().setOption(options);\n        }\n      });\n    };\n\n    _this.getData = function (date) {\n      React.axios.get('api/inOutWater/queryList', {\n        startTime: moment(date).format('yyyy-MM-DD 00:00:00'),\n        endTime: moment(date).format('yyyy-MM-DD 23:59:59')\n      }, function (res) {\n        _this.setState({\n          data: res.data\n        }, function () {\n          _this.onChange('1');\n        });\n      });\n    };\n\n    _this.query = function (values) {\n      _this.getData(values.time);\n    };\n\n    _this.state = {\n      data: [],\n      options: {\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross'\n          }\n        },\n        legend: {\n          data: ['进水', '出水'],\n          top: 0\n        },\n        grid: {\n          bottom: 50,\n          top: 30,\n          right: 40,\n          left: 60\n        },\n        xAxis: {\n          type: 'category',\n          boundaryGap: false,\n          axisLabel: {\n            formatter: function formatter(value) {\n              return \"\".concat(moment(value).format('yyyy-MM-DD'), \"\\n\").concat(moment(value).format('HH:mm'));\n            },\n            fontSize: 10 // rotate: 40\n\n          },\n          data: []\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: [{\n          name: '进水',\n          data: [],\n          type: 'line',\n          smooth: true\n        }, {\n          name: '出水',\n          data: [],\n          type: 'line',\n          smooth: true\n        }]\n      },\n      activeKey: '1'\n    };\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getData(new Date());\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(_Modal, {\n        footer: \"\",\n        title: \"\\u6570\\u636E\\u56FE\\u8868\",\n        width: \"90%\",\n        visible: true,\n        onCancel: this.props.onCancel,\n        maskClosable: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(_Form, {\n        layout: \"inline\",\n        ref: this.formRef,\n        onFinish: this.query,\n        className: \"query-tools\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u65E5\\u671F\",\n        name: \"time\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_DatePicker, {\n        defaultValue: moment(),\n        onChange: this.getData,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        icon: \"search\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }\n      }, \"\\u67E5\\u8BE2\"))), /*#__PURE__*/React.createElement(_Tabs, {\n        type: \"card\",\n        size: \"small\",\n        activeKey: this.state.activeKey,\n        onChange: this.onChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(_Tabs.TabPane, {\n        tab: \"COD\",\n        key: \"1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(ReactEcharts, {\n        ref: function ref(e) {\n          _this2.codRef = e;\n        },\n        option: this.state.options,\n        style: {\n          height: '400px',\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(_Tabs.TabPane, {\n        tab: \"PH\",\n        key: \"2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(ReactEcharts, {\n        ref: function ref(e) {\n          _this2.phRef = e;\n        },\n        option: this.state.options,\n        style: {\n          height: '400px',\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(_Tabs.TabPane, {\n        tab: \"NH3-N\",\n        key: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(ReactEcharts, {\n        ref: function ref(e) {\n          _this2.nh3nRef = e;\n        },\n        option: this.state.options,\n        style: {\n          height: '400px',\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(_Tabs.TabPane, {\n        tab: \"TN\",\n        key: \"4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(ReactEcharts, {\n        ref: function ref(e) {\n          _this2.tnRef = e;\n        },\n        option: this.state.options,\n        style: {\n          height: '400px',\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(_Tabs.TabPane, {\n        tab: \"TP\",\n        key: \"5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(ReactEcharts, {\n        ref: function ref(e) {\n          _this2.tpRef = e;\n        },\n        option: this.state.options,\n        style: {\n          height: '400px',\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(_Tabs.TabPane, {\n        tab: \"\\u6D41\\u91CF\",\n        key: \"6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(ReactEcharts, {\n        ref: function ref(e) {\n          _this2.flowRef = e;\n        },\n        option: this.state.options,\n        style: {\n          height: '400px',\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }\n      }))));\n    }\n  }]);\n\n  return Index;\n}(Component);\n\nexport default Index;","map":{"version":3,"sources":["E:/project/environment-web/src/pages/runRecord/water/Info.js"],"names":["React","Component","moment","Button","ReactEcharts","Index","props","codRef","nh3nRef","tnRef","tpRef","phRef","flowRef","onChange","activeKey","xAxisData","inCodData","outCodData","inNh3N","outNh3N","inTn","outTn","inTp","outTp","inPh","outPh","inFlow","outFlow","state","data","forEach","item","push","gainTime","inCod","outCod","options","xAxis","setState","series","getEchartsInstance","setOption","getData","date","axios","get","startTime","format","endTime","res","query","values","time","tooltip","trigger","axisPointer","type","legend","top","grid","bottom","right","left","boundaryGap","axisLabel","formatter","value","fontSize","yAxis","name","smooth","Date","onCancel","formRef","e","height","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Form, DatePicker, Modal, Tabs} from 'antd';\r\nimport moment from 'moment';\r\nimport Button from '@/components/button';\r\nimport ReactEcharts from 'echarts-for-react';\r\nclass Index extends Component {\r\n    codRef = null; nh3nRef = null; tnRef = null; tpRef = null; phRef = null; flowRef=null;\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            data: [],\r\n            options:{\r\n                tooltip: {\r\n                    trigger: 'axis',\r\n                    axisPointer: {\r\n                        type: 'cross',\r\n                    }\r\n                },\r\n                legend: {\r\n                    data: ['进水', '出水'],\r\n                    top: 0\r\n                },\r\n                grid: {\r\n                    bottom: 50,\r\n                    top: 30,\r\n                    right: 40,\r\n                    left: 60\r\n                },\r\n                xAxis: {\r\n                    type: 'category',\r\n                    boundaryGap: false,\r\n                    axisLabel: {\r\n                        formatter: (value) => `${moment(value).format('yyyy-MM-DD')}\\n${moment(value).format('HH:mm')}`,\r\n                        fontSize: 10,\r\n                        // rotate: 40\r\n                    },\r\n                    data: [],\r\n                },\r\n                yAxis: {\r\n                    type: 'value',\r\n                },\r\n                series: [\r\n                    {\r\n                        name: '进水',\r\n                        data: [],\r\n                        type: 'line',\r\n                        smooth: true\r\n                    },\r\n                    {\r\n                        name: '出水',\r\n                        data: [],\r\n                        type: 'line',\r\n                        smooth: true\r\n                    }\r\n                ]\r\n            },\r\n            activeKey: '1'\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        this.getData(new Date())\r\n    }\r\n    onChange = activeKey => {\r\n        let xAxisData = [], inCodData = [], outCodData = [], inNh3N = [], outNh3N = [], inTn = [], outTn = [], inTp = [], outTp = [], inPh = [], outPh = [], inFlow = [], outFlow = [];\r\n        this.state.data.forEach(item => {\r\n            xAxisData.push(item.gainTime);\r\n            inCodData.push(item.inCod);\r\n            outCodData.push(item.outCod);\r\n            inNh3N.push(item.inNh3N);\r\n            outNh3N.push(item.outNh3N);\r\n            inTn.push(item.inTn);\r\n            outTn.push(item.outTn);\r\n            inTp.push(item.inTp);\r\n            outTp.push(item.outTp);\r\n            inPh.push(item.inPh);\r\n            outPh.push(item.outPh);\r\n            inFlow.push(item.inFlow);\r\n            outFlow.push(item.outFlow);\r\n        })\r\n        let options = this.state.options;\r\n        options.xAxis.data = xAxisData;\r\n        this.setState({ activeKey },()=>{\r\n            if (activeKey==='1'){\r\n                options.series[0].data = inCodData;\r\n                options.series[1].data = outCodData;\r\n                this.codRef.getEchartsInstance().setOption(options);\r\n            } else if (activeKey === '2'){\r\n                options.series[0].data = inPh;\r\n                options.series[1].data = outPh;\r\n                this.phRef.getEchartsInstance().setOption(options);\r\n            } else if (activeKey === '3') {\r\n                options.series[0].data = inNh3N;\r\n                options.series[1].data = outNh3N;\r\n                this.nh3nRef.getEchartsInstance().setOption(options);\r\n            } else if (activeKey === '4') {\r\n                options.series[0].data = inTn;\r\n                options.series[1].data = outTn;\r\n                this.tnRef.getEchartsInstance().setOption(options);\r\n            } else if (activeKey === '5') {\r\n                options.series[0].data = inTp;\r\n                options.series[1].data = outTp;\r\n                this.tpRef.getEchartsInstance().setOption(options);\r\n            } else if (activeKey === '6') {\r\n                options.series[0].data = inFlow;\r\n                options.series[1].data = outFlow;\r\n                this.flowRef.getEchartsInstance().setOption(options);\r\n            }\r\n        });\r\n    };\r\n    getData = (date) => {\r\n        React.axios.get('api/inOutWater/queryList', { startTime: moment(date).format('yyyy-MM-DD 00:00:00'), endTime: moment(date).format('yyyy-MM-DD 23:59:59') }, res => {\r\n            this.setState({ data: res.data },()=>{\r\n                this.onChange('1');\r\n            });\r\n        })\r\n    }\r\n    query = (values) => {\r\n        this.getData(values.time);\r\n    }\r\n    render() {\r\n        return <Modal footer=\"\" title=\"数据图表\" width=\"90%\" visible={true} onCancel={this.props.onCancel} maskClosable={false}>\r\n            <Form layout=\"inline\" ref={this.formRef} onFinish={this.query} className=\"query-tools\">\r\n                <Form.Item label=\"日期\" name=\"time\">\r\n                    <DatePicker defaultValue={moment()} onChange={this.getData}/>\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    <Button type=\"primary\" htmlType=\"submit\" icon=\"search\">查询</Button>\r\n                </Form.Item>\r\n            </Form>\r\n            <Tabs type='card' size=\"small\" activeKey={this.state.activeKey} onChange={this.onChange}>\r\n                <Tabs.TabPane tab=\"COD\" key=\"1\">\r\n                    <ReactEcharts ref={(e) => { this.codRef = e; }}  option={this.state.options} style={{ height: '400px', width: '100%' }} />\r\n                </Tabs.TabPane>\r\n                <Tabs.TabPane tab=\"PH\" key=\"2\">\r\n                    <ReactEcharts ref={(e) => { this.phRef = e; }} option={this.state.options} style={{ height: '400px', width: '100%' }} />\r\n                </Tabs.TabPane>\r\n                <Tabs.TabPane tab=\"NH3-N\" key=\"3\">\r\n                    <ReactEcharts ref={(e) => { this.nh3nRef = e; }} option={this.state.options} style={{ height: '400px', width: '100%' }} />\r\n                </Tabs.TabPane>\r\n                <Tabs.TabPane tab=\"TN\" key=\"4\">\r\n                    <ReactEcharts ref={(e) => { this.tnRef = e; }} option={this.state.options} style={{ height: '400px', width: '100%' }} />\r\n                </Tabs.TabPane>\r\n                <Tabs.TabPane tab=\"TP\" key=\"5\">\r\n                    <ReactEcharts ref={(e) => { this.tpRef = e; }} option={this.state.options} style={{ height: '400px', width: '100%' }} />\r\n                </Tabs.TabPane>\r\n                <Tabs.TabPane tab=\"流量\" key=\"6\">\r\n                    <ReactEcharts ref={(e) => { this.flowRef = e; }} option={this.state.options} style={{ height: '400px', width: '100%' }} />\r\n                </Tabs.TabPane>\r\n            </Tabs>\r\n        </Modal>;\r\n    }\r\n}\r\n \r\nexport default Index;"]},"metadata":{},"sourceType":"module"}