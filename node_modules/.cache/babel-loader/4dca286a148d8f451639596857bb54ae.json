{"ast":null,"code":"import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\system\\\\role\\\\Edit.js\";\nimport React, { Component } from 'react';\n\nvar List = /*#__PURE__*/function (_Component) {\n  _inherits(List, _Component);\n\n  function List(props) {\n    var _this;\n\n    _classCallCheck(this, List);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(List).call(this, props));\n    _this.formRef = React.createRef();\n\n    _this.onChange = function (e) {\n      _this.setState({\n        type: e.target.value\n      });\n    };\n\n    _this.submit = function () {\n      _this.formRef.current.validateFields().then(function (values) {\n        values.roleId = _this.props.roleId;\n        values.menuIdList = _this.state.menuIdList;\n        var api = 'sys/role/save';\n\n        if (values.roleId) {\n          api = 'sys/role/update';\n        }\n\n        React.axios.post(api, values, function (res) {\n          React.message.success('操作成功');\n\n          _this.props.onCancel(1);\n        });\n      }).catch(function (err) {});\n    };\n\n    _this.getInfo = function () {\n      if (_this.props.roleId) {\n        React.axios.get(\"sys/role/info/\".concat(_this.props.roleId), null, function (res) {\n          _this.formRef.current.setFieldsValue(res.data);\n\n          _this.setState({\n            menuIdList: res.data.menuIdList\n          });\n        });\n      }\n    };\n\n    _this.state = {\n      type: 1,\n      menuData: [],\n      menuIdList: []\n    };\n    return _this;\n  }\n\n  _createClass(List, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getInfo();\n    } // 菜单类型监听\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(_Modal, {\n        title: this.props.roleId ? '修改角色' : '添加角色',\n        visible: true,\n        onCancel: this.props.onCancel,\n        onOk: this.submit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(_Form, {\n        ref: this.formRef,\n        labelCol: {\n          span: 4\n        },\n        onFinish: this.submit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u89D2\\u8272\\u540D\\u79F0\",\n        name: \"roleName\",\n        rules: [{\n          required: true,\n          message: '请输入角色角色名称!'\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u63CF\\u8FF0\",\n        name: \"remark\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input.TextArea, {\n        rows: 4,\n        maxLength: 100,\n        placeholder: \"100\\u4E2A\\u5B57\\u5185\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 25\n        }\n      }))));\n    }\n  }]);\n\n  return List;\n}(Component);\n\nexport default List;","map":{"version":3,"sources":["E:/project/environment-web/src/pages/system/role/Edit.js"],"names":["React","Component","List","props","formRef","createRef","onChange","e","setState","type","target","value","submit","current","validateFields","then","values","roleId","menuIdList","state","api","axios","post","res","message","success","onCancel","catch","err","getInfo","get","setFieldsValue","data","menuData","span","required"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {Modal,Form,Input} from 'antd';\r\nclass List extends Component{\r\n    formRef = React.createRef();\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            type: 1,\r\n            menuData: [],\r\n            menuIdList: []\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        this.getInfo();\r\n    }\r\n\r\n    // 菜单类型监听\r\n    onChange=(e)=>{\r\n        this.setState({type:e.target.value});\r\n    }\r\n    submit=()=>{\r\n        this.formRef.current.validateFields().then(values=>{\r\n            values.roleId = this.props.roleId;\r\n            values.menuIdList = this.state.menuIdList;\r\n            let api = 'sys/role/save';\r\n            if(values.roleId){\r\n                api = 'sys/role/update';\r\n            }\r\n            React.axios.post(api,values,res=>{\r\n                React.message.success('操作成功');\r\n                this.props.onCancel(1);\r\n            })\r\n        }).catch(err=>{})\r\n    }\r\n    // 详情\r\n    getInfo=()=>{\r\n        if(this.props.roleId){\r\n            React.axios.get(`sys/role/info/${this.props.roleId}`,null,res=>{\r\n                this.formRef.current.setFieldsValue(res.data);\r\n                this.setState({menuIdList: res.data.menuIdList});\r\n            })\r\n        }\r\n    }\r\n    render(){\r\n        return(\r\n            <Modal title={this.props.roleId?'修改角色':'添加角色'} visible={true} onCancel={this.props.onCancel} onOk={this.submit}>\r\n                <Form ref={this.formRef} labelCol={{span: 4}} onFinish={this.submit}>\r\n                    <Form.Item label=\"角色名称\" name=\"roleName\" rules={[{ required: true, message: '请输入角色角色名称!'}]}>\r\n                        <Input />\r\n                    </Form.Item>\r\n                    <Form.Item label=\"描述\" name=\"remark\">\r\n                        <Input.TextArea rows={4} maxLength={100} placeholder=\"100个字内\"/>\r\n                    </Form.Item>\r\n                </Form>\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\nexport default List"]},"metadata":{},"sourceType":"module"}