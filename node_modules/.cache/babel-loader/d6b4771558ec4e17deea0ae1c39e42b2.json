{"ast":null,"code":"import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/table/style\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/divider/style\";\nimport _Divider from \"antd/es/divider\";\nimport \"antd/es/row/style\";\nimport _Row from \"antd/es/row\";\nimport \"antd/es/date-picker/style\";\nimport _DatePicker from \"antd/es/date-picker\";\nimport \"antd/es/col/style\";\nimport _Col from \"antd/es/col\";\nimport \"antd/es/select/style\";\nimport _Select from \"antd/es/select\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/input-number/style\";\nimport _InputNumber from \"antd/es/input-number\";\nimport _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\inventory\\\\goodsChecking\\\\components\\\\Edit.js\";\nimport React, { Component } from \"react\";\n\nvar Edit = /*#__PURE__*/function (_Component) {\n  _inherits(Edit, _Component);\n\n  function Edit(props) {\n    var _this;\n\n    _classCallCheck(this, Edit);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Edit).call(this, props));\n    _this.formRef = React.createRef();\n\n    _this.getUnitList = function () {\n      React.axios.post('api/wmsType/tmaterialtype/queryMaterialTypeList?number=unit', null, function (res) {\n        var obj = {};\n        res.data.forEach(function (item) {\n          obj[item.id] = item.name;\n        });\n\n        _this.setState({\n          units: obj\n        });\n      });\n    };\n\n    _this.submit = function () {\n      var _this$props = _this.props,\n          id = _this$props.id,\n          tableReload = _this$props.tableReload;\n      var warehouseName = _this.state.warehouseName;\n\n      _this.formRef.current.validateFields().then(function (values, errors) {\n        if (!errors) {\n          if (_this.props.id) {\n            values.id = id;\n\n            if (warehouseName) {\n              values.houseName = warehouseName;\n            }\n\n            ;\n            React.axios.post(\"/api/wms/twarehouseinorder/update\", values, function (res) {\n              _this.close();\n\n              tableReload();\n            });\n          } else {\n            if (warehouseName) {\n              values.houseName = warehouseName;\n            }\n\n            ;\n            React.axios.post(\"/api/wms/twarehouseinorder/save\", values, function (res) {\n              _this.close();\n\n              tableReload();\n            });\n          }\n\n          ;\n        }\n\n        ;\n      });\n    };\n\n    _this.close = function () {\n      var close = _this.props.close;\n      close();\n    };\n\n    _this.state = {\n      warehouseName: \"\",\n      warehouseList: [],\n      units: {}\n    };\n    return _this;\n  }\n\n  _createClass(Edit, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.getUnitList();\n      var id = this.props.id;\n\n      if (id) {\n        React.axios.get(\"api/wms/twarehouseinorder/info/\" + id, \"\", function (res) {\n          _this2.setState({\n            warehouseName: res.data.houseName\n          });\n\n          _this2.formRef.current.setFieldsValue(res.data);\n        });\n      }\n\n      ;\n      React.axios.get(\"api/wms/twarehouse/list?limit=1000&page=1\", \"\", function (res) {\n        _this2.setState({\n          warehouseList: res.data.data\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var id = this.props.id;\n      var warehouseList = this.state.warehouseList;\n      var tableColumns = [{\n        title: \"物料编号\",\n        key: \"number\",\n        dataIndex: \"number\"\n      }, {\n        title: \"物料名称\",\n        key: \"name\",\n        dataIndex: \"name\"\n      }, {\n        title: \"单位\",\n        key: \"unit\",\n        dataIndex: \"unit\",\n        render: function render(text, record) {\n          return _this3.state.units[record.unit];\n        }\n      }, {\n        title: \"品牌\",\n        key: \"brank\",\n        dataIndex: \"brank\"\n      }, {\n        title: \"数量\",\n        render: function render(text, record) {\n          return /*#__PURE__*/React.createElement(_InputNumber, {\n            min: 0,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 41\n            }\n          });\n        }\n      }, {\n        title: \"操作\",\n        width: \"100px\",\n        render: function render(text, record) {\n          return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(_Button, {\n            type: \"link\",\n            size: \"small\",\n            danger: true,\n            authcode: \"inventory:outWarehouse:delete\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"iconfont icon-shanchudefuben\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 110\n            }\n          }), \"\\u5220\\u9664\"));\n        }\n      }];\n      var data = [{\n        id: 1,\n        number: \"xxxxxx\",\n        name: \"xxxxxx\",\n        unit: \"吨\",\n        brank: \"xxxxxx\"\n      }];\n      return /*#__PURE__*/React.createElement(_Modal, {\n        title: id ? \"修改入库信息\" : \"添加入库\",\n        visible: true,\n        onOk: this.submit,\n        onCancel: this.close,\n        width: 720,\n        maskClosable: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(_Form, {\n        labelCol: {\n          span: 5\n        },\n        ref: this.formRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Col, {\n        span: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u76D8\\u70B9\\u7F16\\u53F7\",\n        name: \"number\",\n        initialValue: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        placeholder: \"\\u6CA1\\u6709\\u586B\\u5199\\u5219\\u81EA\\u52A8\\u751F\\u6210\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 33\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u4ED3\\u5E93\",\n        name: \"houseNumber\",\n        initialValue: [],\n        rules: [{\n          required: true,\n          message: \"区域名称不能为空\"\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(_Select, {\n        placeholder: \"\\u76D8\\u70B9\\u4ED3\\u5E93\",\n        onChange: function onChange(value, event) {\n          _this3.setState({\n            warehouseName: event.children\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 33\n        }\n      }, warehouseList.map(function (item, index) {\n        return /*#__PURE__*/React.createElement(_Select.Option, {\n          key: item.number,\n          value: item.number,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 45\n          }\n        }, item.name);\n      }))), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u5907\\u6CE8\",\n        name: \"remark\",\n        initialValue: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(_Input.TextArea, {\n        placeholder: \"100\\u4E2A\\u5B57\\u4EE5\\u5185\",\n        maxLength: 100,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 33\n        }\n      }))), /*#__PURE__*/React.createElement(_Col, {\n        span: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u76D8\\u70B9\\u65E5\\u671F\",\n        name: \"number\",\n        initialValue: [],\n        rules: [{\n          required: true,\n          message: \"区域名称不能为空\"\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(_DatePicker.RangePicker, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 33\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u76D8\\u70B9\\u4EBA\",\n        name: \"user\",\n        initialValue: [],\n        rules: [{\n          required: true,\n          message: \"盘点人不能为空\"\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(_Select, {\n        placeholder: \"\\u76D8\\u70B9\\u4EBA\",\n        onChange: function onChange(value, event) {\n          _this3.setState({\n            warehouseName: event.children\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 33\n        }\n      }, warehouseList.map(function (item, index) {\n        return /*#__PURE__*/React.createElement(_Select.Option, {\n          key: item.number,\n          value: item.number,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 45\n          }\n        }, item.name);\n      }))))), /*#__PURE__*/React.createElement(_Divider, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(_Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u7269\\u6599\\u7F16\\u53F7\",\n        initialValue: \"4324324324\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u7269\\u6599\\u540D\\u79F0\",\n        initialValue: \"4324324324\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u5E93\\u5B58\\u6570\\u91CF\",\n        initialValue: \"4324324324\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u76D8\\u70B9\\u6570\\u91CF\",\n        initialValue: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 29\n        }\n      }))), /*#__PURE__*/React.createElement(_Divider, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(_Button, {\n        type: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"iconfont icon-tianjia\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 44\n        }\n      }), \"\\u6DFB\\u52A0\\u7269\\u6599\"), /*#__PURE__*/React.createElement(_Table, {\n        rowKey: \"id\",\n        columns: tableColumns,\n        dataSource: data,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 21\n        }\n      })));\n    }\n  }]);\n\n  return Edit;\n}(Component);\n\n;\nexport default Edit;","map":{"version":3,"sources":["E:/project/environment-web/src/pages/inventory/goodsChecking/components/Edit.js"],"names":["React","Component","Edit","props","formRef","createRef","getUnitList","axios","post","res","obj","data","forEach","item","id","name","setState","units","submit","tableReload","warehouseName","state","current","validateFields","then","values","errors","houseName","close","warehouseList","get","setFieldsValue","tableColumns","title","key","dataIndex","render","text","record","unit","width","number","brank","span","required","message","value","event","children","map","index"],"mappings":"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","sourcesContent":["import React,{Component} from \"react\";\r\nimport {Modal,Form,Input,Select,Row,Col,DatePicker,Divider,Table,InputNumber,Button} from \"antd\";\r\n\r\nclass Edit extends Component{\r\n    formRef = React.createRef();\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            warehouseName:\"\",\r\n            warehouseList:[],\r\n            units: {}\r\n        };\r\n    };\r\n\r\n    componentDidMount(){\r\n        this.getUnitList();\r\n        const {id} = this.props;\r\n        if(id){\r\n            React.axios.get(\"api/wms/twarehouseinorder/info/\"+id,\"\",res => {\r\n                this.setState({warehouseName:res.data.houseName});\r\n                this.formRef.current.setFieldsValue(res.data);\r\n            });\r\n        };\r\n        React.axios.get(\"api/wms/twarehouse/list?limit=1000&page=1\",\"\",res => {\r\n            this.setState({warehouseList:res.data.data});\r\n        });\r\n    };\r\n\r\n    // 获取计量单位\r\n    getUnitList=()=>{\r\n        React.axios.post('api/wmsType/tmaterialtype/queryMaterialTypeList?number=unit',null,res=>{\r\n            let obj = {};\r\n            res.data.forEach(item=>{\r\n                obj[item.id] = item.name;\r\n            })\r\n            this.setState({units: obj});\r\n        })\r\n    }\r\n\r\n    /**\r\n     * @todo 提交表单\r\n     */\r\n    submit = () => {\r\n        const {id,tableReload} = this.props;\r\n        const {warehouseName} = this.state;\r\n        this.formRef.current.validateFields().then((values,errors) => {\r\n            if(!errors){\r\n                if(this.props.id){\r\n                    values.id = id;\r\n                    if(warehouseName){\r\n                        values.houseName = warehouseName;\r\n                    };\r\n                    React.axios.post(\"/api/wms/twarehouseinorder/update\",values,res => {\r\n                        this.close();\r\n                        tableReload();\r\n                    });\r\n                }else{\r\n                    if(warehouseName){\r\n                        values.houseName = warehouseName;\r\n                    };\r\n                    React.axios.post(\"/api/wms/twarehouseinorder/save\",values,res => {\r\n                        this.close();\r\n                        tableReload();\r\n                    });\r\n                };\r\n            };\r\n        });\r\n    };\r\n\r\n    /**\r\n     * @todo 关闭组件\r\n     */\r\n    close = () => {\r\n        const {close} = this.props;\r\n        close();\r\n    };\r\n\r\n    render(){\r\n        const {id} = this.props;\r\n        const {warehouseList} = this.state;\r\n\r\n        const tableColumns = [\r\n            {\r\n                title:\"物料编号\",\r\n                key:\"number\",\r\n                dataIndex:\"number\",\r\n            },\r\n            {\r\n                title:\"物料名称\",\r\n                key:\"name\",\r\n                dataIndex:\"name\",\r\n            },\r\n            {\r\n                title:\"单位\",\r\n                key:\"unit\",\r\n                dataIndex:\"unit\",\r\n                render:(text,record) => {\r\n                    return this.state.units[record.unit];\r\n                },\r\n            },\r\n            {\r\n                title:\"品牌\",\r\n                key:\"brank\",\r\n                dataIndex:\"brank\",\r\n            },\r\n            {\r\n                title:\"数量\",\r\n                render:(text,record) => <InputNumber min={0}/>,\r\n            },\r\n            {\r\n                title:\"操作\",\r\n                width:\"100px\",\r\n                render:(text,record) => {\r\n                    return(\r\n                        <>\r\n                            <Button type=\"link\" size=\"small\" danger authcode=\"inventory:outWarehouse:delete\"><span className=\"iconfont icon-shanchudefuben\"/>删除</Button>\r\n                        </>\r\n                    );\r\n                },\r\n            },\r\n        ];\r\n\r\n        const data = [{\r\n            id:1,number:\"xxxxxx\",name:\"xxxxxx\",unit:\"吨\",brank:\"xxxxxx\"\r\n        }]\r\n\r\n        return(\r\n            <Modal\r\n                title={id ? (\"修改入库信息\") : (\"添加入库\")}\r\n                visible={true}\r\n                onOk={this.submit}\r\n                onCancel={this.close}\r\n                width={720}\r\n                maskClosable={false}\r\n            >\r\n                <Form\r\n                    labelCol={{span: 5}}\r\n                    ref={this.formRef}\r\n                >\r\n                    <Row>\r\n                        <Col span={12}>\r\n                            <Form.Item\r\n                                label=\"盘点编号\"\r\n                                name=\"number\"\r\n                                initialValue=\"\"\r\n                            >\r\n                                <Input placeholder=\"没有填写则自动生成\"/>\r\n                            </Form.Item>\r\n                            <Form.Item\r\n                                label=\"仓库\"\r\n                                name=\"houseNumber\"\r\n                                initialValue={[]}\r\n                                rules={[\r\n                                    {required:true,message:\"区域名称不能为空\"}\r\n                                ]}\r\n                            >\r\n                                <Select\r\n                                    placeholder=\"盘点仓库\"\r\n                                    onChange={(value,event) => {this.setState({warehouseName:event.children})}}\r\n                                >\r\n                                    {warehouseList.map((item,index) => {\r\n                                        return(\r\n                                            <Select.Option\r\n                                                key={item.number}\r\n                                                value={item.number}\r\n                                            >\r\n                                                {item.name}\r\n                                            </Select.Option>\r\n                                        );\r\n                                    })}\r\n                                </Select>\r\n                            </Form.Item>\r\n                            <Form.Item\r\n                                label=\"备注\"\r\n                                name=\"remark\"\r\n                                initialValue=\"\"\r\n                            >\r\n                                <Input.TextArea placeholder=\"100个字以内\" maxLength={100}/>\r\n                            </Form.Item>\r\n                        </Col>\r\n                        <Col span={12}>\r\n                            <Form.Item\r\n                                label=\"盘点日期\"\r\n                                name=\"number\"\r\n                                initialValue={[]}\r\n                                rules={[\r\n                                    {required:true,message:\"区域名称不能为空\"}\r\n                                ]}\r\n                            >\r\n                                <DatePicker.RangePicker/>\r\n                            </Form.Item>\r\n                            <Form.Item\r\n                                label=\"盘点人\"\r\n                                name=\"user\"\r\n                                initialValue={[]}\r\n                                rules={[\r\n                                    {required:true,message:\"盘点人不能为空\"}\r\n                                ]}\r\n                            >\r\n                                <Select\r\n                                    placeholder=\"盘点人\"\r\n                                    onChange={(value,event) => {this.setState({warehouseName:event.children})}}\r\n                                >\r\n                                    {warehouseList.map((item,index) => {\r\n                                        return(\r\n                                            <Select.Option\r\n                                                key={item.number}\r\n                                                value={item.number}\r\n                                            >\r\n                                                {item.name}\r\n                                            </Select.Option>\r\n                                        );\r\n                                    })}\r\n                                </Select>\r\n                            </Form.Item>\r\n                        </Col>\r\n                    </Row>\r\n                    <Divider/>\r\n                    <Form>\r\n                        <Form.Item\r\n                            label=\"物料编号\"\r\n                            initialValue=\"4324324324\"\r\n                        >\r\n                            <Input disabled/>\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                            label=\"物料名称\"\r\n                            initialValue=\"4324324324\"\r\n                        >\r\n                            <Input disabled/>\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                            label=\"库存数量\"\r\n                            initialValue=\"4324324324\"\r\n                        >\r\n                            <Input disabled/>\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                            label=\"盘点数量\"\r\n                            initialValue=\"\"\r\n                        >\r\n                            <Input/>\r\n                        </Form.Item>\r\n                    </Form>\r\n                    <Divider/>\r\n                    <Button type=\"primary\"><span className=\"iconfont icon-tianjia\"/>添加物料</Button>\r\n                    <Table\r\n                        rowKey=\"id\"\r\n                        columns={tableColumns}\r\n                        dataSource={data}\r\n                    />\r\n                </Form>\r\n            </Modal>\r\n        );\r\n    };\r\n};\r\nexport default Edit;"]},"metadata":{},"sourceType":"module"}