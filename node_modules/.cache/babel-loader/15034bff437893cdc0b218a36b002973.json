{"ast":null,"code":"import _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\bigScreen\\\\components\\\\Shenghuachi.js\";\nimport React, { Component } from 'react';\nimport ReactEcharts from 'echarts-for-react';\nimport moment from 'moment';\n\nvar Shenghuachi1 = /*#__PURE__*/function (_Component) {\n  _inherits(Shenghuachi1, _Component);\n\n  function Shenghuachi1(props) {\n    var _this;\n\n    _classCallCheck(this, Shenghuachi1);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Shenghuachi1).call(this, props));\n    _this.ref = null;\n    _this.timer = null;\n\n    _this.getData = function () {\n      React.axios.get('api/biochemical/queryList', {\n        poolNumber: _this.props.poolNumber,\n        startTime: moment(new Date().getTime() - 1000 * 60 * 60 * 24 * 7).format('yyyy-MM-DD 00:00:00'),\n        endTime: moment().format('yyyy-MM-DD 23:00:00')\n      }, function (res) {\n        _this.setState({\n          data: res.data\n        }, function () {\n          _this.onchange(1);\n        });\n      });\n    };\n\n    _this.onchange = function (index) {\n      var xAxisData = [];\n      var A_DO = [],\n          B_DO = [],\n          C_DO = [],\n          D_DO = [];\n      var A_MLSS = [],\n          B_MLSS = [],\n          C_MLSS = [],\n          D_MLSS = [];\n      var A_ORP = [],\n          B_ORP = [],\n          C_ORP = [],\n          D_ORP = [];\n      var NH3 = [];\n\n      _this.state.data.forEach(function (item) {\n        xAxisData.push(item.gainTime);\n        A_DO.push(item.aerobicADo);\n        B_DO.push(item.aerobicBAgitatorDo);\n        C_DO.push(item.aerobicCDo);\n        D_DO.push(item.aerobicDDo);\n        A_MLSS.push(item.aerobicAMlss);\n        B_MLSS.push(item.aerobicBAgitatorMlss);\n        C_MLSS.push(item.aerobicCMlss);\n        D_MLSS.push(item.aerobicDMlss);\n        A_ORP.push(item.anaerobicZoneEjectorOrp);\n        B_ORP.push(item.hypoxiaAOrp);\n        C_ORP.push(item.hypoxiaBAgitatorOrp);\n        D_ORP.push(item.hypoxiaCAgitatorOrp);\n        NH3.push(item.aerobicDNh3);\n      });\n\n      var options = _this.ref.getEchartsInstance().getOption();\n\n      options.xAxis[0].data = xAxisData;\n      var active = _this.state.active;\n\n      if (active.indexOf(index) === -1) {\n        active.push(index);\n      } else if (active.length > 1) {\n        active.splice(active.indexOf(index), 1);\n      }\n\n      _this.setState({\n        active: active\n      }, function () {\n        var series = [];\n        var legend = [];\n        active.forEach(function (item) {\n          if (item === 1) {\n            series.push({\n              name: '好氧A区DO',\n              type: 'line',\n              data: A_DO,\n              smooth: true\n            });\n            series.push({\n              name: '好氧B区DO',\n              type: 'line',\n              data: B_DO,\n              smooth: true\n            });\n            series.push({\n              name: '好氧C区DO',\n              type: 'line',\n              data: C_DO,\n              smooth: true\n            });\n            series.push({\n              name: '好氧D区DO',\n              type: 'line',\n              data: D_DO,\n              smooth: true\n            });\n            legend.push('好氧A区DO');\n            legend.push('好氧B区DO');\n            legend.push('好氧C区DO');\n            legend.push('好氧D区DO');\n          } else if (item === 2) {\n            series.push({\n              name: '好氧A区MLSS',\n              type: 'line',\n              data: A_MLSS,\n              smooth: true\n            });\n            series.push({\n              name: '好氧B区MLSS',\n              type: 'line',\n              data: B_MLSS,\n              smooth: true\n            });\n            series.push({\n              name: '好氧C区MLSS',\n              type: 'line',\n              data: C_MLSS,\n              smooth: true\n            });\n            series.push({\n              name: '好氧D区MLSS',\n              type: 'line',\n              data: D_MLSS,\n              smooth: true\n            });\n            legend.push('好氧A区MLSS');\n            legend.push('好氧B区MLSS');\n            legend.push('好氧C区MLSS');\n            legend.push('好氧D区MLSS');\n          } else if (item === 3) {\n            series.push({\n              name: '厌氧/缺氧区ORP',\n              type: 'line',\n              data: A_ORP,\n              smooth: true\n            });\n            series.push({\n              name: '好氧A区ORP',\n              type: 'line',\n              data: B_ORP,\n              smooth: true\n            });\n            series.push({\n              name: '好氧B区ORP',\n              type: 'line',\n              data: C_ORP,\n              smooth: true\n            });\n            series.push({\n              name: '好氧C区ORP',\n              type: 'line',\n              data: D_ORP,\n              smooth: true\n            });\n            legend.push('厌氧/缺氧区ORP');\n            legend.push('好氧A区ORP');\n            legend.push('好氧B区ORP');\n            legend.push('好氧C区ORP');\n          } else if (index === 4) {\n            series.push({\n              name: 'NH3-N',\n              type: 'line',\n              data: NH3,\n              smooth: true\n            });\n            legend.push('NH3-N');\n          }\n        });\n        options.series = series;\n        options.legend[0].data = legend;\n\n        _this.ref.getEchartsInstance().clear();\n\n        _this.ref.getEchartsInstance().setOption(options);\n      });\n    };\n\n    _this.state = {\n      active: [1],\n      data: [],\n      options: {\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross'\n          }\n        },\n        legend: {\n          data: [],\n          textStyle: {\n            color: '#FFFFFF'\n          }\n        },\n        grid: {\n          left: '3%',\n          right: '4%',\n          bottom: '3%',\n          containLabel: true\n        },\n        dataZoom: [{\n          type: 'inside',\n          start: 0,\n          end: 100\n        }, {\n          start: 0,\n          end: 100\n        }],\n        xAxis: {\n          type: 'category',\n          boundaryGap: false,\n          data: [],\n          axisLine: {\n            lineStyle: {\n              color: '#FFFFFF'\n            }\n          },\n          axisLabel: {\n            formatter: function formatter(value) {\n              return \"\".concat(moment(value).format('yyyy-MM-DD'), \"\\n\").concat(moment(value).format('HH:mm'));\n            }\n          },\n          axisPointer: {\n            label: {\n              color: '#000'\n            }\n          }\n        },\n        yAxis: {\n          type: 'value',\n          axisLine: {\n            lineStyle: {\n              color: '#FFFFFF'\n            }\n          },\n          axisPointer: {\n            label: {\n              color: '#000'\n            }\n          }\n        },\n        series: []\n      }\n    };\n    return _this;\n  }\n\n  _createClass(Shenghuachi1, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.getData();\n      this.timer = setInterval(function () {\n        _this2.getData();\n      }, 1000 * 60 * 10);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.timer);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: this.state.active.indexOf(1) !== -1 ? 'active' : '',\n        onClick: this.onchange.bind(this, 1),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 17\n        }\n      }, \"DO\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: this.state.active.indexOf(2) !== -1 ? 'active' : '',\n        onClick: this.onchange.bind(this, 2),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 17\n        }\n      }, \"MLSS\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: this.state.active.indexOf(3) !== -1 ? 'active' : '',\n        onClick: this.onchange.bind(this, 3),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 17\n        }\n      }, \"ORP\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: this.state.active.indexOf(4) !== -1 ? 'active' : '',\n        onClick: this.onchange.bind(this, 4),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 17\n        }\n      }, \"NH3-N\")), /*#__PURE__*/React.createElement(ReactEcharts, {\n        ref: function ref(e) {\n          _this3.ref = e;\n        },\n        option: this.state.options,\n        style: {\n          height: '500px',\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 13\n        }\n      }));\n    }\n  }]);\n\n  return Shenghuachi1;\n}(Component);\n\nexport default Shenghuachi1;","map":{"version":3,"sources":["E:/project/environment-web/src/pages/bigScreen/components/Shenghuachi.js"],"names":["React","Component","ReactEcharts","moment","Shenghuachi1","props","ref","timer","getData","axios","get","poolNumber","startTime","Date","getTime","format","endTime","res","setState","data","onchange","index","xAxisData","A_DO","B_DO","C_DO","D_DO","A_MLSS","B_MLSS","C_MLSS","D_MLSS","A_ORP","B_ORP","C_ORP","D_ORP","NH3","state","forEach","item","push","gainTime","aerobicADo","aerobicBAgitatorDo","aerobicCDo","aerobicDDo","aerobicAMlss","aerobicBAgitatorMlss","aerobicCMlss","aerobicDMlss","anaerobicZoneEjectorOrp","hypoxiaAOrp","hypoxiaBAgitatorOrp","hypoxiaCAgitatorOrp","aerobicDNh3","options","getEchartsInstance","getOption","xAxis","active","indexOf","length","splice","series","legend","name","type","smooth","clear","setOption","tooltip","trigger","axisPointer","textStyle","color","grid","left","right","bottom","containLabel","dataZoom","start","end","boundaryGap","axisLine","lineStyle","axisLabel","formatter","value","label","yAxis","setInterval","clearInterval","bind","e","height","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport ReactEcharts from 'echarts-for-react';\r\nimport moment from 'moment';\r\nclass Shenghuachi1 extends Component {\r\n    ref = null;\r\n    timer = null;\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            active: [1],\r\n            data: [],\r\n            options: {\r\n                tooltip: {\r\n                    trigger: 'axis',\r\n                    axisPointer: {\r\n                        type: 'cross',\r\n                    }\r\n                },\r\n                legend: {\r\n                    data: [],\r\n                    textStyle: {\r\n                        color: '#FFFFFF'\r\n                    }\r\n                },\r\n                grid: {\r\n                    left: '3%',\r\n                    right: '4%',\r\n                    bottom: '3%',\r\n                    containLabel: true\r\n                },\r\n                dataZoom: [\r\n                    {\r\n                        type: 'inside',\r\n                        start: 0,\r\n                        end: 100\r\n                    },\r\n                    {\r\n                        start: 0,\r\n                        end: 100\r\n                    }\r\n                ],\r\n                xAxis: {\r\n                    type: 'category',\r\n                    boundaryGap: false,\r\n                    data: [],\r\n                    axisLine: {\r\n                        lineStyle: {\r\n                            color: '#FFFFFF'\r\n                        }\r\n                    },\r\n                    axisLabel: {\r\n                        formatter: (value) => {\r\n                            return `${moment(value).format('yyyy-MM-DD')}\\n${moment(value).format('HH:mm')}`\r\n                        },\r\n                    },\r\n                    axisPointer: {\r\n                        label: {\r\n                            color: '#000'\r\n                        }\r\n                    }\r\n                },\r\n                yAxis: {\r\n                    type: 'value',\r\n                    axisLine: {\r\n                        lineStyle: {\r\n                            color: '#FFFFFF'\r\n                        }\r\n                    },\r\n                    axisPointer: {\r\n                        label: {\r\n                            color: '#000'\r\n                        }\r\n                    }\r\n                },\r\n                series: []\r\n            },\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getData();\r\n        this.timer = setInterval(() => {\r\n            this.getData();\r\n        }, 1000 * 60 * 10);\r\n    }\r\n    componentWillUnmount() {\r\n        clearInterval(this.timer);\r\n    }\r\n\r\n    getData = () => {\r\n        React.axios.get('api/biochemical/queryList', { poolNumber: this.props.poolNumber, startTime: moment(new Date().getTime() - 1000 * 60 * 60 * 24 * 7).format('yyyy-MM-DD 00:00:00'), endTime: moment().format('yyyy-MM-DD 23:00:00')}, res => {\r\n            this.setState({ data: res.data }, () => {\r\n                this.onchange(1);\r\n            });\r\n        })\r\n    }\r\n\r\n    onchange = (index) => {\r\n        let xAxisData = [];\r\n        let A_DO = [], B_DO = [], C_DO = [], D_DO = [];\r\n        let A_MLSS = [], B_MLSS = [], C_MLSS = [], D_MLSS = [];\r\n        let A_ORP = [], B_ORP = [], C_ORP = [], D_ORP = [];\r\n        let NH3 = [];\r\n        this.state.data.forEach(item => {\r\n            xAxisData.push(item.gainTime);\r\n            A_DO.push(item.aerobicADo);\r\n            B_DO.push(item.aerobicBAgitatorDo);\r\n            C_DO.push(item.aerobicCDo);\r\n            D_DO.push(item.aerobicDDo);\r\n\r\n            A_MLSS.push(item.aerobicAMlss);\r\n            B_MLSS.push(item.aerobicBAgitatorMlss);\r\n            C_MLSS.push(item.aerobicCMlss);\r\n            D_MLSS.push(item.aerobicDMlss);\r\n            \r\n            A_ORP.push(item.anaerobicZoneEjectorOrp);\r\n            B_ORP.push(item.hypoxiaAOrp);\r\n            C_ORP.push(item.hypoxiaBAgitatorOrp);\r\n            D_ORP.push(item.hypoxiaCAgitatorOrp);\r\n\r\n            NH3.push(item.aerobicDNh3);\r\n        })\r\n        let options = this.ref.getEchartsInstance().getOption();\r\n        options.xAxis[0].data = xAxisData;\r\n        let active = this.state.active;\r\n        if (active.indexOf(index) === -1) {\r\n            active.push(index);\r\n        } else if (active.length > 1) {\r\n            active.splice(active.indexOf(index), 1);\r\n        }\r\n        this.setState({ active: active }, () => {\r\n            let series = [];\r\n            let legend = [];\r\n            active.forEach(item => {\r\n                if(item === 1){\r\n                    series.push({\r\n                        name: '好氧A区DO',\r\n                        type: 'line',\r\n                        data: A_DO,\r\n                        smooth: true,\r\n                    });\r\n                    series.push({\r\n                        name: '好氧B区DO',\r\n                        type: 'line',\r\n                        data: B_DO,\r\n                        smooth: true,\r\n                    });\r\n                    series.push({\r\n                        name: '好氧C区DO',\r\n                        type: 'line',\r\n                        data: C_DO,\r\n                        smooth: true,\r\n                    });\r\n                    series.push({\r\n                        name: '好氧D区DO',\r\n                        type: 'line',\r\n                        data: D_DO,\r\n                        smooth: true,\r\n                    });\r\n                    legend.push('好氧A区DO');\r\n                    legend.push('好氧B区DO');\r\n                    legend.push('好氧C区DO');\r\n                    legend.push('好氧D区DO');\r\n                } else if(item === 2){\r\n                    series.push({\r\n                        name: '好氧A区MLSS',\r\n                        type: 'line',\r\n                        data: A_MLSS,\r\n                        smooth: true,\r\n                    });\r\n                    series.push({\r\n                        name: '好氧B区MLSS',\r\n                        type: 'line',\r\n                        data: B_MLSS,\r\n                        smooth: true,\r\n                    });\r\n                    series.push({\r\n                        name: '好氧C区MLSS',\r\n                        type: 'line',\r\n                        data: C_MLSS,\r\n                        smooth: true,\r\n                    });\r\n                    series.push({\r\n                        name: '好氧D区MLSS',\r\n                        type: 'line',\r\n                        data: D_MLSS,\r\n                        smooth: true,\r\n                    });\r\n                    legend.push('好氧A区MLSS');\r\n                    legend.push('好氧B区MLSS');\r\n                    legend.push('好氧C区MLSS');\r\n                    legend.push('好氧D区MLSS');\r\n                } else if (item === 3) {\r\n                    series.push({\r\n                        name: '厌氧/缺氧区ORP',\r\n                        type: 'line',\r\n                        data: A_ORP,\r\n                        smooth: true,\r\n                    });\r\n                    series.push({\r\n                        name: '好氧A区ORP',\r\n                        type: 'line',\r\n                        data: B_ORP,\r\n                        smooth: true,\r\n                    });\r\n                    series.push({\r\n                        name: '好氧B区ORP',\r\n                        type: 'line',\r\n                        data: C_ORP,\r\n                        smooth: true,\r\n                    });\r\n                    series.push({\r\n                        name: '好氧C区ORP',\r\n                        type: 'line',\r\n                        data: D_ORP,\r\n                        smooth: true,\r\n                    });\r\n                    legend.push('厌氧/缺氧区ORP');\r\n                    legend.push('好氧A区ORP');\r\n                    legend.push('好氧B区ORP');\r\n                    legend.push('好氧C区ORP');\r\n                } else if (index === 4) {\r\n                    series.push({\r\n                        name: 'NH3-N',\r\n                        type: 'line',\r\n                        data: NH3,\r\n                        smooth: true,\r\n                    });\r\n                    legend.push('NH3-N');\r\n                }\r\n            })\r\n            options.series = series;\r\n            options.legend[0].data = legend;\r\n            this.ref.getEchartsInstance().clear();\r\n            this.ref.getEchartsInstance().setOption(options);\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return <>\r\n            <div className=\"btn\">\r\n                <div className={this.state.active.indexOf(1) !== -1 ? 'active' : ''} onClick={this.onchange.bind(this, 1)}>DO</div>\r\n                <div className={this.state.active.indexOf(2) !== -1 ? 'active' : ''} onClick={this.onchange.bind(this, 2)}>MLSS</div>\r\n                <div className={this.state.active.indexOf(3) !== -1 ? 'active' : ''} onClick={this.onchange.bind(this, 3)}>ORP</div>\r\n                <div className={this.state.active.indexOf(4) !== -1 ? 'active' : ''} onClick={this.onchange.bind(this, 4)}>NH3-N</div>\r\n            </div>\r\n            <ReactEcharts ref={(e) => { this.ref = e; }} option={this.state.options} style={{ height: '500px', width: '100%' }} />\r\n        </>\r\n    }\r\n}\r\nexport default Shenghuachi1;"]},"metadata":{},"sourceType":"module"}