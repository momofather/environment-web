{"ast":null,"code":"import \"antd/es/space/style\";\nimport _Space from \"antd/es/space\";\nimport \"antd/es/row/style\";\nimport _Row from \"antd/es/row\";\nimport \"antd/es/date-picker/style\";\nimport _DatePicker from \"antd/es/date-picker\";\nimport \"antd/es/select/style\";\nimport _Select from \"antd/es/select\";\nimport \"antd/es/col/style\";\nimport _Col from \"antd/es/col\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/input-number/style\";\nimport _InputNumber from \"antd/es/input-number\";\nimport \"antd/es/breadcrumb/style\";\nimport _Breadcrumb from \"antd/es/breadcrumb\";\nimport _toConsumableArray from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\inventory\\\\goodsChecking\\\\launchCheck.js\";\nimport React, { Component } from \"react\";\nimport Button from \"@/components/button\";\nimport Table from \"@/components/table\";\nimport moment from \"moment\";\nimport GoodsListModel from './components/GoodsListModel';\n\nvar LunchCheck = /*#__PURE__*/function (_Component) {\n  _inherits(LunchCheck, _Component);\n\n  function LunchCheck(props) {\n    var _this;\n\n    _classCallCheck(this, LunchCheck);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LunchCheck).call(this, props));\n    _this.formRef = React.createRef();\n\n    _this.getUnitList = function () {\n      React.axios.post('api/wmsType/tmaterialtype/queryMaterialTypeList?number=unit', null, function (res) {\n        var obj = {};\n        res.data.forEach(function (item) {\n          obj[item.id] = item.name;\n        });\n\n        _this.setState({\n          units: obj\n        });\n      });\n    };\n\n    _this.submit = function () {\n      var _this$state = _this.state,\n          username = _this$state.username,\n          number = _this$state.number;\n\n      _this.formRef.current.validateFields().then(function (values) {\n        values.id = _this.props.match.params.id;\n        values.username = username;\n        values.number = number;\n        values.housedate = values.housedate.format(\"YYYY-MM-DD\");\n        values.type = \"4\";\n\n        if (values.deliverymode === 'warehouse') {\n          values.houseno = _this.state.houseNo;\n          values.housename = _this.state.houseName;\n        } else {\n          values.houseno = null;\n          values.housename = null;\n        }\n\n        values.wareinventoryStockEntity = _toConsumableArray(_this.state.materialList);\n        var url = 'api/wms/twarehousebill/save';\n\n        if (values.id) {\n          url = 'api/wms/twarehousebill/update';\n        }\n\n        React.axios.post(url, values, function (res) {\n          React.message.success('操作成功');\n\n          _this.props.history.goBack();\n        });\n      });\n    };\n\n    _this.openSelectGoods = function () {\n      _this.setState({\n        selectGoodsVisible: true\n      });\n    };\n\n    _this.deleteGoods = function (index) {\n      var materialList = _toConsumableArray(_this.state.materialList);\n\n      materialList.splice(index, 1);\n\n      _this.setState({\n        materialList: materialList\n      });\n    };\n\n    _this.getWareHouseList = function () {\n      React.axios.get('api/wms/twarehouse/list', {\n        page: 1,\n        limit: 1000\n      }, function (res) {\n        _this.setState({\n          wareHouseList: res.data.data\n        });\n      });\n    };\n\n    _this.handleDeliverymode = function (val) {\n      _this.setState({\n        deliverymode: val\n      });\n    };\n\n    _this.getMaterialBy = function (val, e) {\n      _this.setState({\n        materialList: [],\n        houseNo: val,\n        houseName: e.children\n      });\n\n      React.axios.post(\"api/wms/twarehousestock/selectMateriel?houseNumber=\".concat(val), null, function (res) {\n        _this.setState({\n          materialList: res.data\n        });\n      });\n    };\n\n    _this.selectedGoods = function (val) {\n      _this.setState({\n        selectGoodsVisible: false,\n        selectKeys: val\n      });\n\n      var data = [];\n      val.forEach(function (res) {\n        React.axios.get(\"api/wms/twarehousestock/list?page=1&limit=1000&number=\".concat(res), null, function (res) {\n          data = data.concat(res.data.data);\n\n          _this.setState({\n            materialList: data\n          });\n        });\n      });\n    };\n\n    _this.chageNum = function (index, value) {\n      var materialList = _this.state.materialList;\n      materialList[index].countNum = value;\n\n      _this.setState({\n        materialList: materialList\n      });\n    };\n\n    _this.state = {\n      username: \"\",\n      userList: [],\n      selectGoodsVisible: false,\n      wareHouseList: [],\n      deliverymode: null,\n      // 盘点方式\n      materialList: [],\n      selectKeys: [],\n      houseNo: null,\n      houseName: null,\n      units: {}\n    };\n    return _this;\n  }\n\n  _createClass(LunchCheck, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.getUnitList();\n      var id = this.props.match.params.id;\n      React.axios.get(\"sys/user/list\", \"\", function (res) {\n        _this2.setState({\n          userList: res.data.data\n        });\n      });\n\n      if (id) {\n        React.axios.get(\"api/wms/twarehousebill/info/\" + id, \"\", function (res) {\n          _this2.setState({\n            materialList: res.data.wareinventoryStockEntity,\n            number: res.data.number,\n            deliverymode: res.data.deliverymode,\n            houseNo: res.data.houseno\n          });\n\n          _this2.formRef.current.setFieldsValue({\n            name: res.data.name,\n            remark: res.data.remark,\n            userno: res.data.userno,\n            deliverymode: res.data.deliverymode,\n            housedate: moment(res.data.housedate)\n          });\n        });\n      } else {\n        this.formRef.current.setFieldsValue({\n          housedate: moment()\n        });\n      }\n\n      ;\n      this.getWareHouseList();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var userList = this.state.userList;\n      var deliverymodes = React.enums.deliverymodes;\n      var deliverymodeList = [];\n\n      for (var k in deliverymodes) {\n        deliverymodeList.push({\n          value: k,\n          name: deliverymodes[k]\n        });\n      }\n\n      var tableColumns = [{\n        title: \"物料编号\",\n        key: \"number\",\n        dataIndex: \"number\"\n      }, {\n        title: \"物料名称\",\n        key: \"name\",\n        dataIndex: \"name\"\n      }, {\n        title: \"单价\",\n        key: \"price\",\n        dataIndex: \"price\",\n        render: function render(text, record) {\n          return \"\".concat(record.price, \"\\u5143/\").concat(_this3.state.units[record.unit]);\n        }\n      }, {\n        title: \"盘点位置\",\n        render: function render(text, record) {\n          return /*#__PURE__*/React.createElement(_Breadcrumb, {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 21\n            }\n          }, /*#__PURE__*/React.createElement(_Breadcrumb.Item, {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 25\n            }\n          }, record.houseName), /*#__PURE__*/React.createElement(_Breadcrumb.Item, {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 25\n            }\n          }, record.locationName), /*#__PURE__*/React.createElement(_Breadcrumb.Item, {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 25\n            }\n          }, record.shelvesName));\n        }\n      }, {\n        title: \"库存数量\",\n        key: \"num\",\n        dataIndex: \"num\",\n        align: 'center'\n      }, {\n        title: \"金额\",\n        align: 'center',\n        render: function render(text, record) {\n          return \"\".concat(record.price * record.num, \"\\u5143\");\n        }\n      }, {\n        title: \"盘点数量\",\n        align: 'center',\n        render: function render(text, record, index) {\n          return /*#__PURE__*/React.createElement(_InputNumber, {\n            value: record.countNum,\n            min: 0,\n            onChange: _this3.chageNum.bind(_this3, index),\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 46\n            }\n          });\n        }\n      }, {\n        title: \"操作\",\n        width: \"80px\",\n        align: 'center',\n        render: function render(text, record, index) {\n          return /*#__PURE__*/React.createElement(Button, {\n            type: \"link\",\n            size: \"small\",\n            danger: true,\n            onClick: _this3.deleteGoods.bind(_this3, index),\n            icon: \"delete\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 47\n            }\n          }, \"\\u5220\\u9664\");\n        }\n      }];\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(_Form, {\n        labelCol: {\n          span: 5\n        },\n        ref: this.formRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Col, {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 24\n        },\n        md: {\n          span: 11\n        },\n        lg: {\n          span: 7\n        },\n        xl: {\n          span: 7\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u6807\\u9898\",\n        name: \"name\",\n        rules: [{\n          required: true,\n          message: \"标题不能为空\"\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        placeholder: \"\\u6807\\u9898\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 33\n        }\n      }))), /*#__PURE__*/React.createElement(_Col, {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 24\n        },\n        md: {\n          span: 11\n        },\n        lg: {\n          span: 7\n        },\n        xl: {\n          span: 7\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u8D1F\\u8D23\\u4EBA\",\n        name: \"userno\",\n        rules: [{\n          required: true,\n          message: \"负责人不能为空\"\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(_Select, {\n        placeholder: \"\\u8D1F\\u8D23\\u4EBA\",\n        onChange: function onChange(value, event) {\n          _this3.setState({\n            username: event.children\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 33\n        }\n      }, userList.map(function (item, index) {\n        return /*#__PURE__*/React.createElement(_Select.Option, {\n          key: item.userId.toString(),\n          value: item.userId.toString(),\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 45\n          }\n        }, item.name);\n      })))), /*#__PURE__*/React.createElement(_Col, {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 24\n        },\n        md: {\n          span: 11\n        },\n        lg: {\n          span: 7\n        },\n        xl: {\n          span: 7\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u5907\\u6CE8\",\n        name: \"remark\",\n        initialValue: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(_Input.TextArea, {\n        placeholder: \"100\\u4E2A\\u5B57\\u4EE5\\u5185\",\n        maxLength: 100,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 33\n        }\n      }))), /*#__PURE__*/React.createElement(_Col, {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 24\n        },\n        md: {\n          span: 11\n        },\n        lg: {\n          span: 7\n        },\n        xl: {\n          span: 7\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u76D8\\u70B9\\u65E5\\u671F\",\n        name: \"housedate\",\n        initialValue: \"\",\n        rules: [{\n          required: true,\n          message: \"盘点日期不能为空\"\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(_DatePicker, {\n        style: {\n          width: \"100%\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 33\n        }\n      }))), /*#__PURE__*/React.createElement(_Col, {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 24\n        },\n        md: {\n          span: 11\n        },\n        lg: {\n          span: 7\n        },\n        xl: {\n          span: 7\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u76D8\\u70B9\\u65B9\\u5F0F\",\n        name: \"deliverymode\",\n        rules: [{\n          required: true,\n          message: \"请选择盘点方式\"\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(_Select, {\n        placeholder: \"\\u76D8\\u70B9\\u65B9\\u5F0F\",\n        onChange: this.handleDeliverymode,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 33\n        }\n      }, deliverymodeList.map(function (item) {\n        return /*#__PURE__*/React.createElement(_Select.Option, {\n          key: item.value,\n          value: item.value,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 65\n          }\n        }, item.name);\n      })))))), this.state.deliverymode === 'warehouse' && /*#__PURE__*/React.createElement(_Select, {\n        placeholder: \"\\u9009\\u62E9\\u4ED3\\u5E93\",\n        style: {\n          width: 150\n        },\n        value: this.state.houseNo,\n        onChange: this.getMaterialBy,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 57\n        }\n      }, this.state.wareHouseList.map(function (item) {\n        return /*#__PURE__*/React.createElement(_Select.Option, {\n          key: item.number,\n          value: item.number,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 57\n          }\n        }, item.name);\n      })), this.state.deliverymode === 'material' && /*#__PURE__*/React.createElement(Button, {\n        type: \"primary\",\n        size: \"small\",\n        onClick: this.openSelectGoods,\n        icon: \"add\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 56\n        }\n      }, \"\\u9009\\u62E9\\u7269\\u6599\"), this.state.deliverymode === 'custom' && /*#__PURE__*/React.createElement(Button, {\n        type: \"primary\",\n        size: \"small\",\n        onClick: this.openSelectGoods,\n        icon: \"add\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 54\n        }\n      }, \"\\u6DFB\\u52A0\\u884C\"), /*#__PURE__*/React.createElement(Table, {\n        rowKey: \"id\",\n        columns: tableColumns,\n        data: this.state.materialList,\n        pager: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 24\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        align: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_Space, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        type: \"primary\",\n        onClick: this.submit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 25\n        }\n      }, \"\\u786E\\u5B9A\"), /*#__PURE__*/React.createElement(Button, {\n        onClick: function onClick() {\n          _this3.props.history.goBack();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 25\n        }\n      }, \"\\u53D6\\u6D88\"))), this.state.selectGoodsVisible && /*#__PURE__*/React.createElement(GoodsListModel, {\n        selectKeys: this.state.selectKeys,\n        onCancel: function onCancel() {\n          _this3.setState({\n            selectGoodsVisible: false\n          });\n        },\n        onOk: this.selectedGoods,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 49\n        }\n      }));\n    }\n  }]);\n\n  return LunchCheck;\n}(Component);\n\n;\nexport default LunchCheck;","map":{"version":3,"sources":["E:/project/environment-web/src/pages/inventory/goodsChecking/launchCheck.js"],"names":["React","Component","Button","Table","moment","GoodsListModel","LunchCheck","props","formRef","createRef","getUnitList","axios","post","res","obj","data","forEach","item","id","name","setState","units","submit","state","username","number","current","validateFields","then","values","match","params","housedate","format","type","deliverymode","houseno","houseNo","housename","houseName","wareinventoryStockEntity","materialList","url","message","success","history","goBack","openSelectGoods","selectGoodsVisible","deleteGoods","index","splice","getWareHouseList","get","page","limit","wareHouseList","handleDeliverymode","val","getMaterialBy","e","children","selectedGoods","selectKeys","concat","chageNum","value","countNum","userList","setFieldsValue","remark","userno","deliverymodes","enums","deliverymodeList","k","push","tableColumns","title","key","dataIndex","render","text","record","price","unit","locationName","shelvesName","align","num","bind","width","span","required","event","map","userId","toString"],"mappings":"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","sourcesContent":["import React,{Component} from \"react\";\r\nimport {Form,Input,Select,Row,Col,DatePicker,Space,InputNumber,Breadcrumb} from \"antd\";\r\nimport Button from \"@/components/button\";\r\nimport Table from \"@/components/table\";\r\nimport moment from \"moment\";\r\nimport GoodsListModel from './components/GoodsListModel';\r\n\r\nclass LunchCheck extends Component{\r\n    formRef = React.createRef();\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            username:\"\",\r\n            userList:[],\r\n            selectGoodsVisible:false,\r\n            wareHouseList: [],\r\n            deliverymode: null, // 盘点方式\r\n            materialList: [],\r\n            selectKeys: [],\r\n            houseNo: null,\r\n            houseName: null,\r\n            units: {}\r\n        };\r\n    };\r\n\r\n    componentDidMount(){\r\n        this.getUnitList();\r\n        const {id} = this.props.match.params;\r\n        React.axios.get(\"sys/user/list\",\"\",res => {\r\n            this.setState({userList:res.data.data});\r\n        });\r\n        if(id){\r\n            React.axios.get(\"api/wms/twarehousebill/info/\"+id,\"\",res => {\r\n                this.setState({\r\n                    materialList: res.data.wareinventoryStockEntity,\r\n                    number: res.data.number,\r\n                    deliverymode: res.data.deliverymode,\r\n                    houseNo: res.data.houseno\r\n                });\r\n                this.formRef.current.setFieldsValue({\r\n                    name: res.data.name,\r\n                    remark: res.data.remark,\r\n                    userno: res.data.userno,\r\n                    deliverymode: res.data.deliverymode,\r\n                    housedate: moment(res.data.housedate)\r\n                });\r\n            });\r\n        }else{\r\n            this.formRef.current.setFieldsValue({housedate:moment()});\r\n        };\r\n        this.getWareHouseList();\r\n    };\r\n\r\n    // 获取计量单位\r\n    getUnitList=()=>{\r\n        React.axios.post('api/wmsType/tmaterialtype/queryMaterialTypeList?number=unit',null,res=>{\r\n            let obj = {};\r\n            res.data.forEach(item=>{\r\n                obj[item.id] = item.name;\r\n            })\r\n            this.setState({units: obj});\r\n        })\r\n    }\r\n\r\n    /**\r\n     * @todo 提交表单\r\n     */\r\n    submit = () => {\r\n        const {username,number} = this.state;\r\n        this.formRef.current.validateFields().then((values) => {\r\n            values.id = this.props.match.params.id;\r\n            values.username = username;\r\n            values.number = number;\r\n            values.housedate = values.housedate.format(\"YYYY-MM-DD\");\r\n            values.type = \"4\";\r\n            if(values.deliverymode==='warehouse'){\r\n                values.houseno = this.state.houseNo;\r\n                values.housename = this.state.houseName;\r\n            }else{\r\n                values.houseno = null;\r\n                values.housename = null;\r\n            }\r\n            values.wareinventoryStockEntity = [...this.state.materialList];\r\n            let url = 'api/wms/twarehousebill/save';\r\n            if(values.id){\r\n                url = 'api/wms/twarehousebill/update';\r\n            }\r\n            React.axios.post(url,values,res => {\r\n                React.message.success('操作成功');\r\n                this.props.history.goBack();\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     * @todo 打开选择物料模态框\r\n     */\r\n    openSelectGoods = () => {\r\n        this.setState({selectGoodsVisible:true});\r\n    };\r\n\r\n    /**\r\n     * @todo 删除物料\r\n     */\r\n    deleteGoods = (index) => {\r\n        let materialList = [...this.state.materialList];\r\n        materialList.splice(index,1);\r\n        this.setState({materialList: materialList});\r\n    };\r\n\r\n    // 获取仓库\r\n    getWareHouseList=()=>{\r\n        React.axios.get('api/wms/twarehouse/list',{page:1,limit: 1000},res=>{\r\n            this.setState({wareHouseList: res.data.data});\r\n        })\r\n    }\r\n    // 监听盘点方式\r\n    handleDeliverymode=(val)=>{\r\n        this.setState({deliverymode: val});\r\n    }\r\n    // 选择仓库后，查询该仓库下的所有物料\r\n    getMaterialBy=(val,e)=>{\r\n        this.setState({\r\n            materialList: [],\r\n            houseNo: val,\r\n            houseName: e.children\r\n        });\r\n        React.axios.post(`api/wms/twarehousestock/selectMateriel?houseNumber=${val}`,null,res=>{\r\n            this.setState({materialList: res.data});\r\n        })\r\n    }\r\n    // 选择物料后回调\r\n    selectedGoods=(val)=>{\r\n        this.setState({\r\n            selectGoodsVisible: false,\r\n            selectKeys: val\r\n        });\r\n        let data = [];\r\n        val.forEach(res=>{\r\n            React.axios.get(`api/wms/twarehousestock/list?page=1&limit=1000&number=${res}`,null,res=>{\r\n                data = data.concat(res.data.data)\r\n                this.setState({materialList: data});\r\n            })\r\n        })\r\n        \r\n    }\r\n    // 盘点数量\r\n    chageNum = (index,value) => {\r\n        let {materialList} = this.state;\r\n        materialList[index].countNum = value;\r\n        this.setState({materialList});\r\n    };\r\n    render(){\r\n        const {userList} = this.state;\r\n        const deliverymodes = React.enums.deliverymodes\r\n        let deliverymodeList = [];\r\n        for(let k in deliverymodes){\r\n            deliverymodeList.push({\r\n                value: k,\r\n                name: deliverymodes[k]\r\n            })\r\n        }\r\n\r\n        const tableColumns = [\r\n            {\r\n                title:\"物料编号\",\r\n                key:\"number\",\r\n                dataIndex:\"number\",\r\n            },\r\n            {\r\n                title:\"物料名称\",\r\n                key:\"name\",\r\n                dataIndex:\"name\",\r\n            },\r\n            {\r\n                title:\"单价\",\r\n                key:\"price\",\r\n                dataIndex:\"price\",\r\n                render:(text,record) => {\r\n                    return `${record.price}元/${this.state.units[record.unit]}`;\r\n                },\r\n            },\r\n            {\r\n                title:\"盘点位置\",\r\n                render:(text,record) =>\r\n                    <Breadcrumb>\r\n                        <Breadcrumb.Item>{record.houseName}</Breadcrumb.Item>\r\n                        <Breadcrumb.Item>{record.locationName}</Breadcrumb.Item>\r\n                        <Breadcrumb.Item>{record.shelvesName}</Breadcrumb.Item>\r\n                    </Breadcrumb>\r\n            },\r\n            {\r\n                title:\"库存数量\",\r\n                key:\"num\",\r\n                dataIndex:\"num\",\r\n                align: 'center',\r\n            },\r\n            {\r\n                title:\"金额\",\r\n                align: 'center',\r\n                render:(text,record) => {\r\n                    return `${record.price*record.num}元`;\r\n                },\r\n            },\r\n            {\r\n                title:\"盘点数量\",\r\n                align: 'center',\r\n                render:(text,record,index) =><InputNumber value={record.countNum} min={0}  onChange={this.chageNum.bind(this,index)}/>\r\n            },\r\n            {\r\n                title:\"操作\",\r\n                width:\"80px\",\r\n                align: 'center',\r\n                render:(text,record,index) => <Button type=\"link\" size=\"small\" danger onClick={this.deleteGoods.bind(this,index)} icon=\"delete\">删除</Button>\r\n            },\r\n        ];\r\n\r\n        return(\r\n            <>\r\n                <Form\r\n                    labelCol={{span: 5}}\r\n                    ref={this.formRef}\r\n                >\r\n                    <Row>\r\n                        <Col xs={{span:24}} sm={{span:24}} md={{span:11}} lg={{span:7}} xl={{span:7}}>\r\n                            <Form.Item\r\n                                label=\"标题\"\r\n                                name=\"name\"\r\n                                rules={[\r\n                                    {required:true,message:\"标题不能为空\"}\r\n                                ]}\r\n                            >\r\n                                <Input placeholder=\"标题\"/>\r\n                            </Form.Item>\r\n                        </Col>\r\n                        <Col xs={{span:24}} sm={{span:24}} md={{span:11}} lg={{span:7}} xl={{span:7}}>\r\n                            <Form.Item\r\n                                label=\"负责人\"\r\n                                name=\"userno\"\r\n                                rules={[\r\n                                    {required:true,message:\"负责人不能为空\"}\r\n                                ]}\r\n                            >\r\n                                <Select\r\n                                    placeholder=\"负责人\"\r\n                                    onChange={(value,event) => {this.setState({username:event.children})}}\r\n                                >\r\n                                    {userList.map((item,index) => {\r\n                                        return(\r\n                                            <Select.Option\r\n                                                key={item.userId.toString()}\r\n                                                value={item.userId.toString()}\r\n                                            >\r\n                                                {item.name}\r\n                                            </Select.Option>\r\n                                        );\r\n                                    })}\r\n                                </Select>\r\n                            </Form.Item>\r\n                        </Col>\r\n                        <Col xs={{span:24}} sm={{span:24}} md={{span:11}} lg={{span:7}} xl={{span:7}}>\r\n                            <Form.Item\r\n                                label=\"备注\"\r\n                                name=\"remark\"\r\n                                initialValue=\"\"\r\n                            >\r\n                                <Input.TextArea placeholder=\"100个字以内\" maxLength={100}/>\r\n                            </Form.Item>\r\n                        </Col>\r\n                        <Col xs={{span:24}} sm={{span:24}} md={{span:11}} lg={{span:7}} xl={{span:7}}>\r\n                            <Form.Item\r\n                                label=\"盘点日期\"\r\n                                name=\"housedate\"\r\n                                initialValue=\"\"\r\n                                rules={[\r\n                                    {required:true,message:\"盘点日期不能为空\"}\r\n                                ]}\r\n                            >\r\n                                <DatePicker style={{width:\"100%\"}}/>\r\n                            </Form.Item>\r\n                        </Col>\r\n                        <Col xs={{span:24}} sm={{span:24}} md={{span:11}} lg={{span:7}} xl={{span:7}}>\r\n                            <Form.Item\r\n                                label=\"盘点方式\"\r\n                                name=\"deliverymode\"\r\n                                rules={[\r\n                                    {required:true,message:\"请选择盘点方式\"}\r\n                                ]}\r\n                            >\r\n                                <Select placeholder=\"盘点方式\" onChange={this.handleDeliverymode}>\r\n                                    {deliverymodeList.map(item=><Select.Option key={item.value} value={item.value}>{item.name}</Select.Option>)}\r\n                                </Select>\r\n                            </Form.Item>\r\n                        </Col>\r\n                    </Row>\r\n                </Form>\r\n                {this.state.deliverymode==='warehouse'&&<Select placeholder=\"选择仓库\" style={{width: 150}} value={this.state.houseNo} onChange={this.getMaterialBy}>\r\n                    {this.state.wareHouseList.map(item=><Select.Option key={item.number} value={item.number}>{item.name}</Select.Option>)}\r\n                </Select>}\r\n                {this.state.deliverymode==='material'&&<Button type=\"primary\" size=\"small\" onClick={this.openSelectGoods} icon=\"add\">选择物料</Button>}\r\n                {this.state.deliverymode==='custom'&&<Button type=\"primary\" size=\"small\" onClick={this.openSelectGoods} icon=\"add\">添加行</Button>}\r\n                \r\n                <Table\r\n                    rowKey=\"id\"\r\n                    columns={tableColumns}\r\n                    data={this.state.materialList}\r\n                    pager={false}\r\n                /><br/><br/>\r\n\r\n                <div align=\"center\">\r\n                    <Space>\r\n                        <Button type=\"primary\" onClick={this.submit}>确定</Button>\r\n                        <Button onClick={()=>{this.props.history.goBack()}}>取消</Button>\r\n                    </Space>\r\n                </div>\r\n\r\n                {this.state.selectGoodsVisible&&<GoodsListModel selectKeys={this.state.selectKeys} onCancel={()=>{this.setState({selectGoodsVisible: false})}} onOk={this.selectedGoods}/>}\r\n            </>\r\n        );\r\n    };\r\n};\r\nexport default LunchCheck;"]},"metadata":{},"sourceType":"module"}