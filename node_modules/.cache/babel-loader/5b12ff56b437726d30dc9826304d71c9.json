{"ast":null,"code":"import _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\technology\\\\components\\\\Alarm.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React, { Component } from 'react';\nimport './alarm.less';\n\nvar Alarm = /*#__PURE__*/function (_Component) {\n  _inherits(Alarm, _Component);\n\n  function Alarm(props) {\n    var _this;\n\n    _classCallCheck(this, Alarm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Alarm).call(this, props));\n\n    _this.info = function () {\n      var array = [],\n          propertise = _this.props.propertise;\n\n      if (propertise.length > 0) {\n        propertise.forEach(function (item) {\n          array.push(item.no);\n        });\n        React.axios.post('api/opcServer/getOpcServer15Data', array, function (res) {\n          _this.setState({\n            status: res.data\n          });\n\n          propertise.forEach(function (item) {\n            if (item.dataType === 'Boolean') {\n              if (res.data[item.no] === '1' || res.data[item.no] === 'true') {\n                item.value = 'normal';\n              } else {\n                item.value = 'stop';\n              }\n            } else if (item.dataType === 'Word') {\n              if (item.formatter(res.data[item.no])) {\n                item.value = 'normal';\n              } else {\n                item.value = 'stop';\n              }\n\n              item.dataType = 'Boolean';\n            } else {\n              item.value = parseInt(res.data[item.no]);\n            }\n          });\n\n          _this.setState({\n            propertise: propertise,\n            infoModal: true,\n            name: _this.props.name\n          });\n        });\n      }\n    };\n\n    _this.state = {\n      infoModal: false,\n      status: '',\n      value: {},\n      name: ''\n    };\n    return _this;\n  }\n\n  _createClass(Alarm, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null, !this.props.modalType && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"absolute alarm\",\n        style: {\n          top: this.props.top,\n          left: this.props.left\n        },\n        onClick: this.info,\n        title: this.props.name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 39\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        style: {\n          width: this.props.size ? this.props.size : '24px'\n        },\n        className: 'alarm-icon ' + this.state.status,\n        src: require('./images/' + this.state.status + '.png'),\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 17\n        }\n      })), this.props.modalType === 1 && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"absolute modal1\",\n        style: {\n          top: this.props.top,\n          left: this.props.left\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 44\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 17\n        }\n      }, this.props.modalData.title), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"value\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"val\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 40\n        }\n      }, this.props.modalData.formatter ? this.props.modalData.formatter(this.state.value[this.props.no]) : this.state.value[this.props.no]), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"unit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 201\n        }\n      }, this.props.modalData.unit))), this.props.modalType === 2 && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"absolute modal2\",\n        style: {\n          top: this.props.top,\n          left: this.props.left\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 44\n        }\n      }, this.props.modalData.map(function (item, index) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: index,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 59\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"title\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 21\n          }\n        }, item.title), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"value\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 21\n          }\n        }, _this2.state.value[item.no]), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"unit\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 21\n          }\n        }, item.unit));\n      })), this.props.modalType === 3 && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"absolute modal3\",\n        style: {\n          top: this.props.top,\n          left: this.props.left,\n          bottom: this.props.bottom,\n          right: this.props.right\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 44\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 17\n        }\n      }, this.props.title), this.props.modalData.map(function (item, index) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: index,\n          className: \"val-box\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 60\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"sub_title\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 21\n          }\n        }, item.title), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"value\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 21\n          }\n        }, _this2.state.value[item.no]), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"unit\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 21\n          }\n        }, item.unit));\n      })), this.props.modalType === 4 && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"absolute modal4\",\n        style: {\n          top: this.props.top,\n          left: this.props.left,\n          bottom: this.props.bottom,\n          right: this.props.right\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 44\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 17\n        }\n      }, this.props.title), this.props.modalData.map(function (item, index) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: index,\n          className: \"value\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 60\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"val\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 21\n          }\n        }, _this2.state.value[item.no]), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"unit\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 21\n          }\n        }, item.unit));\n      })), this.props.modalType === 5 && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"absolute modal5\",\n        onClick: this.info,\n        style: {\n          top: this.props.top,\n          left: this.props.left,\n          bottom: this.props.bottom,\n          right: this.props.right\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 44\n        }\n      }, this.state.name), this.state.infoModal && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 38\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }\n      }, this.state.name), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modal-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 21\n        }\n      }, this.state.propertise.map(function (item, index) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: index,\n          className: item.dataType === 'Boolean' ? 'form-item' : 'block',\n          style: {\n            display: 'inline-block',\n            width: item.width\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 69\n          }\n        }, item.dataType === 'Boolean' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"img\", {\n          className: \"alarm-icon\",\n          style: {\n            width: '24px'\n          },\n          src: require('./images/' + item.value + '.png'),\n          alt: \"\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 33\n          }\n        }), /*#__PURE__*/React.createElement(\"label\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 33\n          }\n        }, item.name)), item.dataType !== 'Boolean' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"label\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 33\n          }\n        }, item.name), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"value\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 33\n          }\n        }, item.value), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"unit\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 33\n          }\n        }, item.unit)));\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"close-btn\",\n        onClick: function onClick() {\n          _this2.setState({\n            infoModal: false\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 21\n        }\n      }, \"\\u5173\\u95ED\"))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(prevProps) {\n      if (prevProps.modalType === 1) {\n        var value = {};\n\n        if (prevProps.modalData.formatter) {\n          value[prevProps.no] = prevProps.modalData.formatter(prevProps.status[prevProps.no]);\n        } else {\n          value[prevProps.no] = prevProps.status[prevProps.no];\n        }\n\n        return {\n          value: value\n        };\n      } else if (prevProps.modalType === 2 || prevProps.modalType === 3 || prevProps.modalType === 4) {\n        var _value = {};\n        prevProps.modalData.forEach(function (item) {\n          if (item.formatter) {\n            _value[item.no] = item.formatter(prevProps.status[item.no]);\n          } else {\n            _value[item.no] = prevProps.status[item.no];\n          }\n        });\n        return {\n          value: _value\n        };\n      } else if (prevProps.modalType === 5) {\n        if (prevProps.allStatus.length === 0) {\n          return {\n            name: prevProps.name\n          };\n        } else {\n          var name = '';\n\n          var _iterator = _createForOfIteratorHelper(prevProps.allStatus),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var val = _step.value;\n\n              if (prevProps.status[val] === 'true') {\n                name = prevProps[val];\n                break;\n              }\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n\n          return {\n            name: name\n          };\n        }\n      } else {\n        if (prevProps.type === 1) {\n          if (prevProps.status[prevProps.status1] === '1' || prevProps.status[prevProps.status1] === 'true') {\n            // 故障\n            return {\n              status: 'error'\n            };\n          } else {\n            if (prevProps.status[prevProps.status2] === '1' || prevProps.status[prevProps.status2] === 'true') {\n              // 运行\n              return {\n                status: 'normal'\n              };\n            } else {\n              // 停止\n              return {\n                status: 'stop'\n              };\n            }\n          }\n        } else if (prevProps.type === 2) {\n          if (prevProps.status[prevProps.status1] === '1' || prevProps.status[prevProps.status1] === 'true') {\n            // 故障\n            return {\n              status: 'error'\n            };\n          } else {\n            // if (prevProps.status3 === 'AB.PLC5.WSXT_BSBCKF1_Open_Place'){\n            //     debugger\n            // }\n            if (prevProps.status[prevProps.status2] === '1' || prevProps.status[prevProps.status2] === 'true') {\n              // 关到位\n              return {\n                status: 'close'\n              };\n            } else if (prevProps.status[prevProps.status3] === '1' || prevProps.status[prevProps.status3] === 'true') {\n              // 开到位\n              return {\n                status: 'normal'\n              };\n            } else if (prevProps.status[prevProps.status3] !== '1' && prevProps.status[prevProps.status3] !== 'true' && prevProps.status[prevProps.status2] !== '1' && prevProps.status[prevProps.status2] !== 'true') {\n              // 半开半关\n              return {\n                status: 'normal_close'\n              };\n            }\n          }\n        } else if (prevProps.type === 3) {\n          if (prevProps.status[prevProps.status1] === '1' || prevProps.status[prevProps.status1] === 'true' || prevProps.status[prevProps.status2] === '1' || prevProps.status[prevProps.status2] === 'true') {\n            // 运行中\n            return {\n              status: 'normal'\n            };\n          } else {\n            return {\n              status: 'error'\n            };\n          }\n        } else if (prevProps.type === 4) {\n          if (prevProps.status[prevProps.status1] === 'true' && prevProps.status[prevProps.status2] === 'true') {\n            // 是否故障\n            return {\n              status: 'error'\n            };\n          } else if (prevProps.status[prevProps.status3] === 'true' || prevProps.status[prevProps.status4] === 'true') {\n            // 运行\n            return {\n              status: 'normal'\n            };\n          } else {\n            return {\n              status: 'stop'\n            };\n          }\n        } else if (prevProps.type === 5) {\n          // 只有运行或不运行的状态\n          if (prevProps.status[prevProps.status1] === '1' || prevProps.status[prevProps.status1] === 'true') {\n            // 运行中\n            return {\n              status: 'normal'\n            };\n          } else {\n            return {\n              status: 'stop'\n            };\n          }\n        } else if (prevProps.type === 6) {\n          if (prevProps.status[prevProps.status1] === 'true') {\n            // 开到位\n            return {\n              status: 'normal'\n            };\n          } else if (prevProps.status[prevProps.status2] === 'true') {\n            // 关到位\n            return {\n              status: 'close'\n            };\n          } else {\n            // 半开半关\n            return {\n              status: 'normal_close'\n            };\n          }\n        } else if (prevProps.type === 7) {\n          if (prevProps.status[prevProps.status1] === 'true' || prevProps.status[prevProps.status2] === 'true') {\n            return {\n              status: 'error'\n            };\n          } else if (prevProps.status[prevProps.status3] === 'true') {\n            return {\n              status: 'normal'\n            };\n          } else {\n            return {\n              status: 'stop'\n            };\n          }\n        } else if (prevProps.type === 8) {\n          // 故障、运行\n          if (prevProps.status[prevProps.status1] === 'true') {\n            return {\n              status: 'error'\n            };\n          } else {\n            return {\n              status: 'normal'\n            };\n          }\n        } else if (prevProps.type === 9) {\n          // 出水调节阀\n          if (prevProps.formatter) {\n            return {\n              status: prevProps.formatter(prevProps.status[prevProps.status1])\n            };\n          } else {\n            if (parseInt(prevProps.status[prevProps.status1]) === 0) {\n              return {\n                status: 'close'\n              };\n            } else if (parseInt(prevProps.status[prevProps.status1]) === 1) {\n              return {\n                status: 'normal'\n              };\n            } else if (parseInt(prevProps.status[prevProps.status1]) === 2 || parseInt(prevProps.status[prevProps.status1]) === 4) {\n              return {\n                status: 'error'\n              };\n            } else if (parseInt(prevProps.status[prevProps.status1]) === 16) {\n              return {\n                status: 'normal_close'\n              };\n            } else {\n              return {\n                status: 'stop'\n              };\n            }\n          }\n        }\n      }\n    }\n  }]);\n\n  return Alarm;\n}(Component);\n\nexport default Alarm;","map":{"version":3,"sources":["E:/project/environment-web/src/pages/technology/components/Alarm.js"],"names":["React","Component","Alarm","props","info","array","propertise","length","forEach","item","push","no","axios","post","res","setState","status","data","dataType","value","formatter","parseInt","infoModal","name","state","modalType","top","left","width","size","require","modalData","title","unit","map","index","bottom","right","display","prevProps","allStatus","val","type","status1","status2","status3","status4"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './alarm.less';\r\n\r\nclass Alarm extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            infoModal: false,\r\n            status: '',\r\n            value: {},\r\n            name: ''\r\n        }\r\n    }\r\n    static getDerivedStateFromProps(prevProps){\r\n        if (prevProps.modalType === 1){\r\n            let value = {};\r\n            if (prevProps.modalData.formatter){\r\n                value[prevProps.no] = prevProps.modalData.formatter(prevProps.status[prevProps.no]);\r\n            }else{\r\n                value[prevProps.no] = prevProps.status[prevProps.no];\r\n            }\r\n            return { value: value }\r\n        } else if (prevProps.modalType === 2 || prevProps.modalType === 3 || prevProps.modalType === 4) {\r\n            let value = {};\r\n            prevProps.modalData.forEach(item=>{\r\n                if (item.formatter){\r\n                    value[item.no] = item.formatter(prevProps.status[item.no]);\r\n                }else{\r\n                    value[item.no] = prevProps.status[item.no];\r\n                }\r\n            })\r\n            return { value: value }\r\n        } else if (prevProps.modalType === 5){\r\n            if (prevProps.allStatus.length === 0){\r\n                return { name: prevProps.name };\r\n            }else{\r\n                let name = '';\r\n                for (let val of prevProps.allStatus){\r\n                    if(prevProps.status[val] === 'true'){\r\n                        name = prevProps[val];\r\n                        break;\r\n                    }\r\n                }\r\n                return {name: name};\r\n            }\r\n        }else{\r\n            if (prevProps.type === 1) {\r\n                if (prevProps.status[prevProps.status1] === '1' || prevProps.status[prevProps.status1] === 'true') { // 故障\r\n                    return { status: 'error' }\r\n                } else {\r\n                    if (prevProps.status[prevProps.status2] === '1' || prevProps.status[prevProps.status2] === 'true') { // 运行\r\n                        return { status: 'normal' }\r\n                    } else { // 停止\r\n                        return { status: 'stop' }\r\n                    }\r\n                }\r\n            } else if (prevProps.type === 2){\r\n                if (prevProps.status[prevProps.status1] === '1' || prevProps.status[prevProps.status1] === 'true') { // 故障\r\n                    return { status: 'error' }\r\n                } else {\r\n                    // if (prevProps.status3 === 'AB.PLC5.WSXT_BSBCKF1_Open_Place'){\r\n                    //     debugger\r\n                    // }\r\n                    if (prevProps.status[prevProps.status2] === '1' || prevProps.status[prevProps.status2] === 'true') { // 关到位\r\n                        return { status: 'close' }\r\n                    } else if (prevProps.status[prevProps.status3] === '1' || prevProps.status[prevProps.status3] === 'true') { // 开到位\r\n                        return { status: 'normal' }\r\n                    } else if (prevProps.status[prevProps.status3] !== '1' && prevProps.status[prevProps.status3] !== 'true' && prevProps.status[prevProps.status2] !== '1' && prevProps.status[prevProps.status2] !== 'true'){ // 半开半关\r\n                        return { status: 'normal_close' }\r\n                    }\r\n                }\r\n            } else if (prevProps.type === 3) {\r\n                if (prevProps.status[prevProps.status1] === '1' || prevProps.status[prevProps.status1] === 'true' || prevProps.status[prevProps.status2] === '1' || prevProps.status[prevProps.status2] === 'true') { // 运行中\r\n                    return { status: 'normal' }\r\n                } else {\r\n                    return { status: 'error' }\r\n                }\r\n            } else if (prevProps.type === 4){\r\n                if (prevProps.status[prevProps.status1] === 'true' && prevProps.status[prevProps.status2] === 'true') { // 是否故障\r\n                    return { status: 'error' }\r\n                } else if (prevProps.status[prevProps.status3] === 'true' || prevProps.status[prevProps.status4] === 'true') { // 运行\r\n                    return { status: 'normal' }\r\n                } else {\r\n                    return { status: 'stop' }\r\n                }\r\n            } else if (prevProps.type === 5){ // 只有运行或不运行的状态\r\n                if (prevProps.status[prevProps.status1] === '1' || prevProps.status[prevProps.status1] === 'true') { // 运行中\r\n                    return { status: 'normal' }\r\n                } else {\r\n                    return { status: 'stop' }\r\n                }\r\n            } else if (prevProps.type === 6) { \r\n                if (prevProps.status[prevProps.status1] === 'true') { // 开到位\r\n                    return { status: 'normal' }\r\n                } else if (prevProps.status[prevProps.status2] === 'true') { // 关到位\r\n                    return { status: 'close' }\r\n                } else { // 半开半关\r\n                    return { status: 'normal_close' }\r\n                }\r\n            } else if (prevProps.type === 7) {\r\n                if (prevProps.status[prevProps.status1] === 'true' || prevProps.status[prevProps.status2] === 'true') {\r\n                    return { status: 'error' }\r\n                } else if (prevProps.status[prevProps.status3] === 'true') {\r\n                    return { status: 'normal' }\r\n                } else {\r\n                    return { status: 'stop' }\r\n                }\r\n            } else if (prevProps.type === 8){ // 故障、运行\r\n                if (prevProps.status[prevProps.status1] === 'true') {\r\n                    return { status: 'error' }\r\n                } else {\r\n                    return { status: 'normal' }\r\n                }\r\n            } else if (prevProps.type === 9) { // 出水调节阀\r\n                if (prevProps.formatter){\r\n                    return { status: prevProps.formatter(prevProps.status[prevProps.status1]) };\r\n                }else{\r\n                    if (parseInt(prevProps.status[prevProps.status1]) === 0) {\r\n                        return { status: 'close' }\r\n                    } else if (parseInt(prevProps.status[prevProps.status1]) === 1) {\r\n                        return { status: 'normal' }\r\n                    } else if (parseInt(prevProps.status[prevProps.status1]) === 2 || parseInt(prevProps.status[prevProps.status1]) === 4) {\r\n                        return { status: 'error' }\r\n                    } else if (parseInt(prevProps.status[prevProps.status1]) === 16) {\r\n                        return { status: 'normal_close' }\r\n                    } else {\r\n                        return { status: 'stop' }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    info=()=>{\r\n        let array = [], propertise = this.props.propertise;\r\n        if (propertise.length > 0){\r\n            propertise.forEach(item => {\r\n                array.push(item.no);\r\n            })\r\n            React.axios.post('api/opcServer/getOpcServer15Data', array, res => {\r\n                this.setState({ status: res.data });\r\n                propertise.forEach(item => {\r\n                    if (item.dataType === 'Boolean') {\r\n                        if (res.data[item.no] === '1' || res.data[item.no] === 'true') {\r\n                            item.value = 'normal';\r\n                        }else{\r\n                            item.value = 'stop';\r\n                        }\r\n                    } else if (item.dataType === 'Word'){\r\n                        if (item.formatter(res.data[item.no])){\r\n                            item.value = 'normal';\r\n                        }else{\r\n                            item.value = 'stop';\r\n                        }\r\n                        item.dataType = 'Boolean';\r\n                    } else {\r\n                        item.value = parseInt(res.data[item.no]);\r\n                    }\r\n                })\r\n                this.setState({ propertise: propertise, infoModal: true, name: this.props.name });\r\n            })\r\n        }\r\n    }\r\n    render() {\r\n        return <>\r\n            {!this.props.modalType && <div className=\"absolute alarm\" style={{ top: this.props.top, left: this.props.left }} onClick={this.info} title={this.props.name}>\r\n                <img style={{ width: this.props.size ? this.props.size : '24px'}} className={'alarm-icon ' + this.state.status} src={require('./images/'+this.state.status+'.png')} alt=\"\" />\r\n            </div>}\r\n\r\n            {this.props.modalType === 1 && <div className=\"absolute modal1\" style={{ top: this.props.top, left: this.props.left }}>\r\n                <div className=\"title\">{this.props.modalData.title}</div>\r\n                <div className=\"value\"><span className=\"val\">{this.props.modalData.formatter ? this.props.modalData.formatter(this.state.value[this.props.no]) : this.state.value[this.props.no]}</span><span className=\"unit\">{this.props.modalData.unit}</span></div>\r\n            </div>}\r\n\r\n            {this.props.modalType === 2 && <div className=\"absolute modal2\" style={{ top: this.props.top, left: this.props.left }}>\r\n                {this.props.modalData.map((item,index) => <div key= { index }>\r\n                    <span className=\"title\">{item.title}</span>\r\n                    <span className=\"value\">{this.state.value[item.no]}</span>\r\n                    <span className=\"unit\">{item.unit}</span>\r\n                </div>)}\r\n            </div>}\r\n\r\n            {this.props.modalType === 3 && <div className=\"absolute modal3\" style={{ top: this.props.top, left: this.props.left, bottom: this.props.bottom, right: this.props.right }}>\r\n                <div className=\"title\">{this.props.title}</div>\r\n                {this.props.modalData.map((item, index) => <div key={index} className=\"val-box\">\r\n                    <span className=\"sub_title\">{item.title}</span>\r\n                    <span className=\"value\">{this.state.value[item.no]}</span>\r\n                    <span className=\"unit\">{item.unit}</span>\r\n                </div>)}\r\n            </div>}\r\n\r\n            {this.props.modalType === 4 && <div className=\"absolute modal4\" style={{ top: this.props.top, left: this.props.left, bottom: this.props.bottom, right: this.props.right }}>\r\n                <div className=\"title\">{this.props.title}</div>\r\n                {this.props.modalData.map((item, index) => <div key={index} className=\"value\">\r\n                    <span className=\"val\">{this.state.value[item.no]}</span>\r\n                    <span className=\"unit\">{item.unit}</span>\r\n                </div>)}\r\n            </div>}\r\n\r\n            {this.props.modalType === 5 && <div className=\"absolute modal5\" onClick={this.info} style={{ top: this.props.top, left: this.props.left, bottom: this.props.bottom, right: this.props.right }}>\r\n                {this.state.name}\r\n            </div>}\r\n\r\n            {this.state.infoModal && <div className=\"modal\">\r\n                <div className=\"modal-box\">\r\n                    <div className=\"modal-title\">{this.state.name}</div>\r\n                    <div className=\"modal-body\">\r\n                        {this.state.propertise.map((item, index) => <div key={index} className={item.dataType === 'Boolean' ? 'form-item' : 'block'} style={{ display: 'inline-block',width: item.width}}>\r\n                            {item.dataType === 'Boolean' && <>\r\n                                <img className=\"alarm-icon\" style={{ width: '24px' }} src={require('./images/' + item.value + '.png')} alt=\"\" />\r\n                                <label>{item.name}</label>\r\n                            </>}\r\n                            \r\n                            {item.dataType !== 'Boolean' && <>\r\n                                <label>{item.name}</label>\r\n                                <span className=\"value\">{item.value}</span>\r\n                                <span className=\"unit\">{item.unit}</span>\r\n                            </>}\r\n                        </div>)}\r\n                    </div>\r\n                    <div className=\"close-btn\" onClick={() => { this.setState({ infoModal: false }) }}>关闭</div>\r\n                </div>\r\n            </div>\r\n            }\r\n        </>\r\n    }\r\n}\r\nexport default Alarm;"]},"metadata":{},"sourceType":"module"}