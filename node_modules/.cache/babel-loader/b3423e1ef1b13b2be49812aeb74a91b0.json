{"ast":null,"code":"import \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\message\\\\Index.js\";\nimport React, { Component } from 'react';\nimport Table from '@/components/table';\nimport Button from '@/components/button';\n\nvar Message = /*#__PURE__*/function (_Component) {\n  _inherits(Message, _Component);\n\n  function Message() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Message);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Message)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.tableRef = React.createRef();\n\n    _this.details = function (res) {\n      var unreadCount = sessionStorage.getItem('unreadCount');\n\n      if (unreadCount && unreadCount !== '0') {\n        unreadCount *= 1;\n        unreadCount -= 1;\n        sessionStorage.setItem('unreadCount', unreadCount);\n      }\n\n      React.axios.get(\"msg/tmessage/checkRead/\".concat(res.id), null, function () {\n        _this.props.history.push(\"/\".concat(React.Version, \"/message/allocation/\").concat(res.bizId));\n      });\n    };\n\n    _this.query = function () {\n      _this.tableRef.reload();\n    };\n\n    return _this;\n  }\n\n  _createClass(Message, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var columns = [{\n        title: '消息标题',\n        dataIndex: 'title',\n        key: 'title'\n      }, {\n        title: '创建时间',\n        dataIndex: 'createTime',\n        key: 'createTime'\n      }, {\n        title: '消息类型',\n        align: 'center',\n        render: function render(txt, res) {\n          return React.enums.messageType[res.type];\n        }\n      }, {\n        title: '状态',\n        align: 'center',\n        width: '100px',\n        render: function render(txt, res) {\n          return React.enums.readStatus[res.status];\n        }\n      }, {\n        title: '操作',\n        align: 'center',\n        render: function render(txt, res) {\n          return /*#__PURE__*/React.createElement(Button, {\n            type: \"link\",\n            size: \"small\",\n            onClick: _this2.details.bind(_this2, res),\n            icon: \"info\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 38\n            }\n          }, \"\\u8BE6\\u60C5\");\n        }\n      }];\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(_Form, {\n        className: \"query-tools\",\n        layout: \"inline\",\n        onFinish: this.query,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        placeholder: \"\\u6D88\\u606F\\u6807\\u9898\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        type: \"primary\",\n        icon: \"search\",\n        htmlType: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 25\n        }\n      }, \"\\u641C\\u7D22\"))), /*#__PURE__*/React.createElement(Table, {\n        columns: columns,\n        method: \"get\",\n        onRef: function onRef(ref) {\n          return _this2.tableRef = ref;\n        },\n        rowKey: \"id\",\n        url: \"msg/tmessage/list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }\n      }));\n    }\n  }]);\n\n  return Message;\n}(Component);\n\nexport default Message;","map":{"version":3,"sources":["E:/project/environment-web/src/pages/message/Index.js"],"names":["React","Component","Table","Button","Message","tableRef","createRef","details","res","unreadCount","sessionStorage","getItem","setItem","axios","get","id","props","history","push","Version","bizId","query","reload","columns","title","dataIndex","key","align","render","txt","enums","messageType","type","width","readStatus","status","bind","ref"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {Form, Input} from 'antd';\r\nimport Table from '@/components/table';\r\nimport Button from '@/components/button';\r\n\r\nclass Message extends Component {\r\n    tableRef = React.createRef();\r\n    // 详情\r\n    details=(res)=>{\r\n        let unreadCount = sessionStorage.getItem('unreadCount');\r\n        if(unreadCount&&unreadCount!=='0'){\r\n            unreadCount*=1;\r\n            unreadCount-=1;\r\n            sessionStorage.setItem('unreadCount',unreadCount);\r\n        }\r\n        React.axios.get(`msg/tmessage/checkRead/${res.id}`,null,()=>{\r\n            this.props.history.push(`/${React.Version}/message/allocation/${res.bizId}`);\r\n        })\r\n    }\r\n    // 获取数据\r\n    query=()=>{\r\n        this.tableRef.reload();\r\n    }\r\n    render() {\r\n        const columns =[\r\n            {\r\n                title: '消息标题',\r\n                dataIndex: 'title',\r\n                key: 'title',\r\n            },\r\n            {\r\n                title: '创建时间',\r\n                dataIndex: 'createTime',\r\n                key: 'createTime',\r\n            },\r\n            {\r\n                title: '消息类型',\r\n                align: 'center',\r\n                render: (txt,res) => {\r\n                    return React.enums.messageType[res.type]\r\n                }\r\n            },\r\n            {\r\n                title: '状态',\r\n                align: 'center',\r\n                width: '100px',\r\n                render: (txt,res)=> React.enums.readStatus[res.status]\r\n            },\r\n            {\r\n                title: '操作',\r\n                align: 'center',\r\n                render: (txt,res) => <Button type=\"link\" size=\"small\" onClick={this.details.bind(this,res)} icon=\"info\">详情</Button>\r\n            },\r\n        ]\r\n        return (\r\n            <>\r\n                <Form className=\"query-tools\" layout=\"inline\" onFinish={this.query}>\r\n                    <Form.Item>\r\n                        <Input placeholder=\"消息标题\"/>\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        <Button type=\"primary\" icon=\"search\" htmlType=\"submit\">搜索</Button>\r\n                    </Form.Item>\r\n                </Form>\r\n                <Table columns={columns} method=\"get\" onRef={ref=>this.tableRef = ref} rowKey=\"id\" url=\"msg/tmessage/list\" />\r\n            </>\r\n        );\r\n    }\r\n}\r\n \r\nexport default Message;"]},"metadata":{},"sourceType":"module"}