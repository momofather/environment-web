{"ast":null,"code":"import \"antd/es/tabs/style\";\nimport _Tabs from \"antd/es/tabs\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/date-picker/style\";\nimport _DatePicker from \"antd/es/date-picker\";\nimport _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\dataAnalysis\\\\waterQuality\\\\index.js\";\nimport React, { Component } from 'react';\nimport Button from '@/components/button';\nimport ReactEcharts from 'echarts-for-react';\nimport moment from 'moment';\n\nvar Index = /*#__PURE__*/function (_Component) {\n  _inherits(Index, _Component);\n\n  function Index(props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Index).call(this, props));\n    _this.formRef = React.createRef();\n    _this.ref = null;\n\n    _this.getData = function (_ref) {\n      var startTime = _ref.startTime,\n          endTime = _ref.endTime;\n\n      if (startTime) {\n        startTime = moment(startTime).format('yyyy-MM-DD 00:00:00');\n      }\n\n      if (endTime) {\n        endTime = moment(endTime).format('yyyy-MM-DD 23:59:59');\n      }\n\n      React.axios.get('api/inCodOrTp/queryList', {\n        startTime: startTime,\n        endTime: endTime\n      }, function (res) {\n        _this.setState({\n          data: res.data\n        }, function () {\n          _this.onChange('1');\n        });\n      });\n    };\n\n    _this.onChange = function (index) {\n      var xAxis = [],\n          inWater = [],\n          outWater = [];\n\n      _this.state.data.forEach(function (item) {\n        xAxis.push(item.gainTime);\n\n        if (index === '1') {\n          inWater.push(item.inCod);\n          outWater.push(item.outCod);\n        } else if (index === '2') {\n          inWater.push(item.inNh3N);\n          outWater.push(item.outNh3N);\n        } else if (index === '3') {\n          inWater.push(item.inTp);\n          outWater.push(item.outTp);\n        } else if (index === '4') {\n          inWater.push(item.inTn);\n          outWater.push(item.outTn);\n        } else if (index === '5') {\n          inWater.push(item.inPh);\n          outWater.push(item.outPh);\n        }\n      });\n\n      var options = _this.state.options;\n      options.xAxis.data = xAxis;\n      options.series = [{\n        name: '进水',\n        data: inWater,\n        type: 'line',\n        smooth: true\n      }, {\n        name: '出水',\n        data: outWater,\n        type: 'line',\n        smooth: true\n      }];\n\n      _this.ref.getEchartsInstance().clear();\n\n      _this.ref.getEchartsInstance().setOption(options);\n\n      _this.setState({\n        activeKey: index\n      });\n    };\n\n    _this.query = function (values) {\n      _this.getData({\n        startTime: values.date[0],\n        endTime: values.date[1]\n      });\n    };\n\n    _this.state = {\n      activeKey: '1',\n      data: [],\n      options: {\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross'\n          }\n        },\n        legend: {\n          data: ['进水', '出水'],\n          top: 0\n        },\n        grid: {\n          bottom: 40,\n          top: 30,\n          right: 40,\n          left: 40\n        },\n        xAxis: {\n          type: 'category',\n          boundaryGap: false,\n          data: [],\n          axisLabel: {\n            formatter: function formatter(value) {\n              return \"\".concat(moment(value).format('yyyy-MM-DD'), \"\\n\").concat(moment(value).format('HH:mm'));\n            }\n          }\n        },\n        yAxis: {\n          type: 'value'\n        },\n        series: []\n      }\n    };\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.formRef.current.setFieldsValue({\n        date: [moment(), moment()]\n      });\n      this.getData({\n        startTime: new Date(),\n        endTime: new Date()\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"water-quality\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(_Form, {\n        layout: \"inline\",\n        ref: this.formRef,\n        onFinish: this.query,\n        className: \"query-tools\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u65E5\\u671F\",\n        name: \"date\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_DatePicker.RangePicker, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        icon: \"search\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 25\n        }\n      }, \"\\u641C\\u7D22\"), \"\\xA0\")), /*#__PURE__*/React.createElement(_Tabs, {\n        type: \"card\",\n        activeKey: this.state.activeKey,\n        onChange: this.onChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_Tabs.TabPane, {\n        tab: \"COD\",\n        key: \"1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }\n      }, this.state.activeKey === '1' && /*#__PURE__*/React.createElement(ReactEcharts, {\n        ref: function ref(e) {\n          _this2.ref = e;\n        },\n        option: this.state.options,\n        style: {\n          height: '400px',\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 58\n        }\n      })), /*#__PURE__*/React.createElement(_Tabs.TabPane, {\n        tab: \"NH3-N\",\n        key: \"2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }\n      }, this.state.activeKey === '2' && /*#__PURE__*/React.createElement(ReactEcharts, {\n        ref: function ref(e) {\n          _this2.ref = e;\n        },\n        option: this.state.options,\n        style: {\n          height: '400px',\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 58\n        }\n      })), /*#__PURE__*/React.createElement(_Tabs.TabPane, {\n        tab: \"TP\",\n        key: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }\n      }, this.state.activeKey === '3' && /*#__PURE__*/React.createElement(ReactEcharts, {\n        ref: function ref(e) {\n          _this2.ref = e;\n        },\n        option: this.state.options,\n        style: {\n          height: '400px',\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 58\n        }\n      })), /*#__PURE__*/React.createElement(_Tabs.TabPane, {\n        tab: \"TN\",\n        key: \"4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }\n      }, this.state.activeKey === '4' && /*#__PURE__*/React.createElement(ReactEcharts, {\n        ref: function ref(e) {\n          _this2.ref = e;\n        },\n        option: this.state.options,\n        style: {\n          height: '400px',\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 58\n        }\n      })), /*#__PURE__*/React.createElement(_Tabs.TabPane, {\n        tab: \"PH\",\n        key: \"5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }\n      }, this.state.activeKey === '5' && /*#__PURE__*/React.createElement(ReactEcharts, {\n        ref: function ref(e) {\n          _this2.ref = e;\n        },\n        option: this.state.options,\n        style: {\n          height: '400px',\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 58\n        }\n      }))));\n    }\n  }]);\n\n  return Index;\n}(Component);\n\nexport default Index;","map":{"version":3,"sources":["E:/project/environment-web/src/pages/dataAnalysis/waterQuality/index.js"],"names":["React","Component","Button","ReactEcharts","moment","Index","props","formRef","createRef","ref","getData","startTime","endTime","format","axios","get","res","setState","data","onChange","index","xAxis","inWater","outWater","state","forEach","item","push","gainTime","inCod","outCod","inNh3N","outNh3N","inTp","outTp","inTn","outTn","inPh","outPh","options","series","name","type","smooth","getEchartsInstance","clear","setOption","activeKey","query","values","date","tooltip","trigger","axisPointer","legend","top","grid","bottom","right","left","boundaryGap","axisLabel","formatter","value","yAxis","current","setFieldsValue","Date","e","height","width"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,YAAP,MAAyB,mBAAzB;AACA,OAAOC,MAAP,MAAmB,QAAnB;;IACMC,K;;;AAGF,iBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,+EAAMA,KAAN;AADc,UAFlBC,OAEkB,GAFRP,KAAK,CAACQ,SAAN,EAEQ;AAAA,UADlBC,GACkB,GADZ,IACY;;AAAA,UA2ClBC,OA3CkB,GA2CR,gBAA4B;AAAA,UAAzBC,SAAyB,QAAzBA,SAAyB;AAAA,UAAdC,OAAc,QAAdA,OAAc;;AAClC,UAAID,SAAJ,EAAe;AACXA,QAAAA,SAAS,GAAGP,MAAM,CAACO,SAAD,CAAN,CAAkBE,MAAlB,CAAyB,qBAAzB,CAAZ;AACH;;AACD,UAAID,OAAJ,EAAa;AACTA,QAAAA,OAAO,GAAGR,MAAM,CAACQ,OAAD,CAAN,CAAgBC,MAAhB,CAAuB,qBAAvB,CAAV;AACH;;AACDb,MAAAA,KAAK,CAACc,KAAN,CAAYC,GAAZ,CAAgB,yBAAhB,EAA2C;AAAEJ,QAAAA,SAAS,EAAEA,SAAb;AAAwBC,QAAAA,OAAO,EAAEA;AAAjC,OAA3C,EAAuF,UAAAI,GAAG,EAAI;AAC1F,cAAKC,QAAL,CAAc;AAACC,UAAAA,IAAI,EAAEF,GAAG,CAACE;AAAX,SAAd,EAA+B,YAAI;AAC/B,gBAAKC,QAAL,CAAc,GAAd;AACH,SAFD;AAGH,OAJD;AAKH,KAvDiB;;AAAA,UAwDlBA,QAxDkB,GAwDP,UAACC,KAAD,EAAS;AAChB,UAAIC,KAAK,GAAG,EAAZ;AAAA,UAAgBC,OAAO,GAAG,EAA1B;AAAA,UAA8BC,QAAQ,GAAG,EAAzC;;AACA,YAAKC,KAAL,CAAWN,IAAX,CAAgBO,OAAhB,CAAwB,UAAAC,IAAI,EAAE;AAC1BL,QAAAA,KAAK,CAACM,IAAN,CAAWD,IAAI,CAACE,QAAhB;;AACA,YAAGR,KAAK,KAAK,GAAb,EAAiB;AACbE,UAAAA,OAAO,CAACK,IAAR,CAAaD,IAAI,CAACG,KAAlB;AACAN,UAAAA,QAAQ,CAACI,IAAT,CAAcD,IAAI,CAACI,MAAnB;AACH,SAHD,MAGO,IAAIV,KAAK,KAAK,GAAd,EAAkB;AACrBE,UAAAA,OAAO,CAACK,IAAR,CAAaD,IAAI,CAACK,MAAlB;AACAR,UAAAA,QAAQ,CAACI,IAAT,CAAcD,IAAI,CAACM,OAAnB;AACH,SAHM,MAGA,IAAIZ,KAAK,KAAK,GAAd,EAAmB;AACtBE,UAAAA,OAAO,CAACK,IAAR,CAAaD,IAAI,CAACO,IAAlB;AACAV,UAAAA,QAAQ,CAACI,IAAT,CAAcD,IAAI,CAACQ,KAAnB;AACH,SAHM,MAGA,IAAId,KAAK,KAAK,GAAd,EAAmB;AACtBE,UAAAA,OAAO,CAACK,IAAR,CAAaD,IAAI,CAACS,IAAlB;AACAZ,UAAAA,QAAQ,CAACI,IAAT,CAAcD,IAAI,CAACU,KAAnB;AACH,SAHM,MAGA,IAAIhB,KAAK,KAAK,GAAd,EAAmB;AACtBE,UAAAA,OAAO,CAACK,IAAR,CAAaD,IAAI,CAACW,IAAlB;AACAd,UAAAA,QAAQ,CAACI,IAAT,CAAcD,IAAI,CAACY,KAAnB;AACH;AACJ,OAlBD;;AAmBA,UAAIC,OAAO,GAAG,MAAKf,KAAL,CAAWe,OAAzB;AACAA,MAAAA,OAAO,CAAClB,KAAR,CAAcH,IAAd,GAAqBG,KAArB;AACAkB,MAAAA,OAAO,CAACC,MAAR,GAAiB,CACb;AACIC,QAAAA,IAAI,EAAE,IADV;AAEIvB,QAAAA,IAAI,EAAEI,OAFV;AAGIoB,QAAAA,IAAI,EAAE,MAHV;AAIIC,QAAAA,MAAM,EAAE;AAJZ,OADa,EAOb;AACIF,QAAAA,IAAI,EAAE,IADV;AAEIvB,QAAAA,IAAI,EAAEK,QAFV;AAGImB,QAAAA,IAAI,EAAE,MAHV;AAIIC,QAAAA,MAAM,EAAE;AAJZ,OAPa,CAAjB;;AAcA,YAAKlC,GAAL,CAASmC,kBAAT,GAA8BC,KAA9B;;AACA,YAAKpC,GAAL,CAASmC,kBAAT,GAA8BE,SAA9B,CAAwCP,OAAxC;;AACA,YAAKtB,QAAL,CAAc;AAAE8B,QAAAA,SAAS,EAAE3B;AAAb,OAAd;AACH,KAhGiB;;AAAA,UAiGlB4B,KAjGkB,GAiGV,UAACC,MAAD,EAAY;AAChB,YAAKvC,OAAL,CAAa;AAAEC,QAAAA,SAAS,EAAEsC,MAAM,CAACC,IAAP,CAAY,CAAZ,CAAb;AAA6BtC,QAAAA,OAAO,EAAEqC,MAAM,CAACC,IAAP,CAAY,CAAZ;AAAtC,OAAb;AACH,KAnGiB;;AAEd,UAAK1B,KAAL,GAAa;AACTuB,MAAAA,SAAS,EAAE,GADF;AAET7B,MAAAA,IAAI,EAAE,EAFG;AAGTqB,MAAAA,OAAO,EAAC;AACJY,QAAAA,OAAO,EAAE;AACLC,UAAAA,OAAO,EAAE,MADJ;AAELC,UAAAA,WAAW,EAAE;AACTX,YAAAA,IAAI,EAAE;AADG;AAFR,SADL;AAOJY,QAAAA,MAAM,EAAE;AACJpC,UAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CADF;AAEJqC,UAAAA,GAAG,EAAE;AAFD,SAPJ;AAWJC,QAAAA,IAAI,EAAE;AACFC,UAAAA,MAAM,EAAE,EADN;AAEFF,UAAAA,GAAG,EAAE,EAFH;AAGFG,UAAAA,KAAK,EAAE,EAHL;AAIFC,UAAAA,IAAI,EAAE;AAJJ,SAXF;AAiBJtC,QAAAA,KAAK,EAAE;AACHqB,UAAAA,IAAI,EAAE,UADH;AAEHkB,UAAAA,WAAW,EAAE,KAFV;AAGH1C,UAAAA,IAAI,EAAE,EAHH;AAIH2C,UAAAA,SAAS,EAAE;AACPC,YAAAA,SAAS,EAAE,mBAACC,KAAD,EAAW;AAClB,+BAAU3D,MAAM,CAAC2D,KAAD,CAAN,CAAclD,MAAd,CAAqB,YAArB,CAAV,eAAiDT,MAAM,CAAC2D,KAAD,CAAN,CAAclD,MAAd,CAAqB,OAArB,CAAjD;AACH;AAHM;AAJR,SAjBH;AA2BJmD,QAAAA,KAAK,EAAE;AACHtB,UAAAA,IAAI,EAAE;AADH,SA3BH;AA8BJF,QAAAA,MAAM,EAAE;AA9BJ;AAHC,KAAb;AAFc;AAsCjB;;;;wCACmB;AAChB,WAAKjC,OAAL,CAAa0D,OAAb,CAAqBC,cAArB,CAAoC;AAAEhB,QAAAA,IAAI,EAAE,CAAC9C,MAAM,EAAP,EAAWA,MAAM,EAAjB;AAAR,OAApC;AACA,WAAKM,OAAL,CAAa;AAAEC,QAAAA,SAAS,EAAE,IAAIwD,IAAJ,EAAb;AAAyBvD,QAAAA,OAAO,EAAE,IAAIuD,IAAJ;AAAlC,OAAb;AACH;;;6BA0DQ;AAAA;;AACL,0BACI;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAM,QAAA,MAAM,EAAC,QAAb;AAAsB,QAAA,GAAG,EAAE,KAAK5D,OAAhC;AAAyC,QAAA,QAAQ,EAAE,KAAKyC,KAAxD;AAA+D,QAAA,SAAS,EAAC,aAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,0BAAM,IAAN;AAAW,QAAA,KAAK,EAAC,cAAjB;AAAsB,QAAA,IAAI,EAAC,MAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,gCAAY,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,eAII,0BAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,oBAAC,MAAD;AAAQ,QAAA,IAAI,EAAC,SAAb;AAAuB,QAAA,QAAQ,EAAC,QAAhC;AAAyC,QAAA,IAAI,EAAC,QAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,SAJJ,CADJ,eASI;AAAM,QAAA,IAAI,EAAC,MAAX;AAAkB,QAAA,SAAS,EAAE,KAAKxB,KAAL,CAAWuB,SAAxC;AAAmD,QAAA,QAAQ,EAAE,KAAK5B,QAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,0BAAM,OAAN;AAAc,QAAA,GAAG,EAAC,KAAlB;AAAwB,QAAA,GAAG,EAAC,GAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAKK,KAAL,CAAWuB,SAAX,KAAyB,GAAzB,iBAAgC,oBAAC,YAAD;AAAc,QAAA,GAAG,EAAE,aAACqB,CAAD,EAAO;AAAE,UAAA,MAAI,CAAC3D,GAAL,GAAW2D,CAAX;AAAe,SAA3C;AAA6C,QAAA,MAAM,EAAE,KAAK5C,KAAL,CAAWe,OAAhE;AAAyE,QAAA,KAAK,EAAE;AAAE8B,UAAAA,MAAM,EAAE,OAAV;AAAmBC,UAAAA,KAAK,EAAE;AAA1B,SAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADrC,CADJ,eAII,0BAAM,OAAN;AAAc,QAAA,GAAG,EAAC,OAAlB;AAA0B,QAAA,GAAG,EAAC,GAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAK9C,KAAL,CAAWuB,SAAX,KAAyB,GAAzB,iBAAgC,oBAAC,YAAD;AAAc,QAAA,GAAG,EAAE,aAACqB,CAAD,EAAO;AAAE,UAAA,MAAI,CAAC3D,GAAL,GAAW2D,CAAX;AAAe,SAA3C;AAA6C,QAAA,MAAM,EAAE,KAAK5C,KAAL,CAAWe,OAAhE;AAAyE,QAAA,KAAK,EAAE;AAAE8B,UAAAA,MAAM,EAAE,OAAV;AAAmBC,UAAAA,KAAK,EAAE;AAA1B,SAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADrC,CAJJ,eAOI,0BAAM,OAAN;AAAc,QAAA,GAAG,EAAC,IAAlB;AAAuB,QAAA,GAAG,EAAC,GAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAK9C,KAAL,CAAWuB,SAAX,KAAyB,GAAzB,iBAAgC,oBAAC,YAAD;AAAc,QAAA,GAAG,EAAE,aAACqB,CAAD,EAAO;AAAE,UAAA,MAAI,CAAC3D,GAAL,GAAW2D,CAAX;AAAe,SAA3C;AAA6C,QAAA,MAAM,EAAE,KAAK5C,KAAL,CAAWe,OAAhE;AAAyE,QAAA,KAAK,EAAE;AAAE8B,UAAAA,MAAM,EAAE,OAAV;AAAmBC,UAAAA,KAAK,EAAE;AAA1B,SAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADrC,CAPJ,eAUI,0BAAM,OAAN;AAAc,QAAA,GAAG,EAAC,IAAlB;AAAuB,QAAA,GAAG,EAAC,GAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAK9C,KAAL,CAAWuB,SAAX,KAAyB,GAAzB,iBAAgC,oBAAC,YAAD;AAAc,QAAA,GAAG,EAAE,aAACqB,CAAD,EAAO;AAAE,UAAA,MAAI,CAAC3D,GAAL,GAAW2D,CAAX;AAAe,SAA3C;AAA6C,QAAA,MAAM,EAAE,KAAK5C,KAAL,CAAWe,OAAhE;AAAyE,QAAA,KAAK,EAAE;AAAE8B,UAAAA,MAAM,EAAE,OAAV;AAAmBC,UAAAA,KAAK,EAAE;AAA1B,SAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADrC,CAVJ,eAaI,0BAAM,OAAN;AAAc,QAAA,GAAG,EAAC,IAAlB;AAAuB,QAAA,GAAG,EAAC,GAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAK9C,KAAL,CAAWuB,SAAX,KAAyB,GAAzB,iBAAgC,oBAAC,YAAD;AAAc,QAAA,GAAG,EAAE,aAACqB,CAAD,EAAO;AAAE,UAAA,MAAI,CAAC3D,GAAL,GAAW2D,CAAX;AAAe,SAA3C;AAA6C,QAAA,MAAM,EAAE,KAAK5C,KAAL,CAAWe,OAAhE;AAAyE,QAAA,KAAK,EAAE;AAAE8B,UAAAA,MAAM,EAAE,OAAV;AAAmBC,UAAAA,KAAK,EAAE;AAA1B,SAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADrC,CAbJ,CATJ,CADJ;AA6BH;;;;EArIerE,S;;AAwIpB,eAAeI,KAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport { Form, DatePicker, Tabs} from 'antd';\r\nimport Button from '@/components/button';\r\nimport ReactEcharts from 'echarts-for-react';\r\nimport moment from 'moment';\r\nclass Index extends Component {\r\n    formRef = React.createRef();\r\n    ref = null;\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            activeKey: '1',\r\n            data: [],\r\n            options:{\r\n                tooltip: {\r\n                    trigger: 'axis',\r\n                    axisPointer: {\r\n                        type: 'cross',\r\n                    }\r\n                },\r\n                legend: {\r\n                    data: ['进水', '出水'],\r\n                    top: 0\r\n                },\r\n                grid: {\r\n                    bottom: 40,\r\n                    top: 30,\r\n                    right: 40,\r\n                    left: 40\r\n                },\r\n                xAxis: {\r\n                    type: 'category',\r\n                    boundaryGap: false,\r\n                    data: [],\r\n                    axisLabel: {\r\n                        formatter: (value) => {\r\n                            return `${moment(value).format('yyyy-MM-DD')}\\n${moment(value).format('HH:mm')}`\r\n                        },\r\n                    },\r\n                },\r\n                yAxis: {\r\n                    type: 'value',\r\n                },\r\n                series: []\r\n            },\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.formRef.current.setFieldsValue({ date: [moment(), moment()] });\r\n        this.getData({ startTime: new Date(), endTime: new Date() });\r\n    }\r\n    getData = ({ startTime, endTime }) => {\r\n        if (startTime) {\r\n            startTime = moment(startTime).format('yyyy-MM-DD 00:00:00');\r\n        }\r\n        if (endTime) {\r\n            endTime = moment(endTime).format('yyyy-MM-DD 23:59:59');\r\n        }\r\n        React.axios.get('api/inCodOrTp/queryList', { startTime: startTime, endTime: endTime }, res => {\r\n            this.setState({data: res.data},()=>{\r\n                this.onChange('1');\r\n            });\r\n        })\r\n    }\r\n    onChange = (index)=>{\r\n        let xAxis = [], inWater = [], outWater = [];\r\n        this.state.data.forEach(item=>{\r\n            xAxis.push(item.gainTime);\r\n            if(index === '1'){\r\n                inWater.push(item.inCod);\r\n                outWater.push(item.outCod);\r\n            } else if (index === '2'){\r\n                inWater.push(item.inNh3N);\r\n                outWater.push(item.outNh3N);\r\n            } else if (index === '3') {\r\n                inWater.push(item.inTp);\r\n                outWater.push(item.outTp);\r\n            } else if (index === '4') {\r\n                inWater.push(item.inTn);\r\n                outWater.push(item.outTn);\r\n            } else if (index === '5') {\r\n                inWater.push(item.inPh);\r\n                outWater.push(item.outPh);\r\n            }\r\n        })\r\n        let options = this.state.options;\r\n        options.xAxis.data = xAxis;\r\n        options.series = [\r\n            {\r\n                name: '进水',\r\n                data: inWater,\r\n                type: 'line',\r\n                smooth: true\r\n            },\r\n            {\r\n                name: '出水',\r\n                data: outWater,\r\n                type: 'line',\r\n                smooth: true\r\n            }\r\n        ]\r\n        this.ref.getEchartsInstance().clear();\r\n        this.ref.getEchartsInstance().setOption(options);\r\n        this.setState({ activeKey: index});\r\n    }\r\n    query = (values) => {\r\n        this.getData({ startTime: values.date[0], endTime: values.date[1] });\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"water-quality\">\r\n                <Form layout=\"inline\" ref={this.formRef} onFinish={this.query} className=\"query-tools\">\r\n                    <Form.Item label=\"日期\" name=\"date\">\r\n                        <DatePicker.RangePicker />\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        <Button type=\"primary\" htmlType=\"submit\" icon=\"search\">搜索</Button>&nbsp;\r\n                    </Form.Item>\r\n                </Form>\r\n                <Tabs type='card' activeKey={this.state.activeKey} onChange={this.onChange}>\r\n                    <Tabs.TabPane tab=\"COD\" key=\"1\">\r\n                        {this.state.activeKey === '1' && <ReactEcharts ref={(e) => { this.ref = e; }} option={this.state.options} style={{ height: '400px', width: '100%' }} />}\r\n                    </Tabs.TabPane>\r\n                    <Tabs.TabPane tab=\"NH3-N\" key=\"2\">\r\n                        {this.state.activeKey === '2' && <ReactEcharts ref={(e) => { this.ref = e; }} option={this.state.options} style={{ height: '400px', width: '100%' }} />}\r\n                    </Tabs.TabPane>\r\n                    <Tabs.TabPane tab=\"TP\" key=\"3\">\r\n                        {this.state.activeKey === '3' && <ReactEcharts ref={(e) => { this.ref = e; }} option={this.state.options} style={{ height: '400px', width: '100%' }} />}\r\n                    </Tabs.TabPane>\r\n                    <Tabs.TabPane tab=\"TN\" key=\"4\">\r\n                        {this.state.activeKey === '4' && <ReactEcharts ref={(e) => { this.ref = e; }} option={this.state.options} style={{ height: '400px', width: '100%' }} />}\r\n                    </Tabs.TabPane>\r\n                    <Tabs.TabPane tab=\"PH\" key=\"5\">\r\n                        {this.state.activeKey === '5' && <ReactEcharts ref={(e) => { this.ref = e; }} option={this.state.options} style={{ height: '400px', width: '100%' }} />}\r\n                    </Tabs.TabPane>\r\n                </Tabs>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default Index;"]},"metadata":{},"sourceType":"module"}