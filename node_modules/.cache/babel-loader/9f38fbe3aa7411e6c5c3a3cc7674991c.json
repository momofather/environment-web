{"ast":null,"code":"import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/input-number/style\";\nimport _InputNumber from \"antd/es/input-number\";\nimport \"antd/es/radio/style\";\nimport _Radio from \"antd/es/radio\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\system\\\\menu\\\\Edit.js\";\nimport React, { Component } from 'react';\nimport Button from '@/components/button';\nimport Icons from '@/components/icons';\n\nvar Edit = /*#__PURE__*/function (_Component) {\n  _inherits(Edit, _Component);\n\n  function Edit(props) {\n    var _this;\n\n    _classCallCheck(this, Edit);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Edit).call(this, props));\n    _this.formRef = React.createRef();\n\n    _this.getInfo = function () {\n      if (_this.props.menuId) {\n        React.axios.get(\"sys/menu/info/\".concat(_this.props.menuId), null, function (res) {\n          _this.formRef.current.setFieldsValue(res.data);\n\n          _this.setState({\n            type: res.data.type,\n            iconName: res.data.icon\n          });\n\n          _this.getParentMenu();\n        });\n      } else {\n        _this.getParentMenu();\n      }\n    };\n\n    _this.getParentMenu = function () {\n      if (_this.props.parentId) {\n        React.axios.get(\"sys/menu/info/\".concat(_this.props.parentId), null, function (res) {\n          _this.setState({\n            parent: res.data\n          });\n\n          _this.formRef.current.setFieldsValue({\n            parentName: res.data.name\n          });\n        });\n      } else {\n        _this.formRef.current.setFieldsValue({\n          parentName: '一级菜单'\n        });\n      }\n    };\n\n    _this.typeChange = function (e) {\n      _this.setState({\n        type: e.target.value\n      });\n    };\n\n    _this.submit = function () {\n      _this.formRef.current.validateFields().then(function (values) {\n        values.parentId = _this.props.parentId;\n        values.menuId = _this.props.menuId;\n\n        if (values.parentId) {\n          values.reserve = \"\".concat(_this.state.parent.reserve ? _this.state.parent.reserve + ',' : '').concat(values.parentId);\n        } else {\n          values.reserve = '';\n        }\n\n        if (values.type !== 2) {\n          values.icon = _this.state.iconName;\n        }\n\n        var url = 'sys/menu/save';\n\n        if (values.menuId) {\n          url = 'sys/menu/update';\n        }\n\n        React.axios.post(url, values, function () {\n          React.message.success('操作成功');\n\n          _this.props.onCancel(1);\n        });\n      }).then(function (err) {});\n    };\n\n    _this.selectIcon = function (iconName) {\n      _this.setState({\n        iconName: iconName,\n        showIcons: false\n      });\n    };\n\n    _this.state = {\n      type: 1,\n      parent: {},\n      iconName: 'icon-tianjia'\n    };\n    return _this;\n  }\n\n  _createClass(Edit, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getInfo();\n    } // 详情\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(_Modal, {\n        title: this.props.menuId ? '修改菜单' : \"添加菜单\",\n        visible: true,\n        onCancel: this.props.onCancel,\n        onOk: this.submit,\n        maskClosable: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(_Form, {\n        ref: this.formRef,\n        labelCol: {\n          span: 4\n        },\n        onFinish: this.submit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u7236\\u7EA7\\u83DC\\u5355\",\n        name: \"parentName\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u83DC\\u5355\\u540D\\u79F0\",\n        name: \"name\",\n        rules: [{\n          required: true,\n          message: '请输入菜单名称!'\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        placeholder: \"\\u83DC\\u5355\\u540D\\u79F0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u83DC\\u5355\\u7C7B\\u578B\",\n        name: \"type\",\n        initialValue: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Radio.Group, {\n        onChange: this.typeChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Radio, {\n        value: 0,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 29\n        }\n      }, \"\\u76EE\\u5F55\"), /*#__PURE__*/React.createElement(_Radio, {\n        value: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 29\n        }\n      }, \"\\u83DC\\u5355\"), /*#__PURE__*/React.createElement(_Radio, {\n        value: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 29\n        }\n      }, \"\\u6309\\u94AE\"))), this.state.type !== 2 && /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u56FE\\u6807\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(React.IconFont, {\n        style: {\n          fontSize: '22px'\n        },\n        type: this.state.iconName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        style: {\n          marginLeft: '30px'\n        },\n        type: \"primary\",\n        size: \"small\",\n        onClick: function onClick() {\n          _this2.setState({\n            showIcons: true\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 25\n        }\n      }, \"\\u9009\\u62E9\"), this.state.showIcons && /*#__PURE__*/React.createElement(Icons, {\n        onOk: this.selectIcon,\n        onCancel: function onCancel() {\n          _this2.setState({\n            showIcons: false\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 48\n        }\n      })), this.state.type === 1 && /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u94FE\\u63A5\\u5730\\u5740\",\n        name: \"url\",\n        rules: [{\n          required: true,\n          message: '请输入链接地址!'\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        placeholder: \"\\u94FE\\u63A5\\u5730\\u5740\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u6743\\u9650\\u6807\\u8BC6\",\n        name: \"perms\",\n        rules: [{\n          required: true,\n          message: '请输入权限标识!'\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Input, {\n        placeholder: \"\\u6743\\u9650\\u6807\\u8BC6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 25\n        }\n      })), this.state.type === 1 && /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u662F\\u5426\\u663E\\u793A\",\n        name: \"visible\",\n        initialValue: true,\n        rules: [{\n          required: true,\n          message: '请输入权限标识!'\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Radio.Group, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(_Radio, {\n        value: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 29\n        }\n      }, \"\\u662F\"), /*#__PURE__*/React.createElement(_Radio, {\n        value: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 29\n        }\n      }, \"\\u5426\"))), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u6392\\u5E8F\",\n        name: \"orderNum\",\n        initialValue: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_InputNumber, {\n        style: {\n          width: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }\n      }))));\n    }\n  }]);\n\n  return Edit;\n}(Component);\n\nEdit.defaultProps = {\n  parentId: 0,\n  menuId: null\n};\nexport default Edit;","map":{"version":3,"sources":["E:/project/environment-web/src/pages/system/menu/Edit.js"],"names":["React","Component","Button","Icons","Edit","props","formRef","createRef","getInfo","menuId","axios","get","res","current","setFieldsValue","data","setState","type","iconName","icon","getParentMenu","parentId","parent","parentName","name","typeChange","e","target","value","submit","validateFields","then","values","reserve","state","url","post","message","success","onCancel","err","selectIcon","showIcons","span","required","fontSize","marginLeft","width","defaultProps"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {Modal,Form,Input,Radio,InputNumber} from 'antd';\r\nimport Button from '@/components/button';\r\nimport Icons from '@/components/icons';\r\nclass Edit extends Component{\r\n    formRef = React.createRef();\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            type: 1,\r\n            parent: {},\r\n            iconName: 'icon-tianjia'\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.getInfo();\r\n    }\r\n\r\n    // 详情\r\n    getInfo=()=>{\r\n        if(this.props.menuId){\r\n            React.axios.get(`sys/menu/info/${this.props.menuId}`,null,res=>{\r\n                this.formRef.current.setFieldsValue(res.data);\r\n                this.setState({\r\n                    type: res.data.type,\r\n                    iconName: res.data.icon\r\n                });\r\n                this.getParentMenu();\r\n            })\r\n        }else{\r\n            this.getParentMenu();\r\n        }\r\n    }\r\n\r\n    // 查询父菜单\r\n    getParentMenu=()=>{\r\n        if(this.props.parentId){\r\n            React.axios.get(`sys/menu/info/${this.props.parentId}`,null,res=>{\r\n                this.setState({parent: res.data});\r\n                this.formRef.current.setFieldsValue({\r\n                    parentName: res.data.name\r\n                });\r\n            })\r\n        }else{\r\n            this.formRef.current.setFieldsValue({\r\n                parentName: '一级菜单'\r\n            });\r\n        }\r\n    }\r\n\r\n    typeChange=(e)=>{\r\n        this.setState({\r\n            type:e.target.value\r\n        });\r\n    }\r\n\r\n    // 提交\r\n    submit=()=>{\r\n        this.formRef.current.validateFields().then(values=>{\r\n            values.parentId = this.props.parentId;\r\n            values.menuId = this.props.menuId;\r\n            if(values.parentId){\r\n                values.reserve = `${this.state.parent.reserve?this.state.parent.reserve+',':''}${values.parentId}`;\r\n            }else{\r\n                values.reserve = '';\r\n            }\r\n            if(values.type!==2){\r\n                values.icon = this.state.iconName;\r\n            }\r\n            let url = 'sys/menu/save';\r\n            if(values.menuId){\r\n                url = 'sys/menu/update';\r\n            }\r\n            React.axios.post(url,values,()=>{\r\n                React.message.success('操作成功');\r\n                this.props.onCancel(1);\r\n            })\r\n        }).then(err=>{});\r\n    }\r\n    // 选择图标后\r\n    selectIcon=(iconName)=>{\r\n        this.setState({\r\n            iconName: iconName,\r\n            showIcons: false\r\n        })\r\n    }\r\n    render(){\r\n        return(\r\n            <Modal title={this.props.menuId?'修改菜单':\"添加菜单\"} visible={true} onCancel={this.props.onCancel} onOk={this.submit} maskClosable={false}>\r\n                <Form ref={this.formRef} labelCol={{span: 4}} onFinish={this.submit}>\r\n                    <Form.Item label=\"父级菜单\" name=\"parentName\">\r\n                        <Input readOnly />\r\n                    </Form.Item>\r\n                    <Form.Item label=\"菜单名称\" name=\"name\" rules={[{ required: true, message: '请输入菜单名称!'}]}>\r\n                        <Input placeholder=\"菜单名称\"/>\r\n                    </Form.Item>\r\n                    <Form.Item label=\"菜单类型\" name=\"type\" initialValue={1}>\r\n                        <Radio.Group onChange={this.typeChange}>\r\n                            <Radio value={0}>目录</Radio>\r\n                            <Radio value={1}>菜单</Radio>\r\n                            <Radio value={2}>按钮</Radio>\r\n                        </Radio.Group>\r\n                    </Form.Item>\r\n                    {this.state.type!==2&&\r\n                    <Form.Item label=\"图标\">\r\n                        <React.IconFont style={{fontSize: '22px'}} type={this.state.iconName} />\r\n                        <Button style={{marginLeft: '30px'}} type=\"primary\" size=\"small\" onClick={()=>{this.setState({showIcons: true})}}>选择</Button>\r\n                        {this.state.showIcons&&<Icons onOk={this.selectIcon} onCancel={()=>{this.setState({showIcons: false})}} />}\r\n                    </Form.Item>\r\n                    }\r\n                    {this.state.type===1&&\r\n                    <Form.Item label=\"链接地址\" name=\"url\" rules={[{ required: true, message: '请输入链接地址!'}]}>\r\n                        <Input placeholder=\"链接地址\"/>\r\n                    </Form.Item>\r\n                    }\r\n                    <Form.Item label=\"权限标识\" name=\"perms\" rules={[{ required: true, message: '请输入权限标识!'}]}>\r\n                        <Input placeholder=\"权限标识\"/>\r\n                    </Form.Item>\r\n                    {this.state.type===1&&\r\n                    <Form.Item label=\"是否显示\" name=\"visible\" initialValue={true} rules={[{ required: true, message: '请输入权限标识!'}]}>\r\n                        <Radio.Group>\r\n                            <Radio value={true}>是</Radio>\r\n                            <Radio value={false}>否</Radio>\r\n                        </Radio.Group>\r\n                    </Form.Item>\r\n                    }\r\n                    <Form.Item label=\"排序\" name=\"orderNum\" initialValue={1}>\r\n                        <InputNumber style={{width: '100%'}} />\r\n                    </Form.Item>\r\n                </Form>\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\nEdit.defaultProps = {\r\n    parentId: 0,\r\n    menuId: null\r\n}\r\nexport default Edit"]},"metadata":{},"sourceType":"module"}