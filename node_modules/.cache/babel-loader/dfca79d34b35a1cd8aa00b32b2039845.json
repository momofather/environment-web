{"ast":null,"code":"import \"antd/es/table/style\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/date-picker/style\";\nimport _DatePicker from \"antd/es/date-picker\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/select/style\";\nimport _Select from \"antd/es/select\";\nimport _classCallCheck from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"E:\\\\project\\\\environment-web\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"E:\\\\project\\\\environment-web\\\\src\\\\pages\\\\runRecord\\\\hncdc\\\\index.js\";\n// 磁混凝沉淀池\nimport React, { Component } from 'react';\nimport { CheckOutlined, WarningOutlined } from '@ant-design/icons';\nimport Button from '@/components/button';\nimport moment from 'moment';\n\nvar Index = /*#__PURE__*/function (_Component) {\n  _inherits(Index, _Component);\n\n  function Index(props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Index).call(this, props));\n    _this.formRef = React.createRef();\n\n    _this.getData = function (_ref) {\n      var startTime = _ref.startTime,\n          endTime = _ref.endTime,\n          poolNumber = _ref.poolNumber;\n\n      if (startTime) {\n        startTime = moment(startTime).format('yyyy-MM-DD 00:00:00');\n      }\n\n      if (endTime) {\n        endTime = moment(endTime).format('yyyy-MM-DD 23:59:59');\n      }\n\n      React.axios.get('api/settlingTank/queryList', {\n        startTime: startTime,\n        endTime: endTime,\n        poolNumber: poolNumber\n      }, function (res) {\n        React.axios.get('api/settlingTank/queryList', {\n          startTime: moment(startTime).add(1, \"days\").format(\"yyyy-MM-DD 00:00:00\"),\n          endTime: moment(endTime).add(1, \"days\").format(\"yyyy-MM-DD 23:00:00\")\n        }, function (res2) {\n          if (res2.data.length > 0) {\n            res.data.push(res2.data[0]);\n          }\n\n          _this.setState({\n            data: res.data\n          });\n        });\n      });\n    };\n\n    _this.query = function (values) {\n      _this.getData({\n        startTime: values.date[0],\n        endTime: values.date[1],\n        poolNumber: values.poolNumber\n      });\n    };\n\n    _this.onChange = function () {\n      var values = _this.formRef.current.getFieldsValue();\n\n      _this.query(values);\n    };\n\n    _this.info = function () {\n      _this.setState({\n        infoModal: true\n      });\n    };\n\n    _this.cancel = function () {\n      _this.setState({\n        infoModal: false\n      });\n    };\n\n    _this.formatter = function (val) {\n      if (val === 'true') {\n        return /*#__PURE__*/React.createElement(CheckOutlined, {\n          style: {\n            color: \"green\"\n          },\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 20\n          }\n        });\n      } else {\n        return /*#__PURE__*/React.createElement(WarningOutlined, {\n          style: {\n            color: \"red\"\n          },\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 20\n          }\n        });\n      }\n    };\n\n    _this.state = {\n      infoModal: false,\n      data: []\n    };\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.formRef.current.setFieldsValue({\n        date: [moment(), moment()],\n        poolNumber: '1'\n      });\n      this.getData({\n        startTime: new Date(),\n        endTime: new Date(),\n        poolNumber: 1\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var columns = [{\n        title: '时间',\n        align: 'center',\n        render: function render(text, res) {\n          return moment(res.gainTime).format('yyyy-MM-DD HH:mm');\n        }\n      }, {\n        title: '搅拌器',\n        align: 'center',\n        children: [{\n          title: 'T1',\n          align: 'center',\n          render: function render(text, res) {\n            return _this2.formatter(res.agitator1);\n          }\n        }, {\n          title: 'T2',\n          align: 'center',\n          render: function render(text, res) {\n            return _this2.formatter(res.agitator2);\n          }\n        }, {\n          title: 'T3',\n          align: 'center',\n          render: function render(text, res) {\n            return _this2.formatter(res.agitator3);\n          }\n        }]\n      }, {\n        title: '中心转动刮泥机',\n        align: 'center',\n        children: [{\n          title: '扭力值(N*m)',\n          dataIndex: 'torqueValue',\n          key: 'torqueValue',\n          align: 'center'\n        }]\n      }, {\n        title: '磁粉回收泵',\n        align: 'center',\n        children: [{\n          title: '流量(m³/h)',\n          align: 'center',\n          render: function render(text, res) {\n            return parseFloat(res.flow).toFixed(3);\n          }\n        }]\n      }, {\n        title: '高剪切机',\n        align: 'center',\n        render: function render(text, res) {\n          return _this2.formatter(res.highShear);\n        }\n      }, {\n        title: '磁分离器',\n        align: 'center',\n        render: function render(text, res) {\n          return _this2.formatter(res.separator);\n        }\n      }, {\n        title: '1#污泥回流泵',\n        align: 'center',\n        children: [{\n          title: '频率(Hz)',\n          align: 'center',\n          render: function render(text, res) {\n            return parseFloat(res.pump1Frequency).toFixed(3);\n          }\n        }, {\n          title: '电流(A)',\n          dataIndex: 'pump1Current',\n          key: 'pump1Current',\n          align: 'center'\n        }]\n      }, {\n        title: '2#污泥回流泵',\n        align: 'center',\n        children: [{\n          title: '频率(Hz)',\n          dataIndex: 'pump2Frequency',\n          key: 'pump2Frequency',\n          align: 'center',\n          render: function render(text, res) {\n            return parseFloat(res.pump2Frequency).toFixed(3);\n          }\n        }, {\n          title: '电流(A)',\n          dataIndex: 'pump2Current',\n          key: 'pump2Current',\n          align: 'center'\n        }]\n      }, {\n        title: '剩余污泥泵',\n        align: 'center',\n        children: [{\n          title: '1#',\n          dataIndex: 'sludgePump1',\n          key: 'sludgePump1',\n          align: 'center',\n          render: function render(text, res) {\n            return _this2.formatter(res.sludgePump1);\n          }\n        }, {\n          title: '2#',\n          dataIndex: 'sludgePump2',\n          key: 'sludgePump2',\n          align: 'center',\n          render: function render(text, res) {\n            return _this2.formatter(res.sludgePump2);\n          }\n        }]\n      }];\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(_Form, {\n        layout: \"inline\",\n        ref: this.formRef,\n        onFinish: this.query,\n        className: \"query-tools\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u8BBE\\u5907\\u7F16\\u53F7\",\n        name: \"poolNumber\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_Select, {\n        style: {\n          width: '200px'\n        },\n        onChange: this.onChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(_Select.Option, {\n        value: \"1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 25\n        }\n      }, \"1#\"), /*#__PURE__*/React.createElement(_Select.Option, {\n        value: \"2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 25\n        }\n      }, \"2#\"), /*#__PURE__*/React.createElement(_Select.Option, {\n        value: \"3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 25\n        }\n      }, \"3#\"), /*#__PURE__*/React.createElement(_Select.Option, {\n        value: \"4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 25\n        }\n      }, \"4#\"))), /*#__PURE__*/React.createElement(_Form.Item, {\n        label: \"\\u65E5\\u671F\",\n        name: \"date\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(_DatePicker.RangePicker, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(_Form.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        icon: \"search\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }\n      }, \"\\u641C\\u7D22\"))), /*#__PURE__*/React.createElement(_Table, {\n        size: \"small\",\n        columns: columns,\n        dataSource: this.state.data,\n        bordered: true,\n        pagination: false,\n        rowKey: \"id\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }\n      }));\n    }\n  }]);\n\n  return Index;\n}(Component);\n\nexport default Index;","map":{"version":3,"sources":["E:/project/environment-web/src/pages/runRecord/hncdc/index.js"],"names":["React","Component","CheckOutlined","WarningOutlined","Button","moment","Index","props","formRef","createRef","getData","startTime","endTime","poolNumber","format","axios","get","res","add","res2","data","length","push","setState","query","values","date","onChange","current","getFieldsValue","info","infoModal","cancel","formatter","val","color","state","setFieldsValue","Date","columns","title","align","render","text","gainTime","children","agitator1","agitator2","agitator3","dataIndex","key","parseFloat","flow","toFixed","highShear","separator","pump1Frequency","pump2Frequency","sludgePump1","sludgePump2","width"],"mappings":"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","sourcesContent":["// 磁混凝沉淀池\r\nimport React, { Component } from 'react';\r\nimport { Form, DatePicker, Select, Table } from 'antd';\r\nimport { CheckOutlined,WarningOutlined } from '@ant-design/icons';\r\nimport Button from '@/components/button';\r\nimport moment from 'moment';\r\nclass Index extends Component {\r\n    formRef = React.createRef();\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            infoModal: false,\r\n            data: []\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.formRef.current.setFieldsValue({ date: [moment(), moment()], poolNumber: '1' });\r\n        this.getData({ startTime: new Date(), endTime: new Date(), poolNumber: 1});\r\n    }\r\n    getData = ({ startTime, endTime, poolNumber }) => {\r\n        if (startTime) {\r\n            startTime = moment(startTime).format('yyyy-MM-DD 00:00:00');\r\n        }\r\n        if (endTime) {\r\n            endTime = moment(endTime).format('yyyy-MM-DD 23:59:59');\r\n        }\r\n        React.axios.get('api/settlingTank/queryList', { startTime: startTime, endTime: endTime, poolNumber: poolNumber}, res => {\r\n            React.axios.get('api/settlingTank/queryList', { startTime: moment(startTime).add(1, \"days\").format(\"yyyy-MM-DD 00:00:00\"), endTime: moment(endTime).add(1, \"days\").format(\"yyyy-MM-DD 23:00:00\") }, res2 => {\r\n                if (res2.data.length > 0) {\r\n                    res.data.push(res2.data[0])\r\n                }\r\n                this.setState({ data: res.data });\r\n            })\r\n        })\r\n    }\r\n    query = (values) => {\r\n        this.getData({ startTime: values.date[0], endTime: values.date[1], poolNumber: values.poolNumber});\r\n    }\r\n    onChange = ()=>{\r\n        let values = this.formRef.current.getFieldsValue();\r\n        this.query(values);\r\n    }\r\n    info = () => {\r\n        this.setState({ infoModal: true });\r\n    }\r\n    cancel = () => {\r\n        this.setState({ infoModal: false });\r\n    }\r\n    formatter=(val)=>{\r\n        if(val === 'true'){\r\n            return <CheckOutlined style={{color:\"green\"}}/>\r\n        }else{\r\n            return <WarningOutlined style={{ color: \"red\" }}/>\r\n        }\r\n    }\r\n    render() {\r\n        const columns = [\r\n            {\r\n                title: '时间',\r\n                align: 'center',\r\n                render: (text, res) => moment(res.gainTime).format('yyyy-MM-DD HH:mm')\r\n            },\r\n            {\r\n                title: '搅拌器',\r\n                align: 'center',\r\n                children: [\r\n                    {\r\n                        title: 'T1',\r\n                        align: 'center',\r\n                        render: (text,res)=>{\r\n                            return this.formatter(res.agitator1);\r\n                        }\r\n                    },\r\n                    {\r\n                        title: 'T2',\r\n                        align: 'center',\r\n                        render: (text,res)=>{\r\n                            return this.formatter(res.agitator2);\r\n                        }\r\n                    },\r\n                    {\r\n                        title: 'T3',\r\n                        align: 'center',\r\n                        render: (text,res)=>{\r\n                            return this.formatter(res.agitator3);\r\n                        }\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                title: '中心转动刮泥机',\r\n                align: 'center',\r\n                children: [\r\n                    {\r\n                        title: '扭力值(N*m)',\r\n                        dataIndex: 'torqueValue',\r\n                        key: 'torqueValue',\r\n                        align: 'center',\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                title: '磁粉回收泵',\r\n                align: 'center',\r\n                children: [\r\n                    {\r\n                        title: '流量(m³/h)',\r\n                        align: 'center',\r\n                        render:(text,res)=>parseFloat(res.flow).toFixed(3),\r\n\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                title: '高剪切机',\r\n                align: 'center',\r\n                render: (text,res)=>{\r\n                    return this.formatter(res.highShear);\r\n                }\r\n            },\r\n            {\r\n                title: '磁分离器',\r\n                align: 'center',\r\n                render: (text,res)=>{\r\n                    return this.formatter(res.separator);\r\n                }\r\n            },\r\n            {\r\n                title: '1#污泥回流泵',\r\n                align: 'center',\r\n                children: [\r\n                    {\r\n                        title: '频率(Hz)',\r\n                        align: 'center',\r\n                        render:(text,res)=>parseFloat(res.pump1Frequency).toFixed(3),\r\n\r\n                    },\r\n                    {\r\n                        title: '电流(A)',\r\n                        dataIndex: 'pump1Current',\r\n                        key: 'pump1Current',\r\n                        align: 'center',\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                title: '2#污泥回流泵',\r\n                align: 'center',\r\n                children: [\r\n                    {\r\n                        title: '频率(Hz)',\r\n                        dataIndex: 'pump2Frequency',\r\n                        key: 'pump2Frequency',\r\n                        align: 'center',\r\n                        render:(text,res)=>parseFloat(res.pump2Frequency).toFixed(3),\r\n\r\n                    },\r\n                    {\r\n                        title: '电流(A)',\r\n                        dataIndex: 'pump2Current',\r\n                        key: 'pump2Current',\r\n                        align: 'center',\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                title: '剩余污泥泵',\r\n                align: 'center',\r\n                children: [\r\n                    {\r\n                        title: '1#',\r\n                        dataIndex: 'sludgePump1',\r\n                        key: 'sludgePump1',\r\n                        align: 'center',\r\n                        render: (text,res)=>{\r\n                            return this.formatter(res.sludgePump1);\r\n                        }\r\n                    },\r\n                    {\r\n                        title: '2#',\r\n                        dataIndex: 'sludgePump2',\r\n                        key: 'sludgePump2',\r\n                        align: 'center',\r\n                        render: (text,res)=>{\r\n                            return this.formatter(res.sludgePump2);\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        ]\r\n        return <>\r\n            <Form layout=\"inline\" ref={this.formRef} onFinish={this.query} className=\"query-tools\">\r\n                <Form.Item label=\"设备编号\" name=\"poolNumber\">\r\n                    <Select style={{ width: '200px' }} onChange={this.onChange}>\r\n                        <Select.Option value=\"1\">1#</Select.Option>\r\n                        <Select.Option value=\"2\">2#</Select.Option>\r\n                        <Select.Option value=\"3\">3#</Select.Option>\r\n                        <Select.Option value=\"4\">4#</Select.Option>\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item label=\"日期\" name=\"date\">\r\n                    <DatePicker.RangePicker />\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    <Button type=\"primary\" htmlType=\"submit\" icon=\"search\">搜索</Button>\r\n                </Form.Item>\r\n            </Form>\r\n            <Table size=\"small\" columns={columns} dataSource={this.state.data} bordered pagination={false} rowKey=\"id\"/>\r\n        </>;\r\n    }\r\n}\r\n \r\nexport default Index;"]},"metadata":{},"sourceType":"module"}